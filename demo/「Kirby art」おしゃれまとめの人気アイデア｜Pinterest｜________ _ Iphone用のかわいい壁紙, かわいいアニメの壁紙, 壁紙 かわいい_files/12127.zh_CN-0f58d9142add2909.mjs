(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[12127],{938547:e=>{e.exports="https://s.pinimg.com/webapp/birthday-4428bee8.png"},293926:(e,t,o)=>{o.d(t,{Z:()=>n});var i=o(667294),a=o(883119),s=o(785893);function n({color:e="red",duration:t,finalProgress:o,shape:n="pill"}){const[l,r]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const e=setTimeout((()=>{r(!0)}),0);return()=>{clearTimeout(e)}}),[]);const c="pill"===n;return(0,s.jsx)(a.xu,{color:e,height:c?8:6,rounding:c?"pill":2,width:`${o}%`,dangerouslySetInlineStyle:{__style:{transform:c?`translateX(${l?"-5px":"-100%"})`:`scaleX(${l?1:0})`,transformOrigin:"left",transitionDuration:`${t}ms`,transitionTimingFunction:"ease-in"}}})}},767874:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(536042),a=o(785893);function s({fillColor:e,size:t,noCircle:o}){const s=(0,i.ZP)();return(0,a.jsxs)("svg",{height:t,style:{display:"block"},viewBox:o?"3 3 70 70":"-3 -3 82 82",width:t,children:[(0,a.jsx)("title",{children:s.bt("Pinterest 图标", "Pinterest logo", "Accessibility label for Pinterest icon", undefined, true)}),o?null:(0,a.jsx)("circle",{cx:"38",cy:"38",fill:e?"transparent":"white",r:"40"}),(0,a.jsx)("path",{d:"M27.5 71c3.3 1 6.7 1.6 10.3 1.6C57 72.6 72.6 57 72.6 37.8 72.6 18.6 57 3 37.8 3 18.6 3 3 18.6 3 37.8c0 14.8 9.3 27.5 22.4 32.5-.3-2.7-.6-7.2 0-10.3l4-17.2s-1-2-1-5.2c0-4.8 3-8.4 6.4-8.4 3 0 4.4 2.2 4.4 5 0 3-2 7.3-3 11.4C35.6 49 38 52 41.5 52c6.2 0 11-6.6 11-16 0-8.3-6-14-14.6-14-9.8 0-15.6 7.3-15.6 15 0 3 1 6 2.6 8 .3.2.3.5.2 1l-1 3.8c0 .6-.4.8-1 .4-4.4-2-7-8.3-7-13.4 0-11 7.8-21 22.8-21 12 0 21.3 8.6 21.3 20 0 12-7.4 21.6-18 21.6-3.4 0-6.7-1.8-7.8-4L32 61.7c-.8 3-3 7-4.5 9.4z",fill:null!=e?e:"#e60023",fillRule:"evenodd"})]})}},526750:(e,t,o)=>{o.d(t,{Z:()=>x});var i=o(667294),a=o(616550),s=o(883119),n=o(457628),l=o(791045),r=o(536042),c=o(988014),d=o(804484),h=o(282802),_=o(272109),u=o(567648),p=o(966633),g=o(392881),m=o(785893);const x=({disableMandatoryAgeCheck:e,focusOnMount:t,value:o,onChange:x,onError:y,onChangeParsed:w,onValidation:f,preventValidationOnStart:b,error:v,customPlaceholderText:P})=>{const[k,A]=(0,i.useState)(""),[S,E]=(0,i.useState)(!1),{country:C}=(0,h.B)(),z=(0,r.ZP)(),j=(0,a.useLocation)(),T=(0,i.useRef)(k);(0,i.useEffect)((()=>{T.current!==k&&(y&&k&&y(k),T.current=k)}));const L=(0,i.useRef)(null);(0,_.Z)((()=>{t&&L.current&&L.current.focus()}));const R=t=>{const o=(0,c.Ni)(j)&&(0,d.du)(C)||!e,i=(0,p.Z)(t||"",[...o?[(0,g.aH)({message:z.bt("你漏填了一处！告诉我们你的年龄。", "You missed a spot! Let us know how old you are.", "Required age validation error", undefined, true)})]:[],(0,g.qA)({message:z.bt("不是数字。", "Not a number.", "Number field validation error message", undefined, true)}),(0,g.ZA)({invalidAgeString:z.bt("请输入有效的数字。", "Please enter a valid number.", "webapp.app.Signup.ageError", undefined, true)})]),a=(null==i?void 0:i.toString())||"";return null==f||f(a),a};(0,i.useEffect)((()=>{b||R(o)}),[]);const M=!!(0,u.Z)()||"1"!==n.U2(l.It);(0,i.useEffect)((()=>{M||S||(A(z.bt("抱歉，你目前不符合注册 Pinterest 的资格。", "Sorry, you’re not eligible to sign up for Pinterest right now.", "Error message shown when underage user tries to register", undefined, true)),E(!0))}));const I=e=>{const t=R(e);A(t)};return(0,m.jsx)(s.nv,{ref:L,errorMessage:k||v,id:"age-input",disabled:!M,name:"age",value:o||"",onChange:e=>{const{value:t}=e,o=parseInt(t,10);t&&Number.isNaN(o)||(null==x||x(e),null==w||w(e.value?o:void 0),I(t))},onBlur:()=>{M&&(A(""),I(o))},hasError:!!k,size:"lg",autoComplete:"off",placeholder:P||z.bt("年龄", "Age", "Textfield placeholder", undefined, true),type:"text"})}},921270:(e,t,o)=>{o.d(t,{Z:()=>n,k:()=>i.k});var i=o(642447),a=o(282802),s=o(785893);const n=({dateFormatType:e,useUTC:t=!0,value:o})=>(0,s.jsx)(a.LC,{children:a=>(0,i.Z)(a.locale,o,e,t)})},406018:(e,t,o)=>{o.d(t,{Z:()=>i});const i=e=>{const t=new Date;return Math.floor(new Date(t.setFullYear(t.getFullYear()-e)).getTime()/1e3)}},642447:(e,t,o)=>{o.d(t,{Z:()=>s,k:()=>i});const i={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit"},a=function(e){switch(e){case i.YEAR:return{year:"numeric"};case i.LONG:return{year:"numeric",month:"long",day:"numeric"};case i.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case i.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case i.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case i.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case i.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.MONTH_DAY:return{month:"long",day:"numeric"};case i.SHORT_MONTH:return{month:"short"};case i.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case i.DAY:return{day:"numeric"};case i.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case i.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case i.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case i.TIME:return{hour:"numeric",minute:"2-digit"};case i.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case i.HOUR:return{hour:"numeric"};default:throw new Error('invalid dateFormatType "'+e+'"')}};function s(e,t,o,i=!0){const s=a(o);i&&(s.timeZone="UTC");return new Intl.DateTimeFormat(e,s).format(t)}},560544:(e,t,o)=>{o.d(t,{Z:()=>i});const i=e=>Math.floor(new Date(e).getTime()/1e3)},228742:(e,t,o)=>{o.d(t,{w:()=>E,Z:()=>z});var i=o(883119),a=o(204213),s=o(476366),n=o(970588),l=o(536042),r=o(785893);function c({callBack:e,color:t,email:o,inline:a,overrideText:s}){const c=(0,l.ZP)(),d=s||c.bt("重置密码", "Reset password", "Request a password reset email", undefined, true);return(0,r.jsx)(i.zx,{accessibilityLabel:d,color:t||"red",fullWidth:a,onClick:()=>{(0,n.Z)({url:"/v3/users/forgot_password/",method:"POST",data:{username_or_email:o}}).then((()=>e()))},text:d})}var d=o(630089);function h({email:e,onClose:t,onPasswordResetSent:o,socialButtons:n}){const h=(0,l.ZP)();return(0,r.jsx)(s.Z,{heading:h.bt("你似乎在登录时遇到了问题", "Looks like you’re having trouble logging in", "Modal heading for user who have attempted to login three times", undefined, true),onDismiss:t,size:"sm",children:(0,r.jsx)(i.xu,{alignItems:"center",justifyContent:"center",display:"flex",marginBottom:9,"data-test-id":"touchableErrorMessage",children:(0,r.jsxs)(i.kC,{alignItems:"center",direction:"column",width:290,children:[(0,r.jsx)(i.xu,{marginBottom:6,children:(0,r.jsx)(i.xv,{align:"center",children:(0,d.nk)(h.bt("我们向 {{ email }} 发送了一封电子邮件以激活你的帐户。", "We sent an email to {{ email }} to help you get back in.", " - ", undefined, true),{email:(0,r.jsx)(i.xv,{inline:!0,weight:"bold",children:e},"emailAddress")})})}),(0,r.jsx)(i.xu,{width:"100%",marginBottom:8,children:(0,r.jsx)(c,{inline:!0,color:"red",email:e,callBack:o,overrideText:h.bt("重发邮件", "Resend email", "Button to allow the user to request a password reset email", undefined, true)})}),(0,r.jsx)(i.xv,{children:h.bt("或者通过 Facebook 或 Google 登录", "Or log in with Facebook or Google", "Upsell to use Facebook or Google for login", undefined, true)}),(0,r.jsx)(i.xu,{marginTop:4,marginBottom:12,width:"100%",children:n}),(0,r.jsx)(i.xu,{marginBottom:12,width:"100%",children:(0,r.jsx)(a.Z,{onClick:t})})]})})})}var _=o(302232);function u({email:e,loginWith:t,onClose:o,onPasswordResetSent:n}){const d=(0,l.ZP)();return(0,r.jsx)(s.Z,{heading:d.bt("哎呀！出了点问题", "Oops! Something went wrong", "Modal heading", undefined, true),onDismiss:o,size:"md",children:(0,r.jsxs)(i.xu,{paddingX:6,marginBottom:4,children:[(0,r.jsx)(i.xu,{marginBottom:6,children:"facebook"===t?(0,r.jsx)(i.xv,{children:d.bt("我们无法将你的 Facebook 帐户与任何 Pinterest 帐户相匹配。试试重置你的密码。", "We couldn’t match your Facebook account to any Pinterest account. Try resetting your password instead.", "Notice that no Pinterest account exists for the Facebook account used to attempt login", undefined, true)}):(0,r.jsx)(i.xv,{children:d.bt("我们无法将你的 Google 帐户与任何 Pinterest 帐户相匹配。试试重置你的密码。", "We couldn’t match your Google account to any Pinterest account. Try resetting your password instead.", "Notice that no Pinterest account exists for the Facebook account used to attempt login", undefined, true)})}),(0,r.jsx)(c,{inline:!0,email:e,callBack:n}),(0,r.jsx)(i.xu,{marginTop:2,children:(0,r.jsx)(a.Z,{onClick:o})})]})})}var p=o(667294),g=o(550140),m=o(837792);const x="?source=account_recovery";function y({email:e,onClose:t}){const o=(0,l.ZP)(),[n,h]=(0,p.useState)(!1);return(0,r.jsxs)(p.Fragment,{children:[(0,r.jsx)(s.Z,{heading:o.bt("已发送密码重置的邮件", "Password reset email sent", "Modal label for confirmation of password reset send", undefined, true),onDismiss:t,children:(0,r.jsxs)(i.xu,{paddingX:6,marginBottom:4,children:[(0,r.jsx)(i.xv,{overflow:"normal",children:(0,d.nk)(o.bt("我们已经发送设置新密码的操作说明至 {{ email }}。", "We sent instructions to pick a new password to {{ email }}.", "Statement that a password reset email has been sent to the user", undefined, true),{email:(0,r.jsx)(i.xv,{inline:!0,overflow:"normal",weight:"bold",children:e},"emailAddress")})}),(0,r.jsx)(i.xu,{paddingY:4,children:(0,r.jsx)(c,{inline:!0,color:"gray",email:e,callBack:()=>h(!n),overrideText:o.bt("重发邮件", "Resend email", "Button to allow the user to request a password reset email", undefined, true)})}),(0,r.jsxs)(i.xu,{children:[(0,r.jsx)(i.xu,{marginBottom:4,children:(0,r.jsx)(i.xv,{children:(0,d.nk)(o.bt("没收到邮件？尝试这些 {{ tips }}", "Didn’t get the email? Try these {{ tips }}", "Direction to help center if the password reset email failed", undefined, true),{tips:(0,r.jsx)(i.xv,{inline:!0,weight:"bold",children:(0,r.jsx)(i.rU,{display:"inlineBlock",target:"blank",href:"https://www.pinterest.com/_/_/help/articles/trouble-pinterest-emails"+x,onClick:({dangerouslyDisableOnNavigation:e})=>e(),underline:"hover",children:o.bt("帮助中心的提示", "tips from our Help Center", "Link text to go to help center", undefined, true)},"helpCenterLink")},"helpCenter")})})}),(0,r.jsx)(i.xu,{marginBottom:4,children:(0,r.jsx)(i.xv,{children:(0,d.nk)(o.bt("不是你的电子邮件地址{{ tryAgain }}", "Not your email address? {{ tryAgain }}", "Link to password reset flow for users who make an incorrect password reset request", undefined, true),{tryAgain:(0,r.jsx)(i.xv,{inline:!0,weight:"bold",children:(0,r.jsx)(i.rU,{display:"inlineBlock",href:m.lf,onClick:({dangerouslyDisableOnNavigation:e})=>e(),underline:"hover",children:o.bt("换个试试", "Try another", "Link text to enter the password reset flow for a different email address/username", undefined, true)},"passwordResetLink")},"tryAgain")})})})]}),(0,r.jsx)(i.xu,{children:(0,r.jsx)(a.Z,{color:"red",onClick:t})})]})}),n&&(0,r.jsx)(i.xu,{fit:!0,dangerouslySetInlineStyle:{__style:{bottom:"50%",left:"50%",transform:"translateX(-50%)"}},paddingX:1,position:"fixed",children:(0,r.jsx)(g.ZP,{onHide:()=>h(!n),text:o.bt("邮件已发送！", "Email sent!", " - ", undefined, true),duration:3500})})]})}const w=480;function f({email:e,onClose:t,onPasswordResetSent:o,socialButtons:n}){const d=(0,l.ZP)();return(0,r.jsx)(s.Z,{heading:d.bt("我们为你的帐户提供了保护", "We protected your account", "Modal heading for user who need to recover their accounts", undefined, true),onDismiss:t,size:w,children:(0,r.jsxs)(i.xu,{paddingX:12,marginBottom:8,children:[(0,r.jsx)(i.xu,{paddingX:4,marginBottom:4,children:(0,r.jsx)(i.xv,{align:"center",children:d.bt("出于安全考虑，我们重置了你的 Pinterest 帐户密码，并在所有设备和浏览器上退出了你的帐户。", "For security purposes we've reset your Pinterest account password and logged you out on all devices and browsers.", "softBannedAccountModal.modal.description", undefined, true)})}),(0,r.jsx)(i.xu,{paddingX:4,marginBottom:4,children:(0,r.jsx)(i.xv,{align:"center",children:d.bt("重置密码，或者使用 Facebook 或 Google 登录以重新进入你的帐户。", "Reset your password or log in with Facebook or Google to get back into your account.", "Prompt to take action to reset password or upsell login with Facebook/Google", undefined, true)})}),(0,r.jsxs)(i.xu,{paddingX:12,children:[(0,r.jsx)(i.xu,{paddingY:2,children:(0,r.jsx)(c,{inline:!0,email:e,callBack:o})}),n,(0,r.jsx)(i.xu,{marginTop:4,children:(0,r.jsx)(a.Z,{onClick:t})})]})]})})}var b=o(327875),v=o(94802),P=o(751222),k=o(315219),A=o(950861),S=o(785629);const E={[k.OW]:A.Ny.RATE_LIMITED,[k.bd]:A.Ny.RATE_LIMITED,[k.$j]:A.Ny.SOFT_BANNED,[k.an]:A.Ny.SUSPENDED,[k.RL]:A.Ny.LOGIN_ASSISTANCE,[k.yV]:A.Ny.SOFT_BANNED,[S.Ej]:A.Ny.RATE_LIMITED},C=({onLoginWithMfa:e,onLoginWithSuspended:t,onLoginWithVoluntarilyDeactivated:o,updateAccountRecoveryModal:a})=>(0,r.jsxs)(i.xu,{children:[(0,r.jsx)(v.Z,{container:"account_recovery",disablePostSignupNextUrl:!0,onLoginWithMfa:e,onLoginWithSuspended:t,showFallback:!0,socialSignupCallbacks:{type:"ACCOUNT_RECOVERY",switchToAccountRecoverySignupFlow:()=>a(A.Ny.PREVENT_FACEBOOK_REGISTER)},showLoginRateLimited:()=>a(A.Ny.RATE_LIMITED)}),(0,r.jsx)(i.xu,{marginTop:2,children:(0,r.jsx)(P.Z,{container:"account_recovery",onLoginWithMfa:e,onLoginWithSuspended:t,socialSignupCallbacks:{type:"ACCOUNT_RECOVERY",switchToAccountRecoverySignupFlow:()=>a(A.Ny.PREVENT_GOOGLE_REGISTER)},onLoginWithVoluntarilyDeactivated:e=>{a(null),null==o||o(e)},showLoginRateLimited:()=>a(A.Ny.RATE_LIMITED)})})]});function z({email:e,modalType:t,onLoginWithMfa:o,onLoginWithSuspended:i,onLoginWithVoluntarilyDeactivated:a,updateAccountRecoveryModal:s}){const n=()=>s(null),l=()=>s(A.Ny.PASSWORD_RESET_SENT),c=(0,r.jsx)(C,{onLoginWithMfa:o,onLoginWithSuspended:i,onLoginWithVoluntarilyDeactivated:a,updateAccountRecoveryModal:s});switch(t){case A.Ny.SUSPENDED:return(0,r.jsx)(b.Z,{onClose:n});case A.Ny.LOGIN_ASSISTANCE:return(0,r.jsx)(h,{email:e,onClose:n,onPasswordResetSent:l,socialButtons:c});case A.Ny.RATE_LIMITED:return(0,r.jsx)(_.Z,{onClose:n});case A.Ny.SOFT_BANNED:return(0,r.jsx)(f,{email:e,onClose:n,onPasswordResetSent:l,socialButtons:c});case A.Ny.PREVENT_FACEBOOK_REGISTER:case A.Ny.PREVENT_GOOGLE_REGISTER:return(0,r.jsx)(u,{email:e,onClose:n,onPasswordResetSent:l,loginWith:t===A.Ny.PREVENT_FACEBOOK_REGISTER?"facebook":"google"});case A.Ny.PASSWORD_RESET_SENT:return(0,r.jsx)(y,{email:e,onClose:n});default:return null}}},204213:(e,t,o)=>{o.d(t,{Z:()=>n});var i=o(883119),a=o(536042),s=o(785893);function n({color:e,onClick:t,overrideText:o}){const n=(0,a.ZP)(),l=o||n.bt("明白了", "Got it", "Acknowledge protected account modal message", undefined, true);return(0,s.jsx)(i.zx,{fullWidth:!0,accessibilityLabel:l,color:e||"gray",onClick:t,text:l})}},476366:(e,t,o)=>{o.d(t,{Z:()=>c});var i=o(667294),a=o(883119),s=o(591057),n=o(906215),l=o(455788),r=o(785893);function c({children:e,headingNode:t,heading:o,onDismiss:c,size:d}){return(0,i.useEffect)((()=>(n.Z.pause(),function(){n.Z.resume()})),[]),(0,r.jsx)(a.mh,{zIndex:s.C,children:(0,r.jsx)(l.Z,{allowEsc:!0,children:(0,r.jsx)(a.u_,{accessibilityModalLabel:o,heading:t||o,onDismiss:()=>{n.Z.resume(),c()},role:"alertdialog",size:d||"md",padding:"none",children:e})})})}},302232:(e,t,o)=>{o.d(t,{Z:()=>l});var i=o(883119),a=o(476366),s=o(536042),n=o(785893);function l({onClose:e}){const t=(0,s.ZP)();return(0,n.jsxs)(a.Z,{heading:t.bt("哎呀！登陆尝试次数过多", "Oops! Too many login attempts", "LoginRateLimitedModal.Modal.Heading", undefined, true),onDismiss:e,size:"sm",headingNode:(0,n.jsxs)(i.xu,{children:[(0,n.jsx)(i.xu,{padding:6,justifyContent:"center",display:"flex",children:(0,n.jsx)(i.JO,{icon:"pinterest",accessibilityLabel:t.bt("Pinterest 图标", "Pinterest logo", "Accessibility label for Pinterest icon", undefined, true),color:"brandPrimary",size:40})}),(0,n.jsx)(i.X6,{align:"center",size:"500",accessibilityLevel:1,children:t.bt("哎呀！登陆尝试次数过多", "Oops! Too many login attempts", "LoginRateLimitedModal.Modal.Heading", undefined, true)})]}),children:[(0,n.jsx)(i.xu,{paddingX:12,marginTop:4,marginBottom:12,children:(0,n.jsx)(i.xv,{align:"center",children:t.bt("你已达到最大登录尝试次数。请在 30 分钟后重试。", "You have reached the maximum number of login attempts. Try again in 30 minutes.", "LoginRateLimitedModal.Modal.Heading", undefined, true)})}),(0,n.jsx)(i.xu,{paddingX:12,marginBottom:8,justifyContent:"center",display:"flex",children:(0,n.jsx)(i.zx,{fullWidth:!0,color:"red",text:t.bt("确定", "Okay", "LoginRateLimitedModal.Modal.OkButton", undefined, true),onClick:e})})]})}},327875:(e,t,o)=>{o.d(t,{Z:()=>h});var i=o(667294),a=o(883119),s=o(204213),n=o(476366),l=o(406539),r=o(536042),c=o(630089),d=o(785893);function h({onClose:e}){const t=(0,r.ZP)(),o=t.bt("帐户停用的常见原因包括：", "Common reasons for account deactivation include:", " - ", undefined, true),h=t.bt("如有疑问或需要重新激活帐户，请参阅 {{ help_link }}。", "{{ help_link }} if you have questions or would like to reactivate your account.", " - ", undefined, true),_=[t.bt("违反 Pinterest 社区准则。", "Violating Pinterest Community Guidelines.", "One example reason for account deactivation", undefined, true),t.bt("我们注意到你的帐户存在异常活动。", "We noticed unusual activity on your account.", "One example reason for account deactivation", undefined, true),t.bt("你请求关闭帐户。", "You requested an account closure.", "One example reason for account deactivation", undefined, true)];return(0,d.jsx)(n.Z,{heading:t.bt("你的帐户已停用", "Your account has been deactivated", "Modal heading for user who have attempted to login with a deactivated account", undefined, true),onDismiss:e,size:"md",children:(0,d.jsxs)(a.xu,{paddingX:6,marginBottom:4,children:[(0,d.jsxs)(a.xu,{marginBottom:4,children:[(0,d.jsxs)(a.xv,{children:[" ",o," "]}),(0,d.jsx)(a.xu,{paddingY:2,children:(0,d.jsx)(i.Fragment,{children:_.map((e=>(0,d.jsx)(a.xv,{children:"• "+e},`reasons-${e}`)))})}),(0,d.jsx)(a.xv,{inline:!0,children:(0,c.nk)(h,{help_link:(0,d.jsx)(l.q,{},"suspended user help_link")})})]}),(0,d.jsx)(a.xu,{marginTop:4,children:(0,d.jsx)(s.Z,{color:"red",onClick:e,overrideText:t.bt("明白了", "Got it", "Acknowledge suspended account modal message", undefined, true)})})]})})}},406539:(e,t,o)=>{o.d(t,{q:()=>n});var i=o(883119),a=o(536042),s=o(785893);const n=()=>{const e=(0,a.ZP)();return(0,s.jsx)(i.rU,{display:"inlineBlock",href:"https://help.pinterest.com/login-request?what_do_you_need_help_with=Getting+into+my+account&tell_more_account_access=Appeal+account+suspension",onClick:({dangerouslyDisableOnNavigation:e})=>e(),underline:"hover",children:e.bt("联系我们", "Contact us", "link text shown to redirect to help.pinterest.com for appealing a suspension", undefined, true)})}},384955:(e,t,o)=>{o.d(t,{Z:()=>s});var i=o(536042),a=o(785893);function s(){const e=(0,i.ZP)();return(0,a.jsx)("p",{style:{marginBottom:"8px",marginTop:"8px",overflow:"hidden",textAlign:"center",fontSize:"14px",color:"#333",fontWeight:"bold"},children:e.bt("或", "OR", " - ", undefined, true)})}},38730:(e,t,o)=>{o.d(t,{Z:()=>s,m:()=>a});var i=o(785893);const a="\n.red.active:focus,\n.red.active:hover {\n  background-color: #d50c22 !important;\n}\n.lightGrey.active:focus,\n.lightGrey.active:hover {\n  background-color: #f5f3f3 !important;\n}\n.SignupButton:focus {\n  box-shadow: 0 0 0 4px rgba(0, 132, 255, 0.5);\n  outline: 0;\n}\n";function s({accessibilityLabel:e,children:t,className:o,dataTestId:a,disabled:s,href:n,id:l,noButtonStyles:r,onClick:c,styleOverrides:d,tabIndex:h,type:_}){const u=(o?o.split(" "):[]).concat(s?[]:["active"]);let p=r?{background:"none",border:"none",padding:"0",textAlign:"left",display:"block"}:{border:"0px",height:"40px",display:"inline-block",borderRadius:"4px",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",padding:"0 18px",fontSize:"15px",fontWeight:"bold",cursor:"pointer",marginTop:"10px",verticalAlign:"middle",textAlign:"center",...s&&{backgroundColor:"#efefef",color:"#767676"}||u.includes("red")&&{backgroundColor:"#e60023",color:"#fff"}||u.includes("lightGrey")&&{backgroundColor:"#ebebeb",color:"#444"}};return p={...p,...d},s&&(p={...p,cursor:"not-allowed"}),(0,i.jsx)("button",{"aria-label":e||"",className:u.join(" "),"data-test-id":a,disabled:s,href:n,id:l,onClick:c,...h?{tabIndex:h}:{},style:p,type:_||"button",children:t})}},94802:(e,t,o)=>{o.d(t,{Z:()=>I});var i=o(667294),a=o(883119),s=o(308979),n=o(243600),l=o(38730),r=o(891643),c=o(45818),d=o(125715);const h=({onError:e,onEventReceived:t,onSuccess:i,rerequestFacebookEmail:a,viewer:s})=>{let n=null;const l=o=>{const a=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");if(o.origin!==a)return;if("social-connect-complete"!==o.data.type&&"social-connect-error"!==o.data.type)return;const s=o.data;"facebook"===s.network&&(t(),clearInterval(n),"social-connect-error"===s.type?e("OTHER_ERROR"):i({type:"PROFILE",profile:s.profile}))};if(window.addEventListener("message",l),a)o.e(51798).then(o.bind(o,49387)).then((({default:t})=>{t((t=>{t.login((t=>{var o;"connected"===t.status&&((null===(o=t.authResponse.grantedScopes)||void 0===o?void 0:o.split(","))||[]).includes("email")?i({type:"ACCESS_TOKEN",id:t.authResponse.userID,access_token:t.authResponse.accessToken}):e("OTHER_ERROR")}),{scope:"email",auth_type:"rerequest",return_scopes:!0})}),s)}));else{const t=(0,d.Z)(),o=window.open("/connect/facebook/","",t);o?n=setInterval((()=>{o.closed&&(clearInterval(n),e("OTHER_ERROR"))}),1e3):e("POPUP_DISABLED")}return{unsubscribe:()=>{window.removeEventListener("message",l)}}};var _=o(261551),u=o(785893);function p({anchor:e,message:t,children:o}){const[s,n]=(0,i.useState)(!!t);return(0,i.useEffect)((()=>{n(!!t)}),[t]),s&&t?(0,u.jsx)(a.J2,{anchor:e,color:"darkGray",idealDirection:"right",onDismiss:()=>n(!0),shouldFocus:!1,size:"md",children:(0,u.jsx)(a.xu,{column:12,padding:3,children:o?(0,u.jsx)("span",{children:o}):(0,u.jsx)("span",{dangerouslySetInnerHTML:{__html:t},style:{overflowWrap:"break-word",wordWrap:"break-word",color:"white",fontWeight:"bold"}})})}):null}var g=o(152448),m=o(321443),x=o(759495),y=o(95983),w=o(391670),f=o(536042),b=o(752977),v=o(315219),P=o(450667),k=o(140523),A=o(710197),S=o(950861),E=o(804484),C=o(822123),z=o(245410),j=o(282802),T=o(98736),L=o(802071);function R(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class M extends i.Component{constructor(...e){var t;super(...e),t=this,R(this,"state",{showModal:!1}),R(this,"unsubscribeThisButton",null),R(this,"loginWithFacebook",(({facebookConnectData:e,isFromStatusChange:t,isAccountSwitch:o,handlePostSuccessConnect:i,loadingIndicatorCallback:a})=>{const{checkExperiment:s,container:n,desktopCoreLoginContext:{getDeviceAppTypeString:l},i18n:r,login:d,onLoginWithMfa:h,onLoginWithSuspended:_,pageContext:u,showResponseMessageModal:p,showLoginRateLimited:g,socialSignupCallbacks:x}=this.props,y={container:n,page:null==u?void 0:u.pageType},w="PROFILE"===(f=e).type?{facebook_id:f.profile.id}:{facebook_id:f.id,facebook_token:f.access_token};var f;d({creds:w,loggingOptions:{loggingData:y,loginAttemptContextEvent:this.signupLoginContextEvent(7534)},isAccountSwitch:o}).then((e=>{var t,a;const r=null==e||null===(t=e.resource_response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.user;o&&r&&(0,b.Z)(r,"facebook",n),(0,T.My)("login.facebook."+l()),p?p(!0):S.ZP.handleRedirect(this.props.nextUrlParam||S.ZP.defaultSocialLoginRedirectUrl()),null==i||i(),s("m10n_measurement_pinterest_tag_us").anyEnabled&&(0,m.Z)()}),(o=>{var i;o.api_error_code===v.Zn?(null==a||a(!1),(0,T.My)("login.facebook."+l()),null==h||h(w,{phoneNumberEnd:null===(i=o.data)||void 0===i?void 0:i.phone_number_end})):o.api_error_code===v.xN||o.api_error_code===v.lg?"ACCOUNT_RECOVERY"===x.type?x.switchToAccountRecoverySignupFlow("facebook"):this.registerWithFacebook({facebookConnectData:e,loggingData:y,isFromStatusChange:t,switchToSocialSignupWithAgeFlow:x.switchToSocialSignupWithAgeFlow}):[v.ik].includes(o.api_error_code)?null==g||g():(o.api_error_code&&(0,T.My)(`facebook_button.failed_login_${o.api_error_code}`),o.api_error_code===v.an&&_?_():(0,c.x)(r.bt("对不起，你无法登录。", "Sorry, we can't log you in.", "error message when user failed to login caused by suspend/deactivated etc.", undefined, true)))}))})),R(this,"statusChangeCallback",(e=>{var t,o;null===(t=(o=this.props).onClick)||void 0===t||t.call(o);const{connectErrorMessage:i,handlePostSuccessConnect:a,isAccountSwitch:s,loadingIndicatorCallback:n}=this.props;let l;if((0,T.EX)({event:"start",provider:"facebook"}),"connected"===e.status){const{authResponse:t}=e;(0,T.My)("web.facebook_connect_button.login_status.connected"),null==n||n(!0),this.loginWithFacebook({facebookConnectData:{type:"ACCESS_TOKEN",id:t.userID,access_token:t.accessToken},isFromStatusChange:!0,isAccountSwitch:s,handlePostSuccessConnect:a,loadingIndicatorCallback:n}),l="success"}else"not_authorized"===e.status?((0,T.My)("web.facebook_connect_button.cancel.not_authorized"),(0,c.x)(i),l="not_authorized"):((0,T.My)("web.facebook_connect_button.cancel.unknown"),(0,c.x)(i),l="other_error");const{handlePostConnectClick:r}=this.props;null==r||r(l)})),R(this,"showDefaultError",(()=>{const{i18n:e,loadingIndicatorCallback:t}=this.props;null==t||t(!1),(0,c.x)(e.bt("需要电子邮件地址进行注册。", "Email required for registration.", " - ", undefined, true))})),R(this,"registerWithFacebook",(async function({facebookConnectData:e,loggingData:o,isFromStatusChange:i,switchToSocialSignupWithAgeFlow:a}){(0,T.Rp)({event:"start",provider:"facebook"});const{checkExperiment:n,desktopCoreLoginContext:{register:l},disablePostSignupNextUrl:r,loadingIndicatorCallback:c,nextUrlParam:d,onFBMissingEmail:h,onFBPhoneOnlyConnectVerified:u,showResponseMessageModal:p,showSignupWelcomeLoadingFn:g}=t.props,m=()=>{t.showDefaultError(),i||(t.rerequestFacebookEmail=!0)};let x=null;if("PROFILE"===e.type)x={...e.profile};else try{x=await(0,P.MI)(e.access_token,n("web_unauth_identity_meta_birthdate_removal").anyEnabled)}catch(v){m()}if(!x)return;const y=(0,_.Z)(x),w={type:"facebook",context:o,signupOptions:y};if(!x.email)return void(u?(i||null==c||c(!1),u(w)):i&&h?h(w):m());const f={birthday_source_site:E.E_.FACEBOOK,email_source_site:E.E_.FACEBOOK};if(!i)return void a(w);const{birthday:b}=y;if(void 0===b||!(0,s.Z)(b))return null==c||c(!1),void a({...w,signupOptions:{...w.signupOptions,email_source_site:E.E_.FACEBOOK}});p||null==g||g(!0),(0,T.Rp)({event:"signup_api_call_start",provider:"facebook"});try{await l({...y,...f,birthday:b},{signupContext:o,signupAttemptContextEvent:t.signupLoginContextEvent(7537)}),(0,T.Rp)({event:"signup_api_call_success",provider:"facebook"})}catch(v){(0,T.Rp)({event:"signup_api_call_failure",provider:"facebook"}),m()}p?p(!0):S.ZP.handleSignupRedirect(i?d:d||window.location.pathname,r)}))}componentDidMount(){if(this.props.webFacebookDisabled)return;"undefined"!=typeof window&&(window.statusChangeCallback=this.statusChangeCallback,window.checkLoginState=()=>this.checkLoginState(),window.fbConnectButtonContainerStack?window.fbConnectButtonContainerStack.push(this.props.container):window.fbConnectButtonContainerStack=[this.props.container],window.nextUrlParam=this.props.nextUrlParam,window.fbButtonMounted=window.fbButtonMounted?window.fbButtonMounted+1:1);const{requestContext:{userAgent:{platform:e}}}=this.props;if(["ios","ipad"].includes(e))if(window.fb_init!==k.Z.STARTED&&window.fb_init!==k.Z.FINISHED)this.initializeFB();else if(window.fb_init===k.Z.FINISHED&&window.FB.XFBML)window.FB.XFBML.parse();else{const e=setInterval((()=>{window.fb_init===k.Z.FINISHED&&window.FB.XFBML&&(window.FB.XFBML.parse(),clearInterval(e))}),100)}else setTimeout((()=>{window.__branchRedirectToStore||!window.__branchPinterestStarted?this.initializeFB():window.onbeforeunload=()=>{window.__branchRedirectToStore&&this.initializeFB()}}),50);var t,o,i,a;this.props.isRerequest&&(null===(t=(o=this.props).loadingIndicatorCallback)||void 0===t||t.call(o,!1),null===(i=(a=this.props).showSignupWelcomeLoadingFn)||void 0===i||i.call(a,!1))}componentDidUpdate(){window.nextUrlParam=this.props.nextUrlParam}componentWillUnmount(){if("undefined"!=typeof window){if(window.fbButtonMounted-=1,window.fbConnectButtonContainerStack){const e=window.fbConnectButtonContainerStack.indexOf(this.props.container);e>=0&&window.fbConnectButtonContainerStack.splice(e,1)}0===window.fbButtonMounted&&(delete window.statusChangeCallback,delete window.checkLoginState,delete window.nextUrlParam)}}initializeFB(){const{requestContext:{locale:e}}=this.props;null!==this.profilePicButton&&(void 0!==window.FB&&null!==window.FB?window.FB.XFBML.parse():(window.fbAsyncInit=()=>(0,P.sl)(),((t,o,i)=>{const a=t.getElementsByTagName(o)[0];if(t.getElementById(i))return;const s=t.createElement(o);s.id=i,s.src=(0,A.Z)(e),a&&a.parentNode&&a.parentNode.insertBefore(s,a)})(document,"script","facebook-jssdk")))}checkLoginState(){window.FB.getLoginStatus((function(e){this.statusChangeCallback&&this.statusChangeCallback(e)}))}signupLoginContextEvent(e){const{desktopCoreLoginContext:{viewer:t}}=this.props;return{event_type:e,aux_data:{...(0,y.Z)(t.type),signup_login_method:C.Z.FACEBOOK}}}renderProfilePicButtonWithFallback(){const{i18n:e,isRerequest:t,showFallback:o,checkExperiment:i}=this.props;return(0,u.jsxs)(a.xu,{"data-test-id":"facebook-connect-button",ref:e=>{this._fallbackButton=e},children:[(0,u.jsx)(l.Z,{onClick:()=>{var e;const{connectErrorMessage:t,desktopCoreLoginContext:{getDeviceAppTypeString:o},i18n:i,webFacebookDisabled:a,viewer:s}=this.props;if(a)return void this.setState({showModal:!0});(0,T.My)("fallback_facebook_button.click"),(0,T.NC)("press_facebook_login_fallback"),(0,T.My)("unauth_web.facebook_connect.manual.attempt"),(0,T.My)(`unauth_web.social_connect.facebook.${o()}`),(0,T.EX)({event:"start",provider:"facebook"}),null===(e=this.unsubscribeThisButton)||void 0===e||e.call(this);const{unsubscribe:n}=h({onSuccess:e=>{(0,T.My)("unauth_web.facebook_connect.manual.success"),this.loginWithFacebook({facebookConnectData:e,isFromStatusChange:!1})},onError:e=>{(0,T.My)("unauth_web.facebook_connect.manual.failure"),(0,c.x)("POPUP_DISABLED"===e?i.bt("你必须启用弹出窗口！", "You must enable popups!", " - ", undefined, true):t)},onEventReceived:()=>{var e;null===(e=this.unsubscribeThisButton)||void 0===e||e.call(this)},rerequestFacebookEmail:this.rerequestFacebookEmail,viewer:s});this.unsubscribeThisButton=()=>{n(),this.unsubscribeThisButton=null}},styleOverrides:{backgroundClip:"padding-box",backgroundColor:"#1877F2",display:"block",fontWeight:"normal",height:"40px",marginTop:"0px",padding:"0px 0px 0px 8px",position:o?"relative":"absolute",textAlign:"left",transition:"opacity .2s linear",width:"100%",borderRadius:"20px"},tabIndex:-1,children:(0,u.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",children:[(0,u.jsx)(a.xu,{color:"default",rounding:"circle",marginStart:1,dangerouslySetInlineStyle:{__style:{paddingTop:4,paddingBottom:3,paddingRight:3,paddingLeft:3}},height:24,width:24,children:(0,u.jsx)(a.JO,{accessibilityLabel:e.bt("Facebook", "facebook", "accessible label for facebook icon", undefined, true),color:"shopping",icon:"facebook",inline:!0,size:19})}),(0,u.jsx)("span",{style:{color:"#fff",display:"inline-block",fontFamily:n.Z,fontSize:"16px",fontWeight:"bold",letterSpacing:"0.1px",lineHeight:"15px",marginRight:"24px",marginLeft:"15px",paddingTop:"4px",textAlign:"center",verticalAlign:"text-bottom",WebkitFontSmoothing:"auto",whiteSpace:"normal",width:"88%"},children:e.bt("使用 Facebook 帐户登录", "Continue with Facebook", " - ", undefined, true)})]})}),!o&&(0,u.jsx)(a.xu,{height:40,dangerouslySetInlineStyle:{__style:{textAlign:"left"}},ref:e=>{this.profilePicButton=e},children:(0,u.jsx)("div",{className:"fb-login-button","data-auth-type":t?"rerequest":void 0,"data-button-type":"continue_with","data-layout":"rounded","data-onlogin":"checkLoginState","data-scope":(0,P._V)(i("web_unauth_identity_meta_birthdate_removal").anyEnabled).join(","),"data-size":"large","data-use-continue-as":"true","data-width":"268px"})})]})}render(){const{tooltip:e}=this.props;return(0,u.jsxs)("div",{style:{position:"relative"},children:[this.renderProfilePicButtonWithFallback(),!!e&&(0,u.jsx)(p,{anchor:this._fallbackButton,message:e}),this.state.showModal&&(0,u.jsx)(g.Z,{type:"facebook",onDismiss:()=>this.setState({showModal:!1})})]})}}function I(e){const t=(0,f.ZP)(),o=(0,j.B)(),i=(0,r.B$)(),a=(0,w.lO)(),{checkExperiment:s}=(0,z.F)(),{anyEnabled:n}=s("web_facebook_disabled"),l=(0,L.Z)();return(0,u.jsx)(M,{...e,connectErrorMessage:t.bt("无法连接。你必须授权 Pinterest。", "Couldn't connect. You must authorize Pinterest.", " - ", undefined, true),desktopCoreLoginContext:i,i18n:t,login:(0,x.Z)(),requestContext:o,pageContext:a,webFacebookDisabled:n,viewer:l,checkExperiment:s})}},912127:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ht});var i=o(667294),a=o(616550),s=o(883119),n=o(965533),l=o(563962),r=o(938547),c=o.n(r),d=o(682126),h=o(457628),_=o(791045),u=o(560544),p=o(891643),g=o(38730),m=o(785893);const x=({margin:e,wideLight:t})=>(0,m.jsx)("div",{style:{borderBottom:(t?"#efefef":"#dedede")+" 1px solid",margin:null!=e?e:"10px auto",width:t?404:110}});var y=o(95983),w=o(536042),f=o(282802),b=o(837792),v=o(98736),P=o(618569),k=o(3060);function A({type:e}){const{viewer:t}=(0,p.B$)(),o=(0,w.ZP)(),i=(0,l.Z)(),a=`${k.C0}${b.Hm}`;return(0,m.jsxs)(s.xu,{display:"flex",alignItems:"center",justifyContent:"center",fit:!0,marginTop:2,marginEnd:"auto",marginBottom:1,marginStart:"auto",children:[(0,m.jsx)(s.xv,{size:"100",weight:"normal",children:o.bt("是企业用户吗？", "Are you a business?", "Prompt for business signup", undefined, true)}),(0,m.jsx)(s.xu,{"data-test-id":"business-start",marginStart:1,children:(0,m.jsx)(s.rU,{href:a,underline:"none",target:"blank",onClick:()=>{(0,v.My)("unauth.business_link.click"),i({event_type:101,component:"signupToLogin"===e?13096:13867,element:10281,aux_data:(0,y.Z)(t.type)})},children:(0,m.jsx)(s.xv,{size:"100",weight:"bold",children:o.bt("从这里开始！", "Get started here!", "Prompt for signing up", undefined, true)})})})]})}const S=({children:e,layout:t})=>{const{isRTL:o}=(0,f.B)();switch(t){case"SIGNUP_LARGE":return(0,m.jsx)(s.xu,{children:(0,m.jsx)(s.xu,{marginTop:4,children:e})});case"SIGNUP_SMALL":return(0,m.jsx)(s.xu,{marginTop:3,children:e});case"SIGNUP_WITH_AGE":return(0,m.jsx)(s.xu,{margin:-4,children:(0,m.jsx)(s.xu,{padding:3,"data-test-id":"login-button",children:e})});case"LOGIN_INLINE":return(0,m.jsxs)(s.xu,{children:[(0,m.jsx)(x,{}),(0,m.jsx)(s.xu,{display:"inlineBlock",marginEnd:1,children:e})]});case"LOGIN_SMALL":return(0,m.jsxs)(s.xu,{children:[(0,m.jsx)(x,{}),e]});case"SIGNUP_DEFAULT":case"LOGIN_DEFAULT":return(0,m.jsxs)(s.xu,{children:[(0,m.jsx)(x,{margin:"SIGNUP_DEFAULT"===t?o?"20px -68px 15px 0px":"20px 0px 15px -68px":o?"20px 30px 15px -10px":"20px -10px 15px -68px",wideLight:!0}),(0,m.jsx)(s.xu,{children:e})]});default:return e}};function E({layout:e,onClick:t,shouldHideBusinessCreateFooterLink:o,type:i}){const a=(0,w.ZP)(),n=(0,P.Z)();return(0,m.jsxs)(S,{layout:e,children:[(0,m.jsx)(s.xu,{display:"flex",fit:!0,marginEnd:"auto",marginBottom:1,alignItems:"center",justifyContent:"center",children:(0,m.jsxs)(s.kC,{alignItems:"stretch",justifyContent:"center",children:[(0,m.jsx)(s.xv,{size:"100",children:a.bt("已经有帐户？", "Already a member?", "modernized.nux.footer.text", undefined, true)}),(0,m.jsx)(g.Z,{noButtonStyles:!0,onClick:e=>{n({action:"click",item:"email-signup-button"}),t(e)},styleOverrides:{color:"#333",marginLeft:"5px",fontWeight:"bold"},type:"button",dataTestId:"login-signup-toggle",children:"signupToLogin"===i&&a.bt("登录", "Log in", "modernize.nux.switch.to.login.modal", undefined, true)||a.bt("还不是 Pinterest 用户？立即注册", "Not on Pinterest yet? Sign up", "nux.unauth.user.sign.up.message", undefined, true)})]})}),!o&&(0,m.jsx)(A,{type:i})]})}var C=o(435983),z=o(654194),j=o(315219),T=o(950861),L=o(804484),R=o(822123),M=o(61833),I=o(813586);const Z=({disablePostSignupNextUrl:e,handleLoginToggleButtonClick:t,loadingIndicatorCallback:o,nextUrlParam:a,registrationCredentials:n,showResponseMessageModal:l})=>{const r=(0,w.ZP)(),{register:g,viewer:x}=(0,p.B$)(),{refreshToken:f}=(0,M.D)(),[b,P]=(0,i.useState)(!1),[k,A]=(0,i.useState)(!0),[S,Z]=(0,i.useState)(!1),[B,O]=(0,i.useState)(""),[F,N]=(0,i.useState)(void 0);let W="other";switch(null==n?void 0:n.type){case"google":W="google";break;case"facebook":W="facebook";break;case"line":W="line"}(0,i.useEffect)((()=>{"1"===h.U2(_.It)&&(Z(!0),O(r.bt("抱歉，你目前不符合注册 Pinterest 的资格。", "Sorry, you’re not eligible to sign up for Pinterest right now.", "signup.birthdaycollection.ineligible.msg", undefined, true)))}),[r,O]),(0,i.useEffect)((()=>{(0,v.My)("dweb.signup_age_step",{type:null==n?void 0:n.type,format:"birthday"})}),[null==n?void 0:n.type]);const D=async()=>{if(!n||!F)return void o(!1);const t={...n.signupOptions,birthday:(0,u.Z)(F),birthday_source_site:L.E_.PINTEREST};try{const o={facebook:R.Z.FACEBOOK,google:R.Z.GPLUS,google_one_tap:R.Z.GOOGLE_ONE_TAP,line:R.Z.LINE,socialSignupWithAge:void 0}[n.type];let i;"google"===n.type?i=12981:"google_one_tap"===n.type&&(i=12982),(0,v.Rp)({event:"signup_api_call_start",provider:W}),await g(t,{signupContext:void 0,signupAttemptContextEvent:{event_type:7537,element:i,aux_data:{...(0,y.Z)(x.type),...o?{signup_login_method:o}:Object.freeze({})}}}),(0,v.My)("dweb.birthdaycollection.signup_success"),(0,v.Rp)({event:"signup_api_call_success",provider:W}),l?l(!0):T.ZP.handleSignupRedirect(a,e)}catch(i){switch((0,v.Rp)({event:"signup_api_call_failure",provider:W}),f&&f(),i.api_error_code){case j.tz:(0,v.My)("dweb.birthdaycollection.signup_error.underage"),h.t8(_.It,"1",(0,h.kZ)(_.It)),P(!0);break;case j.NF:(0,v.My)("dweb.birthdaycollection.signup_error.eu_missing_age"),O(i.message||r.bt("为提供此项服务，我们需要知道你的年龄。", "We need to know your age to provide you this service.", "signup.birthdaycollection.error.missingAge", undefined, true));break;case j.tL:(0,v.My)("dweb.birthdaycollection.signup_error.overage"),O(i.message||r.bt("哎呀！请使用有效的年龄注册。", "Oops! Please use a valid age to sign up.", "signup.birthdaycollection.error.overage", undefined, true));break;case j.iZ:(0,v.My)("dweb.birthdaycollection.signup_error.invalid_email"),O(r.bt("你的电子邮件无效。", "Your email is invalid.", "signup.birthdaycollection.error.invalidEmail", undefined, true));break;case j.Jt:(0,v.My)("dweb.birthdaycollection.signup_error.email_contain_pinterest"),O(r.bt("请继续使用你的名字或者你品牌的名字", "Please stick to your name, or the name of your brand", "signup.birthdaycollection.error.emailContainsPinterest", undefined, true));break;default:(0,v.My)("dweb.birthdaycollection.signup_error.other"),O(r.bt("抱歉！我们这边出了点问题。", "Sorry! Something went wrong on our end.", "signup.birthdaycollection.error.other", undefined, true))}}};return b?(0,m.jsx)(z.Z,{birthday:F,onEditBirthday:()=>P(!1)}):(0,m.jsx)(s.xu,{paddingX:5,paddingY:5,children:(0,m.jsx)(s.xu,{paddingX:12,children:(0,m.jsxs)(s.kC,{direction:"column",justifyContent:"center",alignItems:"center",children:[(0,m.jsx)(s.xu,{width:48,height:48,marginTop:5,marginBottom:1,children:(0,m.jsx)(s.Ee,{alt:r.bt("生日图片", "Birthday Image", "signup.birthdaycollection.image.alt", undefined, true),src:c(),naturalHeight:48,naturalWidth:48})}),(0,m.jsx)(s.xu,{marginBottom:2,children:(0,m.jsx)(s.X6,{align:"center",size:"600",children:r.bt("输入你的出生日期", "Enter your birthdate", "signup.birthdaycollection.title", undefined, true)})}),(0,m.jsxs)(s.xu,{width:310,marginBottom:4,children:[(0,m.jsx)(s.xu,{marginBottom:4,children:(0,m.jsx)(s.xv,{align:"center",children:r.bt("我们收集此信息有助于为社区中的年轻人提供更好的体验。我们还会使用你的出生日期来帮助个性化推荐内容和广告。", "We collect this info to help provide a better experience for the younger people in our community. We’ll also use your birthdate to help personalize your recommendations and ads.", "signup.birthdaycollection.subheader1", undefined, true)})}),(0,m.jsx)(s.xv,{align:"center",children:r.bt("此信息不会公开显示。", "It will not be displayed publicly.", "signup.birthdaycollection.subheader2", undefined, true)})]}),(0,m.jsx)(s.xu,{width:280,marginBottom:4,children:(0,m.jsx)(s.nv,{autoComplete:"bday",disabled:S,errorMessage:B,id:"birthday",onChange:({value:e})=>{O(""),A(!e),N(e)},size:"lg",type:"date",value:F||""})}),(0,m.jsx)(s.xu,{marginBottom:10,children:(0,m.jsx)(s.xv,{color:"subtle",children:(0,z.b)(r)})}),(0,m.jsx)(s.xu,{width:280,marginBottom:3,children:(0,m.jsx)(s.zx,{color:"red",disabled:k,fullWidth:!0,onClick:()=>{(0,v.Rp)({event:"submit_birthday",provider:W}),!F||(0,d.Cd)(F,I.kx)?D():O((0,d.Uy)(r))},text:r.bt("创建帐户", "Create account", "signup.birthdaycollection.submit_label", undefined, true)})}),(0,m.jsx)(s.xu,{marginTop:2,marginBottom:9,width:340,children:(0,m.jsx)(C.Z,{dark:!0})}),(0,m.jsx)(s.xu,{marginBottom:2,children:(0,m.jsx)(E,{layout:"SIGNUP_LARGE",onClick:()=>t(),type:"signupToLogin"})})]})})})};var B=o(788241),O=o(406018),F=o(228742),N=o(384955),W=o(45818),D=o(94802),V=o(751222),U=o(507057),G=o(759495),H=o(391670),Y=o(949433),$=o(604094),q=o(970588),X=o(550140),K=o(991937),J=o(18759),Q=o(245410),ee=o(785629),te=o(643183),oe=o(63262),ie=o(565479),ae=o(966633),se=o(392881);function ne(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const le=(0,i.lazy)((()=>o.e(92798).then(o.bind(o,892798)))),re="emailpwdstep";class ce extends i.Component{constructor(e){var t;super(e),t=this,ne(this,"onLoginWithSuspended",(()=>{const{loadingIndicatorCallback:e}=this.props;e(!1),this.setState({accountRecoveryModalType:F.w[j.an]})})),ne(this,"onLoginWithVoluntarilyDeactivated",(e=>this.setState({googleValidationError:e}))),ne(this,"setLoadingState",(e=>{const{loadingIndicatorCallback:t,showSignupWelcomeLoadingFn:o}=this.props;return o&&!1===e&&o(!1),t(e)})),ne(this,"handleEmailChange",(e=>{this.props.setEmail(e.target.value),this.setState({hideFBGoogleToolTip:!0})})),ne(this,"handlePasswordChange",(e=>{this.state.passwordValidationError&&this.setState({passwordValidationError:null}),this.props.setPassword(e.target.value)})),ne(this,"handleAgeChange",(e=>{this.state.birthdayValidationError&&this.setState({birthdayValidationError:null}),this.props.onAgeChange&&this.props.onAgeChange(e)})),ne(this,"handleEmailSignUp",(()=>{var e;(0,v.My)("unauth_email_validation_attempt"),this.props.trackInteraction({action:"click",item:"email-signup-button"});let t=(0,ae.Z)(null!==(e=this.props.email)&&void 0!==e?e:"",this.emailValidators);if(t)this.setState({emailValidationError:t}),(0,v.My)(`unauth.login.error.CLIENT_ERROR.malformemail.${re}`);else{var o,i;const e=(0,ae.Z)(null!==(o=this.props.password)&&void 0!==o?o:"",this.asciiValidators);e&&(this.setState({passwordValidationError:e}),(0,v.My)(`unauth.login.error.CLIENT_ERROR.nonasciipwd.${re}`)),t=(0,ae.Z)(null!==(i=this.props.password)&&void 0!==i?i:"",this.loginPasswordValidators),t?(this.setState({passwordValidationError:t}),(0,v.My)(`unauth.login.error.CLIENT_ERROR.malformpwd.${re}`)):(this.setState({passwordValidationError:null}),this.validateEmailAvailable()),this.setState({emailValidationError:null}),this.props.setNameFromEmail()}})),ne(this,"register",(({birthday:e})=>{const{birthdayCollectionRequired:t,container:o,email:i,name:a,pageContext:s,password:n,onBirthdayUnderage:l,requestContext:r,signupSource:c,register:d,i18n:u}=this.props,p={type:"email",birthday:e,email:i,password:n,country:r.country,first_name:a,last_name:"",recaptchaV3Token:this.props.recaptchaV3Token||"default"},g={container:o,page:null==s?void 0:s.pageType,signupSource:c};(0,v.My)("one_step_age_signup_complete"),(0,v.Rp)({event:"signup_api_call_start",provider:"email"}),d(p,{signupContext:g,signupAttemptContextEvent:this.signupLoginContextEvent(7537)}).then((()=>{const{showResponseMessageModal:e}=this.props;(0,v.My)("unauth.signup_one_step.completed"),(0,v.Rp)({event:"signup_api_call_success",provider:"email"}),e?e(!0):T.ZP.handleSignupRedirect(this.props.nextUrlParam,this.props.disablePostSignupNextUrl)}),(e=>{switch(this.setLoadingState(!1),(0,v.Rp)({event:"signup_api_call_failure",provider:"email"}),this.props.refreshRecaptchaV3Token&&this.props.refreshRecaptchaV3Token(),e.api_error_code){case j.tz:h.t8(_.It,"1"),l&&t?l({birthday:this.props.birthday,email:i}):this.showUnderAgeError(e.message);break;case j.NF:this.setState({birthdayValidationError:e.message||u.bt("为提供此项服务，我们需要知道你的年龄。", "We need to know your age to provide you this service.", "userRegistration.missingAgeError", undefined, true)});break;case j.tL:this.setState({birthdayValidationError:e.message||u.bt("哎呀！请使用有效的年龄注册。", "Oops! Please use a valid age to sign up.", "userRegistration.overageError", undefined, true)});break;case j.iZ:(0,v.My)("unauth_show_invalid_email_inline_error"),this.setState({emailValidationError:u.bt("你的电子邮件无效。", "Your email is invalid.", " - ", undefined, true)});break;case j.Jt:(0,v.My)("unauth_show_invalid_email_contains_pinterest"),this.setState({emailValidationError:u.bt("请继续使用你的名字或者你品牌的名字", "Please stick to your name, or the name of your brand", " - ", undefined, true)});break;default:(0,W.x)(u.bt("抱歉！我们这边出了点问题。", "Sorry! Something went wrong on our end.", " - ", undefined, true))}}))})),ne(this,"checkEmailExistsWithCompletion",(({email:e,handleEmailExists:t,handleEmailNotExist:o,handleError:i})=>{const{i18n:a}=this.props;(0,q.Z)({url:"/v3/register/exists/",data:{email:e}}).then((e=>{var i;this.setState({emailValidationError:null}),!1===(null===(i=e.resource_response)||void 0===i?void 0:i.data)?o():t()}),(e=>{let t=a.bt("呃...这看起来不像一个电子邮件地址", "Hmm...that doesn't look like an email address", " - ", undefined, true);if(e.api_error_code===j.bd)t=e.message;else{(0,ae.Z)(this.props.email,this.asciiValidators)&&(0,v.My)(`unauth.login.error.CLIENT_ERROR.nonasciiemail.${re}`)}this.setState({emailValidationError:t}),null==i||i()}))})),ne(this,"checkEmailValidation",(async function(e){const{i18n:o,showToast:i}=t.props;if((0,Y.Z)(e)||(0,Y.z)(e,"yahoo")||(0,Y.z)(e,"hotmail"))t.setState({emailValidationError:o.bt("抱歉，这似乎不是有效的邮箱地址", "Sorry, this doesn't look like a valid email", "register.email.error.message", undefined, true)});else try{const i=await(0,q.Z)({url:"/v3/email/validation/",data:{email:e}}),{data:a}=i.resource_response||{};a&&a.is_valid?t.setState({emailValidationError:null}):t.setState({emailValidationError:o.bt("抱歉，这似乎不是有效的邮箱地址", "Sorry, this doesn't look like a valid email", "register.email.error.message", undefined, true)})}catch(a){null!=a&&a.message?i((({hideToast:e})=>(0,m.jsx)(X.ZP,{duration:3e3,type:"error",text:a.message,onHide:e}))):(0,v.My)(`unauth.login.error.${re}.ERROR${a.api_error_code}`)}})),ne(this,"updateAccountRecoveryModal",(e=>this.setState({accountRecoveryModalType:e}))),ne(this,"renderSignupForm",(()=>{const{age:e,birthday:t,birthdayCollectionRequired:o,email:i,i18n:a,onBirthdayChange:n,password:l,suppressFocus:r,logContextEvent:c,viewType:u,viewParameter:p,component:g,attributionLabel:x}=this.props,{birthdayValidationError:y}=this.state,w=(0,d.Uy)(a);return this.state.showRegisterForm?(0,m.jsx)(U.Z,{buttonText:a.bt("继续", "Continue", "Continue button on web", undefined, true),buttonTextLabel:a.bt("继续创建你的 Pinterest 帐户", "Continue creating your Pinterest account", "Accessiblity button text to continue creating an account", undefined, true),email:i,emailFieldHasError:this.state.emailFieldHasError,emailLabel:a.bt("用电子邮件继续", "Continue with email", "Sign up button", undefined, true),emailText:a.bt("电子邮件", "Email", "Text on button asking for email", undefined, true),emailValidationError:this.state.emailValidationError,signupForm:{ageOrBirthday:o?{type:"birthday",props:{birthday:t,birthdayValidationError:y,setBirthdayValidationError:e=>this.setState({birthdayValidationError:e}),onBirthdayChange:n}}:{type:"age",props:{age:e,ageValidationError:y,onAgeChange:this.handleAgeChange,onAgeError:e=>this.setState({birthdayValidationError:e})}},checkEmailExistsWithCompletion:this.checkEmailExistsWithCompletion,checkEmailValidation:this.checkEmailValidation,registerRestricted:"1"===h.U2(_.It)},onButtonClick:()=>{if(o){if("1"===h.U2(_.It))return void this.showUnderAgeError();if(t&&!(0,d.Cd)(t,I.kx))return void this.setState({birthdayValidationError:w})}this.setState({facebookValidationError:null,googleValidationError:null,hideFBGoogleToolTip:!1}),this.handleEmailSignUp()},onEmailChange:this.handleEmailChange,onPasswordChange:this.handlePasswordChange,password:null!=l?l:"",passwordText:a.bt("创建密码", "Create a password", "Text asking the user to create a password while registering", undefined, true),passwordValidationError:this.state.passwordValidationError,suppressFocus:r,component:g,viewType:u,viewParameter:p}):(0,m.jsx)(s.xu,{"data-test-id":"emailSignUpButton",children:(0,m.jsx)(s.zx,{fullWidth:!0,text:a.bt("用电子邮件继续", "Continue with email", "Text on the sign up button for signing up with email", undefined, true),color:"red",onClick:()=>{c({view_type:u,view_parameter:p,component:g,element:13506,event_type:10441,aux_data:{upsell_reason:x}}),(0,v.NC)("signup_email_button"),this.props.trackInteraction({action:"click",item:"email-signup-button",within:"bottom-right-upsell"}),this.setState({showRegisterForm:!0})}})})})),ne(this,"showUnderAgeError",(e=>{const{i18n:t}=this.props;this.setState({birthdayValidationError:e||t.bt("抱歉，你目前不符合注册 Pinterest 的资格。", "Sorry, you’re not eligible to sign up for Pinterest right now.", "Error message shown when underage user tries to register", undefined, true)})}));const o=new URLSearchParams(e.location.search),i=+o.get("aec");o.delete("aec"),e.history.replace({pathname:e.location.pathname,search:o.toString()}),this.state={accountRecoveryModalType:i===j.yV||i===j.$j?T.Ny.SOFT_BANNED:null,birthdayValidationError:null,emailFieldHasError:!1,emailValidationError:null,facebookValidationError:null,googleValidationError:null,passwordValidationError:null,showRegisterForm:"home_page"===this.props.container,hideFBGoogleToolTip:!1};const{i18n:a}=e;this.emailValidators=[(0,se.aH)({message:a.bt("你漏填了一处！别忘了添加电子邮件地址。", "You missed a spot! Don't forget to add your email.", " - ", undefined, true)}),(0,se.GT)({message:a.bt("呃...看起来不像是电子邮件地址。", "Hmm...that doesn't look like an email address.", " - ", undefined, true)})];const n=a.bt("密码太短了！需要 6 个以上的字符。", "Your password is too short! You need 6+ characters.", " - ", undefined, true),l=a.bt("密码仅能使用字母、数字和特殊字符（例如：?、!、$）组合。", "Use only a mix of letters, numbers and special characters (for example: ?, !, $).", "EmailPasswordStep.password.onlyASCII", undefined, true);this.requireAgeValidatorMessage=a.bt("提供你的年龄，让我们保护你", "Help us protect you by providing your age", "signup.emailpasswordstep.age.validator_message", undefined, true),this.requireBirthdayValidatorMessage=a.bt("你漏填了一处。别忘了添加你的生日。", "You missed a spot. Don’t forget to add your birthday.", "signup.emailpasswordstep.birthday.require.validator_message", undefined, true);const r=a.bt("无效日期", "Invalid date", "signup.emailpasswordstep.birthday.validator_message", undefined, true);this.passwordValidators=[(0,se.aH)({message:n}),(0,ie.r)({shortPassStr:n,samePasswordStr:a.bt("用户名和密码不能相同。", "Please make your username and password different.", " - ", undefined, true),blackPassStr:a.bt("请使用安全系数更高的密码。", "Please make a stronger password.", " - ", undefined, true)})],this.asciiValidators=[(0,se.oR)({message:l})],this.loginPasswordValidators=[(0,se.aH)({message:n}),(0,se.oR)({message:l}),(0,se.Gy)({min:6,minErrorString:n})];const c=a.bt("请输入有效的数字。", "Please enter a valid number.", "Signup.EmailPasswordStep.ageError", undefined, true),u=(0,se.ZA)({invalidAgeString:c,ageTooShortString:c});this.ageValidators=e.birthdayCollectionRequired?[]:[(0,se.aH)({message:this.requireAgeValidatorMessage}),u],this.birthdayValidators=[(0,se.aH)({message:this.requireBirthdayValidatorMessage}),(0,se.C9)({date:new Date((new Date).getFullYear(),0,1),message:r})]}handleLoginFailure(e,t){const{setPassword:o,email:i,onLoginWithMfa:a,i18n:s}=this.props,n=e.http_status===ee.Ej?ee.Ej:e.api_error_code;var l;if(n===j.Zn)return void T.ZP.handleLoginMfa(t,{phoneNumberEnd:null===(l=e.data)||void 0===l?void 0:l.phone_number_end},a);const r=(0,J.Z)({error:e,source:"emailPasswordStep",onClickPasswordReset:()=>{(0,v.My)("unauth_password_reset_link_tapped"),(0,q.Z)({url:"/v3/users/forgot_password/",method:"POST",data:{username_or_email:i}}).then((()=>this.updateAccountRecoveryModal(T.Ny.PASSWORD_RESET_SENT)))}});r?(this.setState({...r,accountRecoveryModalType:n?F.w[n]:void 0}),r.passwordValidationError&&o(""),this.setLoadingState(!1)):((0,W.x)(s.bt("抱歉！我们这边出了点问题。", "Sorry! Something went wrong on our end.", " - ", undefined, true)),this.setLoadingState(!1))}handleLoginSuccess(e){T.ZP.storeLoginCredentialsToBrowser(e);const{showResponseMessageModal:t}=this.props;t?t(!1):this.props.nextUrlParam?T.ZP.handleSignupRedirect(this.props.nextUrlParam,this.props.disablePostSignupNextUrl):window.location.reload()}signupLoginContextEvent(e){const{viewer:t}=this.props;return{event_type:e,aux_data:{...(0,y.Z)(t.type),signup_login_method:R.Z.EMAIL}}}validateEmailAvailable(){var e=this;const{birthdayCollectionRequired:t,container:o,email:i,login:a,pageContext:s,password:n}=this.props;this.setLoadingState(!0),this.checkEmailExistsWithCompletion({email:i,handleEmailExists:()=>{const e={username_or_email:i,password:null!=n?n:""};a({creds:e,loggingOptions:{loggingData:{container:o,page:null==s?void 0:s.pageType},loginAttemptContextEvent:this.signupLoginContextEvent(7534)}}).then((()=>this.handleLoginSuccess(e)),(t=>this.handleLoginFailure(t,e)))},handleEmailNotExist:async function(){await e.checkEmailValidation(i);const{age:o,birthday:a,password:s}=e.props;if(e.setLoadingState(!1),e.state.emailValidationError)return;const n=t?(0,ae.Z)(a||"",e.birthdayValidators):(0,ae.Z)(o||"",e.ageValidators);if(n)return(0,v.My)(`unauth.login.error.CLIENT_ERROR.${t?"invalidbirthday":"invalidage"}.${re}`),void e.setState({birthdayValidationError:n});let l;if(l=t?a?(0,u.Z)(a):void 0:null!=o&&o.trim()?(0,O.Z)(parseInt(o,10)):void 0,void 0===l)return void e.setState({birthdayValidationError:t?e.requireBirthdayValidatorMessage:e.requireAgeValidatorMessage});const r=(0,ae.Z)(null!=s?s:"",e.passwordValidators);if(r)return e.setState({passwordValidationError:r}),void(0,v.My)(`unauth.login.error.CLIENT_ERROR.malformpwd.${re}`);(0,Y.Z)(i)?e.setState({emailFieldHasError:!0}):(e.setState({emailValidationError:null}),(0,v.My)("unauth.signup_step_1.completed"),e.register({birthday:l}))}})}render(){const{additionalChildren:e,container:t,disablePostSignupNextUrl:o,email:a,loadingIndicatorCallback:n,nextUrlParam:l,onFBMissingEmail:r,onFBPhoneOnlyConnectVerified:c,onLoginWithMfa:d,switchToSocialSignupWithAgeFlow:h,showLineConnectButton:_,showResponseMessageModal:u,showSignupWelcomeLoadingFn:p,logContextEvent:g,viewType:x,viewParameter:y,component:w,attributionLabel:f}=this.props,{accountRecoveryModalType:b,facebookValidationError:v,googleValidationError:P,hideFBGoogleToolTip:k,showRegisterForm:A}=this.state,S=e=>{g({view_type:x,view_parameter:y,component:w,element:e,event_type:10441,aux_data:{upsell_reason:f}})};return(0,m.jsxs)(s.xu,{width:268,dangerouslySetInlineStyle:{__style:{margin:"0 auto"}},children:[(0,m.jsx)(F.Z,{email:a,modalType:b,onLoginWithMfa:d,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,updateAccountRecoveryModal:this.updateAccountRecoveryModal}),(0,m.jsxs)(s.xu,{children:[this.renderSignupForm(),!!A&&(0,m.jsx)(N.Z,{}),(0,m.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:{marginTop:"10px"}},children:[(0,m.jsx)(D.Z,{container:t,disablePostSignupNextUrl:o,loadingIndicatorCallback:n,onFBPhoneOnlyConnectVerified:c,onFBMissingEmail:r,onLoginWithMfa:d,onLoginWithSuspended:this.onLoginWithSuspended,socialSignupCallbacks:{type:"SOCIAL_SIGNUP_WITH_AGE",switchToSocialSignupWithAgeFlow:h},showResponseMessageModal:u,showSignupWelcomeLoadingFn:p,tooltip:!k&&v||null,showLoginRateLimited:()=>this.updateAccountRecoveryModal(T.Ny.RATE_LIMITED),onClick:()=>{S(13505)}}),(0,m.jsx)(s.xu,{height:10}),(0,m.jsx)(s.xu,{children:(0,m.jsx)(V.Z,{container:t,nextUrlParam:l,onLoginWithMfa:d,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,socialSignupCallbacks:{type:"SOCIAL_SIGNUP_WITH_AGE",switchToSocialSignupWithAgeFlow:h},showResponseMessageModal:u,tooltip:!k&&P||null,showLoginRateLimited:()=>this.updateAccountRecoveryModal(T.Ny.RATE_LIMITED),onClick:()=>{S(13504)}})}),_&&(0,m.jsxs)(i.Fragment,{children:[(0,m.jsx)(s.xu,{height:10}),(0,m.jsx)($.Z,{name:"SafeSuspense_EmailPasswordStep_LineConnectButton",children:(0,m.jsx)(te.Z,{children:(0,m.jsx)(le,{container:t,loadingIndicatorCallback:n,nextUrlParam:l,onLoginWithMfa:d,onLoginWithSuspended:this.onLoginWithSuspended,socialSignupCallbacks:{type:"SOCIAL_SIGNUP_WITH_AGE",switchToSocialSignupWithAgeFlow:h},showResponseMessageModal:u,showLoginRateLimited:()=>this.updateAccountRecoveryModal(T.Ny.RATE_LIMITED),onClick:()=>{S(13507)}})})})]})]})]}),(0,m.jsx)(C.Z,{dark:!0}),e]})}}function de(e){const t=(0,H.lO)(),o=(0,f.B)(),{showToast:s}=(0,oe.F9)(),{register:n,viewer:r}=(0,p.B$)(),c=(0,G.Z)(),d=(0,l.Z)(),{viewType:h,viewParameter:_}=(0,B.SU)(),u=(0,P.Z)(),g=(0,w.ZP)(),{country:x}=o,y=(0,a.useLocation)(),b=(0,a.useHistory)(),{recaptchaV3Token:v,refreshToken:k}=(0,M.D)(),{checkExperiment:A}=(0,Q.F)(),S=A("web_birthday_collection_eu_new_users").anyEnabled,E=["GB","IE"].includes(x)||S,C="JP"===x,[z,j]=(0,i.useState)(),[T,L]=(0,i.useState)(),[R,I]=(0,i.useState)(""),[Z,O]=(0,i.useState)("");return(0,m.jsx)(ce,{...e,age:z,onAgeChange:e=>j(e.value),birthday:T,onBirthdayChange:e=>L(e.value),name:R,setNameFromEmail:()=>I((0,K.Z)(e.email,x)),password:Z,setPassword:O,recaptchaV3Token:v,refreshRecaptchaV3Token:k,birthdayCollectionRequired:E,pageContext:t,requestContext:o,viewer:r,register:n,login:c,logContextEvent:d,viewType:h,viewParameter:_,i18n:g,location:y,history:b,showLineConnectButton:C,showToast:s,trackInteraction:u})}var he=o(308979),_e=o(447390);const ue=({email:e,emailError:t,onNotNowClick:o,handleEmailChange:a,handleSubmit:n})=>{const l=(0,w.ZP)();(0,i.useEffect)((()=>{(0,v.My)("unauth.fb_phone_only_signup.email_step")}),[]),l.bt("我们需要用你的电子邮件地址创建帐户，并向你发送重要的安全及法律声明。", "We use your email address for account creation and for important security and legal notices.", "subtitle to explain the step on email collection form", undefined, true);const r=l.bt("哎呀。没有电子邮件地址我们就无法为你创建帐户。想要继续，请确保提供电子邮件地址以创建帐户。", "Oops. We're unable to create your account without your email. To continue, make sure you provide email to create your account.", "subtitle to explain the step on email collection form", undefined, true);return(0,m.jsx)(s.xu,{marginTop:3,children:(0,m.jsxs)("form",{method:"post",noValidate:!0,onSubmit:e=>{e.preventDefault(),n()},children:[(0,m.jsx)(s.xv,{align:"start",overflow:"normal",children:r}),(0,m.jsx)(s.xu,{marginTop:3}),(0,m.jsx)(s.xu,{children:(0,m.jsx)(s.nv,{ref:_e.Z,errorMessage:Array.isArray(t)?t.join(""):t,id:"email",onChange:a,placeholder:l.bt("电子邮件地址", "Email address", "email placeholder in the email inputfield on email collection form", undefined, true),size:"lg",type:"email"})}),(0,m.jsx)(s.xu,{marginTop:5}),(0,m.jsx)(s.zx,{fullWidth:!0,color:"red",disabled:!e,text:l.bt("继续", "Continue", "word on the button which to submit user email information", undefined, true),type:"submit"}),(0,m.jsx)(s.xu,{marginTop:2}),(0,m.jsx)(s.zx,{fullWidth:!0,onClick:()=>{(0,v.My)("unauth.fb_phone_only_signup.email_step.not_now_click"),o&&o()},text:l.bt("下次再说", "Not now", "word on not now button to dismiss the collection form", undefined, true),type:"submit"})]})})};var pe=o(261551),ge=o(450667);function me(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const xe="email";class ye extends i.Component{constructor(e){super(e),me(this,"mounted",!1),me(this,"handleEmailChange",(({value:e})=>{this.setState({email:e})})),me(this,"showError",((e,t)=>{this.mounted&&t===xe&&this.setState({emailError:e})})),me(this,"handleSubmit",(()=>{const{i18n:e}=this.props;if((0,v.My)("unauth.fb_phone_only_signup.submit_email"),(0,v.Rp)({event:"submit_email",provider:"facebook"}),this.state.email)(0,v.My)("unauth.fb_phone_only_signup.submit_email"),this.attemptEmailSignupOrLogin();else{const t=e.bt("必须输入电子邮箱", "Email is required", "email error message", undefined, true);this.setState({emailError:t})}})),me(this,"handleSignupSuccess",(()=>{T.ZP.handleSignupRedirect(this.props.nextUrlParam||window.location.pathname,!0),(0,v.My)("unauth.fb_phone_only_signup.signup_success"),(0,v.Rp)({event:"signup_api_call_success",provider:"facebook"})})),me(this,"handleSignupFailure",(e=>t=>{const{i18n:o}=this.props,i=t.message||o.bt("哎呀！出了点问题...点击继续再试一次。", "Oops! Something went wrong… Click Continue to try again.", "Error during signup during FB email collection step", undefined, true);this.showError(i,e),(0,v.My)("unauth.fb_phone_only_signup.signup_failure"),(0,v.Rp)({event:"signup_api_call_failure",provider:"facebook"})})),me(this,"attemptEmailSignupOrLogin",(()=>{const{checkExperiment:e,desktopCoreLoginContext:{register:t},i18n:o}=this.props,{email:i}=this.state,a=[(0,se.GT)({message:o.bt("嗯...这看起来不像是电子邮件地址。", "Hmm... that doesn't look like an email address.", "email error message", undefined, true)})],s=(0,ae.Z)(i,a);if(s)return(0,v.My)("unauth.fb_phone_only_signup.email_validation_failure"),void this.setState({emailError:s});const{registrationCredentials:{type:n,signupOptions:l},showSocialSignupWithAgeStep:r,showEmailAlreadyExistModal:c}=this.props;(0,q.Z)({url:"/v3/register/exists/",data:{email:i}}).then((o=>{var a;if(!1===(null===(a=o.resource_response)||void 0===a?void 0:a.data)){const o={...l,email:i,email_source_site:L.E_.PINTEREST},{birthday:a}=o;if(void 0!==a&&(0,he.Z)(a)){(0,v.Rp)({event:"signup_api_call_start",provider:"facebook"});(o.facebook_token?(0,ge.MI)(o.facebook_token,e("web_unauth_identity_meta_birthdate_removal").anyEnabled).then(pe.Z):Promise.resolve(Object.freeze({}))).then((e=>t({...e,...o,birthday:a,birthday_source_site:L.E_.FACEBOOK},{signupContext:void 0,signupAttemptContextEvent:{event_type:7537,view_type:10}}))).then(this.handleSignupSuccess,this.handleSignupFailure(xe))}else r({type:n,signupOptions:o})}else c({email:i}),(0,v.My)("unauth.fb_phone_only_signup.email_existed")}),(e=>{let t=o.bt("嗯...这看起来不像是电子邮件地址。", "Hmm... that doesn't look like an email address.", "email error message", undefined, true);e.api_error_code===j.bd&&(t=e.message),this.showError(t,xe),(0,v.My)("unauth.fb_phone_only_signup.email_exist_api_call_failure")}))})),this.state={email:"",emailError:""}}componentDidMount(){this.mounted=!0,this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1)}componentWillUnmount(){this.mounted=!1}render(){return(0,m.jsx)(s.xu,{width:268,dangerouslySetInlineStyle:{__style:{margin:"0 auto"}},children:(0,m.jsx)(ue,{email:this.state.email,emailError:this.state.emailError,handleEmailChange:this.handleEmailChange,handleSubmit:this.handleSubmit,onNotNowClick:this.props.onNotNowClick})})}}const we=e=>{const t=(0,p.B$)(),o=(0,f.B)(),{checkExperiment:i}=(0,Q.F)(),a=(0,w.ZP)();return(0,m.jsx)(ye,{...e,checkExperiment:i,desktopCoreLoginContext:t,i18n:a,requestContext:o})},fe=({onClick:e})=>{const t=(0,f.B)(),o=(0,w.ZP)();return(0,m.jsx)(s.xu,{position:"absolute",display:"block",marginTop:4,marginEnd:4,marginStart:4,height:40,width:40,right:!t.isRTL,left:t.isRTL,top:!0,"data-test-id":"full-page-signup-close-button",children:(0,m.jsx)(s.hU,{accessibilityLabel:o.bt("关闭", "close", "accessible label for close button", undefined, true),onClick:e,icon:"cancel",iconColor:"darkGray",size:"md"})})};var be=o(621699),ve=o(525104);const Pe=({fallback:e,savePinId:t})=>{var o,i;const n=(0,w.ZP)(),{path:l}=(0,a.useRouteMatch)(),r=(0,a.useLocation)(),c=(0,ve.S6)(),d=t||("/pin/:id"===l?r.pathname.split("/")[2]:null);if(!d)return e;const h=c(d);if(!h)return e;const _=null===(o=h.images)||void 0===o||null===(i=o["236x"])||void 0===i?void 0:i.url;return _?(0,m.jsx)(s.xu,{width:56,height:72,margin:"auto",marginBottom:6,marginTop:4,children:(0,m.jsx)(s.zd,{width:56,height:72,rounding:2,children:(0,m.jsx)(s.Ee,{alt:n.bt("收藏 Pin 图图片", "Save pin image", "FullPageSignup.signupImage.savePinImage", undefined, true),color:h.dominant_color||"",fit:"cover",naturalHeight:1,naturalWidth:1,src:_})})}):e};function ke({container:e,fallback:t,savePinId:o,user:i}){var a,n;const l=(0,w.ZP)();switch(e){case"follow":return(0,m.jsx)(s.xu,{display:"flex",justifyContent:"center",marginTop:8,marginBottom:4,children:(0,m.jsx)(be.Z,{accessibilityLabel:l.bt("用户头像", "User Avatar", "profile.ProfileHeader.Avatar", undefined, true),name:null!==(a=null==i?void 0:i.full_name)&&void 0!==a?a:"",outline:!0,size:"md",src:null!==(n=null==i?void 0:i.image_large_url)&&void 0!==n?n:""})});case"save":case"download":return(0,m.jsx)(Pe,{fallback:t,savePinId:o});default:return t}}var Ae=o(767874);function Se({large:e}){return(0,m.jsx)(s.xu,{display:"block",height:45,width:45,dangerouslySetInlineStyle:{__style:{margin:"8px auto 6px"}},children:(0,m.jsx)(Ae.Z,{size:e?50:40})})}class Ee extends i.Component{constructor(...e){var t,o,i;super(...e),i=()=>{const{container:e,modalType:t}=this.props;(0,v.My)("web.unauth.modal_title.view"),(0,v.My)(`unauth_web_modal.${e||"unknown"}.tier1.${t}.shown`)},(o="componentDidMount")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i}render(){const{titleText:e}=this.props;return(0,m.jsx)("h1",{style:{color:"#333",fontSize:"32px",fontWeight:"600",letterSpacing:"-1.2px",MozOsxFontSmoothing:"grayscale",paddingLeft:"16px",paddingRight:"16px",WebkitFontSmoothing:"antialiased",wordBreak:"keep-all"},children:e})}}const Ce=({email:e,emailError:t,onNotNowClick:o,handleEmailChange:a,handleSubmit:n})=>{const l=(0,w.ZP)();(0,i.useEffect)((()=>{(0,v.My)("unauth.line_missing_email.email_step")}),[]),l.bt("我们需要用你的电子邮件地址创建帐户，并向你发送重要的安全及法律声明。", "We use your email address for account creation and for important security and legal notices.", "subtitle to explain the step on email collection form", undefined, true);const r=l.bt("哎呀。没有电子邮件地址我们就无法为你创建帐户。想要继续，请确保提供电子邮件地址以创建帐户。", "Oops. We're unable to create your account without your email. To continue, make sure you provide email to create your account.", "subtitle to explain the step on email collection form", undefined, true);return(0,m.jsx)(s.xu,{marginTop:3,children:(0,m.jsxs)("form",{method:"post",noValidate:!0,onSubmit:e=>{e.preventDefault(),n()},children:[(0,m.jsx)(s.xv,{align:"start",overflow:"normal",children:r}),(0,m.jsx)(s.xu,{marginTop:3,marginBottom:5,children:(0,m.jsx)(s.nv,{ref:_e.Z,errorMessage:Array.isArray(t)?t.join(""):t,id:"email",onChange:a,placeholder:l.bt("电子邮件地址", "Email address", "email placeholder in the email inputfield on email collection form", undefined, true),size:"lg",type:"email"})}),(0,m.jsx)(s.zx,{fullWidth:!0,color:"red",disabled:!e,text:l.bt("继续", "Continue", "word on the button which to submit user email information", undefined, true),type:"submit"}),(0,m.jsx)(s.xu,{marginTop:2}),(0,m.jsx)(s.zx,{fullWidth:!0,onClick:()=>{(0,v.My)("unauth.line_missing_email.email_step.not_now_click"),o&&o()},text:l.bt("下次再说", "Not now", "word on not now button to dismiss the collection form", undefined, true),type:"submit"})]})})};var ze=o(272109);const je=({nextUrlParam:e,loadingIndicatorCallback:t,showEmailAlreadyExistModal:o,onNotNowClick:a,registrationCredentials:n,showSocialSignupWithAgeStep:l})=>{const r=(0,p.B$)(),c=(0,w.ZP)(),[d,h]=(0,i.useState)(""),[_,u]=(0,i.useState)("");return(0,ze.Z)((()=>{t(!1)})),(0,m.jsx)(s.xu,{marginTop:0,marginBottom:0,marginStart:"auto",marginEnd:"auto",width:268,children:(0,m.jsx)(Ce,{email:d,emailError:_,handleEmailChange:({value:e})=>h(e),handleSubmit:()=>{if((0,v.My)("unauth.line_missing_email.submit_email"),!d)return void u(c.bt("必须输入电子邮箱", "Email is required", "email error message", undefined, true));(0,v.My)("unauth.line_missing_email.submit_email");const{register:i}=r,a=[(0,se.GT)({message:c.bt("嗯...这看起来不像是电子邮件地址。", "Hmm... that doesn't look like an email address.", "email error message", undefined, true)})],s=(0,ae.Z)(d,a);if(s)return(0,v.My)("unauth.line_missing_email.email_validation_failure"),void u(s);const{type:h,signupOptions:_}=n;(0,q.Z)({url:"/v3/register/exists/",data:{email:d}}).then((a=>{var s;if(!1!==(null===(s=a.resource_response)||void 0===s?void 0:s.data))return o({email:d}),void(0,v.My)("unauth.line_missing_email.email_existed");t(!0);const{birthday:n}=_;void 0===n?(l({type:h,signupOptions:{..._,email:d}}),t(!1)):i({..._,email:d,birthday:n},{signupContext:void 0,signupAttemptContextEvent:{event_type:7537,view_type:10}}).then((()=>{t(!1),T.ZP.handleSignupRedirect(e||T.ZP.defaultSocialLoginRedirectUrl(),!0),(0,v.My)("unauth.line_missing_email.signup_success")}),(e=>{t(!1);const o=e.message||c.bt("哎呀！出了点问题...点击继续再试一次。", "Oops! Something went wrong… Click Continue to try again.", "unauth.lineEmailCollect.error", undefined, true);u(o),(0,v.My)("unauth.line_missing_email.signup_failure")}))}),(e=>{u(e.api_error_code===j.bd?e.message:c.bt("嗯...这看起来不像是电子邮件地址。", "Hmm... that doesn't look like an email address.", "email error message", undefined, true)),(0,v.My)("unauth.line_missing_email.email_exist_api_call_failure")}))},onNotNowClick:a})})};var Te=o(227648),Le=o(388011),Re=o(777610),Me=o(361927),Ie=o(630089),Ze=o(36521);const Be=function({container:e="unknown",creds:t,isAccountSwitch:o,nextUrlParam:a,phoneNumberEnd:n}){const[l,r]=(0,i.useState)(null),[c,d]=(0,i.useState)(""),[h,_]=(0,i.useState)(!1),[u,p]=(0,i.useState)(!1),{isAuthenticated:x,loginState:y}=(0,f.B)(),P=(0,w.ZP)(),k=(0,H.lO)(),A=(0,G.Z)(),S={container:e,page:null==k?void 0:k.pageType},{logContextEvent:E}=(0,Le.v)();(0,Re.Q)({view_type:565,view_parameter:3731}),(0,i.useEffect)((()=>{!o&&T.ZP.isFullyLoggedIn(x,y)&&T.ZP.handleRedirect(a)}),[]);const C=P.bt("继续", "Continue", " - ", undefined, true);return(0,m.jsxs)(s.xu,{width:268,dangerouslySetInlineStyle:{__style:{margin:"18px auto"}},children:[h&&(0,m.jsx)(Ze.Z,{rounding:8}),(0,m.jsx)("p",{style:{fontSize:"14px",margin:"24px 0",textAlign:"center"},children:n?(0,Ie.nk)(P.bt("我们向你尾号为 {{ phoneNumberEnd }} 的手机发送了验证码，请查看并在下方输入以登录。", "Please check your phone with the number ending in {{ phoneNumberEnd }} for a code and enter it in the field below to log in.", " - ", undefined, true),{phoneNumberEnd:(0,m.jsx)("strong",{children:n},"phone")}):P.bt("请在手机查看验证码并在下方输入以登录。", "Please check your phone for a code and enter it in the field below to log in.", " - ", undefined, true)}),(0,m.jsxs)("form",{method:"POST",noValidate:!0,onSubmit:e=>{e.preventDefault(),E({view_type:565,view_parameter:3731,event_type:101,element:12019});const o=(0,ae.Z)(null!=c?c:"",[(0,se.aH)({message:P.bt("你漏填了一处！别忘了写上验证码", "You missed a spot! Don't forget to add your verification code.", " - ", undefined, true)}),(0,se.VC)({message:P.bt("呃...这看起来不像验证码。", "Hmm...that doesn't look like a verification code.", " - ", undefined, true)})]);o?(r(o),(0,v.My)("unauth.login.error.CLIENT_ERROR.wrongcode.loginmfa")):(r(null),_(!0),A({creds:{...t,mfa_token:c},loggingOptions:{loggingData:S,loginAttemptContextEvent:{event_type:7534,view_type:565,view_parameter:3731}}}).then((()=>{E({view_type:565,view_parameter:3731,event_type:9992});const e=window.location.pathname===b.lf||window.location.pathname.startsWith(b.rO)?"/":window.location.pathname;T.ZP.handleRedirect(a||e)}),(e=>{e.message?(r(e.message),_(!1)):((0,W.x)(P.bt("抱歉！我们这边出了点问题。", "Sorry! Something went wrong on our end.", " - ", undefined, true)),_(!1))})))},children:[(0,m.jsx)(Me.Z,{autoComplete:"off",focused:!0,hasError:!!l,id:"mfaCode",name:"code",onChange:e=>d(e.target.value),placeholder:P.bt("验证码", "Verification code", " - ", undefined, true),tooltip:l,type:"text",value:c}),(0,m.jsx)(g.Z,{accessibilityLabel:C,className:"red SignupButton",styleOverrides:{width:"100%",borderRadius:"20px"},type:"submit",children:(0,m.jsx)(s.xu,{children:C})})]}),(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{marginTop:"15px",color:"#333"}},children:(0,Ie.nk)(P.bt("如果没有收到，我们可以{{ resendCode }}。", "If you didn't get it, we can {{ resendCode }}.", " - ", undefined, true),{resendCode:(0,m.jsx)(s.rU,{display:"inlineBlock",href:"",onClick:({event:e,dangerouslyDisableOnNavigation:o})=>{o(),e.preventDefault(),E({view_type:565,view_parameter:3731,event_type:101,element:12920}),_(!0),A({creds:{...t,mfa_resend:!0},loggingOptions:{loggingData:S,loginAttemptContextEvent:{event_type:7534,view_type:565,view_parameter:3731}}}).then((()=>{_(!1),p(!0)}),(e=>{_(!1),e.message?r(e.message):(0,W.x)(P.bt("抱歉！我们这边出了点问题。", "Sorry! Something went wrong on our end.", " - ", undefined, true))}))},underline:"hover",children:(0,m.jsx)(s.xv,{size:"100",weight:"bold",children:P.bt("重发验证码", "resend the code", " - ", undefined, true)})},"code")})}),u&&(0,m.jsx)(s.xu,{fit:!0,dangerouslySetInlineStyle:{__style:{bottom:50,left:"50%",transform:"translateX(-50%)"}},paddingX:1,position:"fixed",children:(0,m.jsx)(X.ZP,{onHide:()=>p(!1),text:P.bt("我们向你发送了新验证码！", "We sent you a new code!", "login2fa.resendCode.success", undefined, true),duration:5e3})})]})};var Oe=o(380540);const Fe={backgroundColor:"#fff",borderRadius:"8px",padding:"22px 0",position:"relative",textAlign:"center",width:"400px",margin:"auto",boxShadow:"0 2px 10px rgba(0,0,0,0.45)"},Ne=({children:e,noBoxShadow:t})=>{const o={...Fe,...t?{boxShadow:"none"}:{}},{viewer:i}=(0,p.B$)(),a=(0,p.Cw)();return"LIMITED_LOGIN"===i.type&&a?(0,m.jsxs)("div",{"data-test-id":"login-modal-default",style:{...o,display:"flex",width:"auto",padding:""},children:[(0,m.jsx)(s.xu,{overflow:"hidden",dangerouslySetInlineStyle:{__style:{borderRadius:"8px 0 0 8px"}},children:(0,m.jsx)(s.xu,{maxWidth:400,height:"100%",dangerouslySetInlineStyle:{__style:{width:"number"==typeof a.height&&"number"==typeof a.width?600*(a.width/a.height||0):0,backgroundSize:"cover",backgroundPosition:"center",backgroundImage:a.url?`url(${a.url})`:""}}})}),(0,m.jsx)(s.xu,{width:400,dangerouslySetInlineStyle:{__style:{padding:"32px 0"}},children:e})]}):(0,m.jsx)("div",{"data-test-id":"login-modal-default",style:{...o,padding:"32px 0"},children:e})},We=({children:e,email:t,footer:o,handleNotYouClick:a,header:n,noBoxShadow:l,title:r,viewerInfo:c})=>{var d;const{viewer:h}=(0,p.B$)(),_=(0,w.ZP)();return(0,m.jsx)(Ne,{noBoxShadow:l,children:(0,m.jsxs)(i.Fragment,{children:[n,(0,m.jsx)("div",{style:{display:"block",margin:"0 auto 16px",width:40,height:40},children:(0,m.jsx)(Ae.Z,{size:40})}),(0,m.jsx)("div",{style:{__style:{width:"auto",overflow:"hidden",maxHeight:"150px",margin:"0 48px 16px"}},children:r}),"LIMITED_LOGIN"===h.type&&(0,m.jsx)(s.xu,{marginBottom:4,paddingX:12,children:(0,m.jsx)(Oe.Z,{})}),(0,m.jsx)(s.xu,{width:120,dangerouslySetInlineStyle:{__style:{margin:"0 auto 16px"}},children:(0,m.jsx)(be.Z,{name:c.firstName,src:null!==(d=c.imageUrl)&&void 0!==d?d:void 0})}),(0,m.jsx)(s.xu,{marginBottom:3,children:(0,m.jsx)(s.xv,{align:"center",children:t})}),e,(0,m.jsx)(s.xu,{paddingY:5,children:(0,m.jsx)(s.iz,{})}),(0,m.jsx)(s.xu,{"data-test-id":"login-switch-account",children:(0,m.jsx)(s.iP,{fullWidth:!1,onTap:({event:e})=>{e.preventDefault(),a()},children:(0,m.jsx)(s.xv,{align:"center",size:"200",weight:"bold",children:(0,m.jsx)(s.rU,{href:"#",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:_.bt("不是你？使用其他帐户登录", "Not you? Log in with a different account", "Short message (in small fonts) on the bottom of the login modal that prompts a user to log in to a different account", undefined, true)})})})}),(0,m.jsx)(s.xu,{marginBottom:0,marginTop:1,children:o})]})})};var De=o(300218),Ve=o(526750);const Ue=({age:e,handleAgeChange:t,handleSubmit:o,error:a,removeExtraSpaceForErr:n,method:l})=>{const r=(0,w.ZP)();(0,i.useEffect)((()=>{(0,v.My)("dweb.signup_age_step",{type:l,format:"age"})}),[l]);const[c,d]=(0,i.useState)(""),h=r.bt("输入你的年龄", "Enter your age", "age.input.placeholder", undefined, true);return(0,m.jsx)(s.xu,{children:(0,m.jsxs)("form",{method:"post",noValidate:!0,onSubmit:t=>{t.preventDefault(),e&&!c&&o({age:e})},children:[(0,m.jsx)(s.xu,{marginTop:2}),(0,m.jsx)(Ve.Z,{value:null==e?void 0:e.toString(),focusOnMount:!0,error:a,onChangeParsed:e=>t({value:e}),onValidation:d,customPlaceholderText:h}),(0,m.jsxs)(s.xu,{children:[(0,m.jsx)(s.xu,{paddingY:12,marginTop:12}),(0,m.jsx)(s.xu,{paddingY:(e=>n&&""!==e?2:5)(c)})]}),(0,m.jsx)(s.xu,{marginTop:3}),(0,m.jsx)(s.xu,{children:(0,m.jsx)(s.zx,{fullWidth:!0,color:"red",disabled:!!c||!e,text:r.bt("下一步", "Next", "social.connect.age.form.next.btn", undefined, true),type:"submit"})})]})})};function Ge(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}class He extends i.Component{constructor(...e){super(...e),Ge(this,"state",{age:void 0,error:"",isLoading:!1,removeExtraSpaceForErr:!1}),Ge(this,"getViewParameter",(e=>{switch(null==e?void 0:e.type){case"facebook":return 3205;case"google":return 3204;case"google_one_tap":return 3201;default:return}})),Ge(this,"handleAgeChange",(({value:e})=>{this.setState({age:e,removeExtraSpaceForErr:!0})})),Ge(this,"handleSignupSuccess",(()=>{this.track("signup_success");const{showResponseMessageModal:e}=this.props;e?e(!0):T.ZP.handleSignupRedirect(this.props.nextUrlParam||window.location.pathname,!0)})),Ge(this,"handleSignupFailure",(e=>{const{i18n:t}=this.props;this.track("signup_failure"),this.props.loadingIndicatorCallback&&this.props.loadingIndicatorCallback(!1),this.setState({isLoading:!1});const o=e.message||t.bt("哎呀！出了点问题...点击继续再试一次。", "Oops! Something went wrong… Click Continue to try again.", "Error during signup during age collection step", undefined, true);this.setState({error:o})})),Ge(this,"handleSubmit",(({age:e})=>{const{desktopCoreLoginContext:{register:t},onLineEmailMissingError:o}=this.props;this.track(`submit_button_click.${e||"undefined"}`);const{loadingIndicatorCallback:i,registrationCredentials:a,showResponseMessageModal:s}=this.props;if("1"===h.U2(_.It))return void this.track("signup_failure");const n=a&&a.type;if(i&&!["google_one_tap","google","facebook"].includes(n)&&i(!0),!a)return void i(!1);const l=(0,O.Z)(e),r={signupContext:void 0,signupAttemptContextEvent:{event_type:7537,view_parameter:this.getViewParameter(this.props.registrationCredentials)}};if("facebook"===a.type){this.track("attempt_signup");t({...a.signupOptions,birthday:l,birthday_source_site:L.E_.PINTEREST},r).then(this.handleSignupSuccess,this.handleSignupFailure)}else if("google"===a.type||"google_one_tap"===a.type){this.track("attempt_signup");t({...a.signupOptions,birthday:l},r).then(this.handleSignupSuccess,this.handleSignupFailure)}else if("line"===a.type){this.track("attempt_signup");const e={...a.signupOptions,birthday:l};t({...e},r).then(this.handleSignupSuccess,(t=>{t.api_error_code===j.iZ&&o?o({...a,signupOptions:e}):this.handleSignupFailure(t)}))}s||"facebook"!==a.type||this.setState({isLoading:!0})}))}componentDidMount(){this.track("shown")}track(e){const{container:t,registrationCredentials:o}=this.props,i=o?o.type:"undefined";(0,v.My)(`unauth_web.age_collection_form.${e}.${i}.${t||"undefined"}`)}render(){const{age:e,error:t,isLoading:o,removeExtraSpaceForErr:i}=this.state,{registrationCredentials:a}=this.props;return o?(0,m.jsx)(De.Z,{}):(0,m.jsx)(s.xu,{width:464,dangerouslySetInlineStyle:{__style:{margin:"0 auto"}},children:(0,m.jsx)(Ue,{age:e,error:t,handleAgeChange:this.handleAgeChange,handleSubmit:this.handleSubmit,removeExtraSpaceForErr:i,method:null==a?void 0:a.type})})}}const Ye=e=>{const t=(0,w.ZP)(),o=(0,p.B$)();return(0,m.jsx)(He,{...e,desktopCoreLoginContext:o,i18n:t})};var $e=o(906215),qe=o(121633);const Xe=e=>{$e.Z.resume(qe.LU),(0,v.My)(`web.dismiss_account_switcher.${e}`)};var Ke=o(840093),Je=o(493851),Qe=o(846226),et=o(488203),tt=o(911386),ot=o(712968);const it={backgroundColor:"#fff",borderRadius:"32px",position:"relative",textAlign:"center",margin:"auto",minHeight:"450px",boxShadow:"0 2px 10px rgba(0,0,0,0.45)"},at={...it,height:"610px",width:"528px",padding:"20px 10px 24px"},st={home_page:{...it,minHeight:"initial"},pinBookmarklet:{...it,boxShadow:"none"}},nt={minHeight:"400px",padding:"20px 10px 24px"},lt={margin:"0 auto 22px",width:"270px"},rt={margin:"90px auto 22px",width:"464px"},ct=(e,t)=>{switch(t){case"boardInvite":return e.bt("注册以接受你的图板邀请", "Sign up to accept your board invite", "Sign up copy board invite", undefined, true);case"saveButton":return e.bt("注册以查看更多", "Sign up to see more", "signup copy save button", undefined, true);case"saveButtonExp":return e.bt("加入 Pinterest 以收藏此点子", "Join Pinterest to save this idea", "FullPageSignup.signupTagline.save", undefined, true);case"homePage":return e.bt("欢迎来到 Pinterest", "Welcome to Pinterest", "Title on desktop signup modal on home page", undefined, true);case"pinBookmarklet":return e.bt("注册以收藏此 Pin 图！", "Sign up to save this Pin!", "signup copy save button from third party website", undefined, true);case"downloadImageBtnDweb":return e.bt("你的点子再也不会离你而去！注册帐户", "Never lose track of your ideas again! Sign up for an account", "mweb.unauth.download_modal.download_value_prop", undefined, true);case"followButton":return e.bt("加入 Pinterest 以关注", "Join Pinterest to follow", "mweb.unauth.follow_modal.follow_value_prop", undefined, true);default:return e.bt("注册以查看更多", "Sign up to see more", "sigup copy default includes pin click and scrolling", undefined, true)}},dt=(e,t)=>{switch(t){case"boardInvite":return e.bt("登录以接受你的图板邀请", "Log in to accept your board invite", "Login copy board invite", undefined, true);case"homePage":return e.bt("欢迎来到 Pinterest", "Welcome to Pinterest", "Title on desktop signup modal on home page", undefined, true);case"pinBookmarklet":return e.bt("登录以收藏此 Pin 图！", "Sign in to save this Pin!", "Login copy save button from third party website", undefined, true);default:return e.bt("登录以查看更多", "Log in to see more", "Title on desktop login modal", undefined, true)}};function ht({container:e,savePinId:t,customLoginTagline:o,customSignupTagline:r,handleCloseButtonClick:c,handleShowingSignupWelcomeLoading:d,hideAccountSwitchValueProp:h,inviter:_,isAccountSwitch:u=!1,isBusiness:g,nextUrlParam:b,renderBusinessCreateButton:k,showCloseIcon:A,showResponseMessageModal:S,signupRedirectUrl:C,signupSource:j="defaultSource",suppressFocus:T,toggleType:L="DEFAULT_TOGGLE",signupFlow:R,component:M,attributionLabel:I}){var B;const O=(0,f.B)(),{country:F}=O,N=(0,w.ZP)(),{viewer:{info:W,type:D}}=(0,p.B$)(),V=(0,l.Z)(),U=(0,P.Z)(),{checkExperiment:G}=(0,Q.F)(),H=G("web_birthday_collection_eu_new_users").anyEnabled,[Y,$]=(0,i.useState)(!1),[q,X]=(0,i.useState)(!1),[K,J]=(0,i.useState)(!1),[ee,te]=(0,i.useState)("signup"===(0,tt.Z)().type?{type:"signup"}:R),[oe,ie]=(0,i.useState)(!1),ae=(0,y.Z)(D),{username:se}=(0,a.useParams)(),ne=(0,ot.cm)(),le=se?ne(se):null,re=["GB","IE"].includes(F)||H;(0,i.useEffect)((()=>((0,v.My)(`unauth.authentication_modal.shown.${L}.${ee.type}`),()=>{u&&((0,Ke.Z)("add_account_dismiss",null,e),Xe(e))})),[]);const ce=(0,i.useRef)(ee.type);(0,i.useEffect)((()=>{ce.current!==ee.type&&(ce.current=ee.type,(0,v.My)(`unauth.authentication_modal.shown.${L}.${ee.type}`))}));const he=(0,i.useRef)(R);(0,i.useEffect)((()=>{he.current.type!==R.type&&(he.current=R,te(R))}));const _e=null!==(B=st[e])&&void 0!==B?B:it,ue=()=>b?decodeURIComponent(b):b,pe=e=>ue()?(0,et.Z)(e,{next:ue()}):e,ge=e=>te({type:"EmailCollection",registrationCredentials:e}),me=e=>te({type:"socialSignupWithAge",registrationCredentials:e}),xe=(e,t)=>te({type:"loginMfa",creds:e,phoneNumberEnd:(null==t?void 0:t.phoneNumberEnd)||void 0}),ye=e=>{(0,v.My)(`unauth.personalized_login.prevent_register.${e}`),ie(!0),X(!1),te({type:"signup"})},ve=()=>{(0,v.My)("unauth.personalized_login.not_you.click"),(0,v.NC)("click_change_signin_account"),V({aux_data:ae,element:10879,event_type:101})},Pe=e=>{(0,v.My)(`unauth.authentication_modal.${e}.${L}.${ee.type}`)},Ae=e=>{Pe("login_toggle_click"),(0,v.NC)("click_toggle_login"),U({action:"click",item:"login-button"}),te({type:"login",email:null==e?void 0:e.email}),$(!1)},Ce=({email:e})=>{Pe("signup_toggle_click"),(0,v.NC)("click_toggle_signup"),C?(0,n.Z)(C,!1):te({type:"signup",email:e})},ze=({email:e})=>(0,m.jsx)(s.iP,{fullWidth:!1,onTap:t=>{const o={event_type:101,element:10880};g?V(o):(t.event.preventDefault(),(0,v.My)("unauth.personalized_login.signup_instead.click"),V({...o,aux_data:ae}),Ce({email:e}))},children:(0,m.jsx)(s.xv,{align:"center",size:"200",weight:"bold",children:(0,m.jsx)(Qe.Z,{id:"need-account-link",children:(0,m.jsx)(s.rU,{href:g?pe("/business/create"):"#",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:N.bt("需要一个帐户？立即注册", "Need an account? Sign up now", "Short message (in small fonts) on the bottom of the login modal that prompts a users to create an account", undefined, true)})})})}),Le=A&&(0,m.jsx)(fe,{onClick:c});if(K&&["signup","login","socialSignupWithAge"].includes(ee.type))return(0,m.jsx)(De.Z,{});switch(ee.type){case"signup":case"respondMessage":{var Re;const o=Y?N.bt("欢迎回到 Pinterest！", "Welcome back to Pinterest!", "welcoming user back to pinterest in signup modal when we recognize their email", undefined, true):r||ct(N,j),a=_&&!_.is_default_image?_:null,n=(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:lt},width:"login_page"!==e?400:void 0,children:(0,m.jsx)(Ee,{container:e,modalType:"signup",titleText:a&&("respondMessage"===R.type?(N.bt("注册并让 {{ name }} 知道你的想法", "Sign up and let {{ name }} know what you think", "Prompt user to signup to access all Pinterest features", undefined, true)).replace("{{ name }}",a.first_name||a.full_name):(N.bt("加入 Pinterest 上的 {{ name }}，获取更多点子", "Join {{ name }} on Pinterest for more ideas", "Prompt user to signup to access all Pinterest features", undefined, true)).replace("{{ name }}",a.first_name||a.full_name))||(["login_page","home_page","save","download","follow"].includes(e)?o:N.bt("免费无限获取世界上最棒的点子", "Unlimited free access to the world's best ideas", "FullPageSignup.signupTitle.save", undefined, true))})});return(0,m.jsxs)(s.xu,{"data-test-id":"signup-default-modal",width:484,dangerouslySetInlineStyle:{__style:_e},children:[q&&(0,m.jsx)(Ze.Z,{}),(0,m.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:a?{minHeight:"400px",padding:"30px 10px 20px"}:nt},children:[Le,a?(0,m.jsxs)(i.Fragment,{children:[(0,m.jsx)(s.xu,{width:108,dangerouslySetInlineStyle:{__style:{margin:"0 auto 16px"}},children:(0,m.jsx)(be.Z,{name:a.first_name||a.full_name,src:a.image_medium_url,verified:"respondMessage"===R.type})}),n]}):(0,m.jsxs)(i.Fragment,{children:[(0,m.jsx)(ke,{container:e,fallback:(0,m.jsx)(Se,{large:"homePage"!==j}),savePinId:t,user:le}),n,(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:lt},children:!Y&&(0,m.jsx)(s.xu,{marginTop:-4,marginBottom:4,children:(0,m.jsx)(s.xv,{size:"300",align:"center",children:"login_page"!==e&&"home_page"!==e&&"save"!==e&&"download"!==e&&"follow"!==e?o:"downloadImageBtnDweb"===j&&N.bt("发现使你的点子井井有条的更好方式", "Discover a better way to keep your ideas organized", "mweb.unauth.signup_modal.download_value_prop_subheader", undefined, true)||"followButton"===j&&(0,Ie.nk)(N.bt("创建帐户以关注 {{ creatorName }}", "Create an account to follow {{ creatorName }}", "mweb.unauth.signup_modal.follow_value_prop_subheader", undefined, true),{creatorName:null==le?void 0:le.full_name})||"homePage"===j&&N.bt("寻找值得尝试的新点子", "Find new ideas to try", "Value prop on desktop signup modal on home page", undefined, true)||"saveButtonExp"===j&&N.bt("免费无限获取世界上最棒的点子", "Unlimited free access to the world's best ideas", "FullPageSignup.signupSubTitle.saDDve", undefined, true)||N.bt("发现始于此处", "Discovery starts here", "Pinterest value proposition on desktop login modal", undefined, true)})})})]}),(0,m.jsx)(s.xu,{"data-test-id":"signup-options",position:"relative",dangerouslySetInlineStyle:{__style:{textAlign:"center",margin:"0 auto"}},children:(0,m.jsx)(de,{additionalChildren:(0,m.jsx)(E,{layout:("NOT_NOW_BUTTON"===L?"SIGNUP_LARGE":"home_page"===e&&"SIGNUP_SMALL")||"SIGNUP_DEFAULT",onClick:()=>Ae({email:ee.email}),type:"signupToLogin",shouldHideBusinessCreateFooterLink:!!k}),container:e,disablePostSignupNextUrl:!b,email:null!==(Re=ee.email)&&void 0!==Re?Re:"",loadingIndicatorCallback:X,nextUrlParam:ue(),onBirthdayUnderage:({birthday:e,email:t})=>{te({type:"UnderageConfirmation",birthday:e,email:t})},onFBPhoneOnlyConnectVerified:ge,onFBMissingEmail:ge,onLoginWithMfa:xe,setEmail:e=>te((ee.type,{...ee,email:e})),showResponseMessageModal:"respondMessage"===R.type?S:void 0,showSignupWelcomeLoadingFn:e=>{J(e),d&&d(e)},signupSource:j,suppressFocus:T,switchToSocialSignupWithAgeFlow:me,component:M,attributionLabel:I})})]}),k&&k()]})}case"login":{if(!oe&&!u&&W&&"AUTH"!==D&&"bottom.right.upsell.email"!==e){var Me;const t=W.hasPassword||W.connectedToFacebook||W.connectedToGoogle;return(0,m.jsx)(We,{email:null!==(Me=ee.email)&&void 0!==Me?Me:"",handleNotYouClick:()=>{ie(!0),ve()},noBoxShadow:"pinBookmarklet"===e,header:(0,m.jsxs)(i.Fragment,{children:[q&&(0,m.jsx)(Ze.Z,{}),Le]}),viewerInfo:W,title:(0,m.jsx)(Ee,{container:e,modalType:"personalizedLogin",titleText:(0,Ie.nk)(N.bt("欢迎回来，{{name}}！", "Welcome back, {{name}}!", "Short title (large font) on the login modal welcoming back a user who previously logged in to Pinterest", undefined, true),{name:W?W.firstName:""}).join("")}),footer:ze({email:ee.email}),children:(0,m.jsx)(Te.ZP,{container:e,disablePostSignupNextUrl:!b,email:W.email,hideEmailField:!0,hideFacebookButton:t&&!W.connectedToFacebook,hideGoogleButton:t&&!W.connectedToGoogle,hideLineButton:t,hidePasswordField:t&&!W.hasPassword,hideTermsOfService:!0,loadingIndicatorCallback:X,loginButtonTextOverride:N.bt("继续", "Continue", " - ", undefined, true),nextUrlParam:ue(),onEmailChange:()=>{},onLoginWithMfa:xe,requestContext:O,showResponseMessageModal:"respondMessage"===R.type?S:void 0,socialSignupCallbacks:{type:"ACCOUNT_RECOVERY",switchToAccountRecoverySignupFlow:ye},component:M,attributionLabel:I})})}let t=o||dt(N,j);return"save"===e&&G("dweb_signup_to_login_modal").group.endsWith("save")&&(t=N.bt("登录以收藏此点子", "Log in to save this idea", "dweb.login.modal.title.on.save", undefined, true)),(0,m.jsxs)(s.xu,{"data-test-id":"login-modal-default",width:484,dangerouslySetInlineStyle:{__style:_e},children:[q&&(0,m.jsx)(Ze.Z,{}),(0,m.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:nt},children:[Le,(0,m.jsx)(Se,{large:"homePage"!==j}),(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:lt},width:"login_page"!==e?400:void 0,children:(0,m.jsx)(Ee,{container:e,modalType:"login",titleText:t})}),u&&!h&&(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:lt},children:(0,m.jsx)(s.xu,{marginTop:-4,marginBottom:8,children:(0,m.jsx)(s.xv,{align:"center",size:"300",children:N.bt("有另外一个 Pinterest 帐户？登录以轻松进行帐户切换", "Have another Pinterest account? Log in to easily switch between them", "Subtitle on the login modal that explains to a user why they would add an additional account to their profile", undefined, true)})})}),(0,m.jsx)(Te.ZP,{container:e,disablePostSignupNextUrl:!b,email:ee.email,isAccountSwitch:u,loadingIndicatorCallback:X,nextUrlParam:ue(),onEmailChange:e=>te({...ee,email:e.target.value}),onFBPhoneOnlyConnectVerified:ge,onLoginWithMfa:xe,socialSignupCallbacks:{type:"SOCIAL_SIGNUP_WITH_AGE",switchToSocialSignupWithAgeFlow:me},requestContext:O,showResponseMessageModal:"respondMessage"===R.type?S:void 0,component:M,attributionLabel:I}),g?(0,m.jsxs)(s.kC,{direction:"column",alignItems:"center",children:[(0,m.jsx)(x,{}),(0,m.jsx)(s.xv,{weight:"bold",size:"100",children:(0,m.jsx)(s.rU,{href:pe("/business/create"),children:N.bt("新建帐户", "Create new account", "Link to the page to create a new business account instead of logging in", undefined, true)})})]}):!u&&(0,m.jsx)(E,{layout:("NOT_NOW_BUTTON"===L?"LOGIN_INLINE":"SMALL_TOGGLE"===L&&"LOGIN_SMALL")||"LOGIN_DEFAULT",type:"loginToSignup",onClick:()=>Ce({email:ee.email})})]})]})}case"loginMfa":return(0,m.jsx)(s.xu,{"data-test-id":"login-modal-mfa",width:489,dangerouslySetInlineStyle:{__style:_e},children:(0,m.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:nt},children:[Le,(0,m.jsx)(Se,{}),(0,m.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{...lt,padding:"0 10px"}},width:"100%",children:(0,m.jsx)(Ee,{container:e,modalType:"loginMfa",titleText:N.bt("需要双重认证", "Two-factor authentication required", "desktopLoginModal.2fa.title", undefined, true)})}),(0,m.jsx)(Be,{container:e,creds:ee.creds,isAccountSwitch:u,nextUrlParam:ue(),phoneNumberEnd:ee.phoneNumberEnd})]})});case"socialSignupWithAge":{if(re)return(0,m.jsx)(s.xu,{"data-test-id":"birthday-collection-modal",dangerouslySetInlineStyle:{__style:_e},minHeight:"0",children:(0,m.jsx)(Z,{disablePostSignupNextUrl:!b,handleLoginToggleButtonClick:Ae,loadingIndicatorCallback:X,nextUrlParam:ue(),registrationCredentials:ee.registrationCredentials,showResponseMessageModal:"respondMessage"===R.type?S:void 0})});const t=ee.registrationCredentials.signupOptions.first_name;return(0,m.jsxs)(s.xu,{"data-test-id":"login-modal-with-age",dangerouslySetInlineStyle:{__style:at},children:[q&&(0,m.jsx)(Ze.Z,{}),(0,m.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:nt},children:[Le,(0,m.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:rt},children:[(0,m.jsx)(s.X6,{size:"500",align:"center",children:t?(0,Je.Z)(N.bt("嗨，{{facebookFirstName}}！你的年龄是？", "Oh hi, {{facebookFirstName}}! How old are you?", "social.signup.age.collection.header", undefined, true),{facebookFirstName:t}):N.bt("注册以查看更多", "Sign up to see more", "Age collection signup step for Facebook/G+ authentication", undefined, true)}),(0,m.jsx)(s.xu,{children:(0,m.jsx)(s.xv,{size:"300",align:"center",children:N.bt("此内容不会公开显示。我们收集年龄信息，以便为用户提供良好的 Pinterest 体验，包括个性化用户的推荐内容和广告。", "This won't be publicly displayed. We collect age to provide you with the right experience on Pinterest, including to personalize your recommendations and ads.", "social.signup.age.collection.subheader", undefined, true)})})]}),(0,m.jsx)(Ye,{container:e,loadingIndicatorCallback:X,nextUrlParam:ue(),registrationCredentials:ee.registrationCredentials,showResponseMessageModal:"respondMessage"===R.type?S:void 0,onLineEmailMissingError:ge})]}),(0,m.jsx)(E,{layout:"SIGNUP_WITH_AGE",onClick:()=>Ae(),type:"signupToLogin"})]})}case"EmailCollection":{const e=()=>{te({type:"signup",email:ee.registrationCredentials.signupOptions.email}),X(!1)},t=({email:e})=>te({type:"EmailAlreadyExist",email:e});return(0,m.jsxs)(s.xu,{"data-test-id":"line"===ee.registrationCredentials.type?"signup-modal-line-phone-only":"signup-modal-facebook-phone-only",minHeight:400,dangerouslySetInlineStyle:{__style:it},children:[q&&(0,m.jsx)(Ze.Z,{}),(0,m.jsxs)(s.xu,{dangerouslySetInlineStyle:{__style:nt},children:[Le,(0,m.jsx)(Se,{}),(0,m.jsx)(s.xu,{width:310,dangerouslySetInlineStyle:{__style:lt},children:(0,m.jsx)(s.X6,{size:"600",children:N.bt("你的电子邮件地址是什么？", "What's your email address?", "Prompt for email address in after sign in with line", undefined, true)})}),"line"===ee.registrationCredentials.type?(0,m.jsx)(je,{loadingIndicatorCallback:X,nextUrlParam:b,onNotNowClick:e,registrationCredentials:ee.registrationCredentials,showEmailAlreadyExistModal:t,showSocialSignupWithAgeStep:me}):(0,m.jsx)(we,{loadingIndicatorCallback:X,nextUrlParam:b,onNotNowClick:e,registrationCredentials:ee.registrationCredentials,showEmailAlreadyExistModal:t,showSocialSignupWithAgeStep:me})]})]})}case"EmailAlreadyExist":return(0,m.jsxs)(s.xu,{"data-test-id":"login-modal-existing-email",dangerouslySetInlineStyle:{__style:Fe},children:[q&&(0,m.jsx)(Ze.Z,{}),(0,m.jsx)(Se,{}),(0,m.jsx)(s.xu,{overflow:"hidden",maxHeight:120,width:350,dangerouslySetInlineStyle:{__style:lt},children:(0,m.jsx)(Ee,{container:e,modalType:"personalizedLogin",titleText:(0,Ie.nk)(N.bt("你好像已经有 Pinterest 帐户了", "Looks like you're already on Pinterest", "Short title (large font) on the login modal welcoming back a user who previously logged in to Pinterest", undefined, true),{name:W?W.firstName:""}).join("")})}),(0,m.jsx)(s.xu,{marginBottom:3,children:(0,m.jsx)(s.xv,{align:"center",children:ee.email})}),(0,m.jsx)(Te.ZP,{container:e,disablePostSignupNextUrl:!b,email:ee.email,hideEmailField:!0,hideFacebookButton:!0,hideLineButton:!0,hideTermsOfService:!0,loadingIndicatorCallback:X,loginButtonTextOverride:N.bt("继续", "Continue", " - ", undefined, true),nextUrlParam:ue(),onEmailChange:()=>{},onLoginWithMfa:xe,requestContext:O,showResponseMessageModal:"respondMessage"===R.type?S:void 0,socialSignupCallbacks:{type:"ACCOUNT_RECOVERY",switchToAccountRecoverySignupFlow:ye},component:M,attributionLabel:I}),(0,m.jsx)(s.xu,{paddingY:5,children:(0,m.jsx)(s.iz,{})}),(0,m.jsx)(s.xu,{"data-test-id":"login-switch-account",children:(0,m.jsx)(s.iP,{fullWidth:!1,onTap:({event:e})=>{e.preventDefault(),te({type:"login"}),ie(!0),ve()},children:(0,m.jsx)(s.xv,{align:"center",size:"200",weight:"bold",children:(0,m.jsx)(s.rU,{href:"#",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:N.bt("不是你？使用其他帐户登录", "Not you? Log in with a different account", "Short message (in small fonts) on the bottom of the login modal that prompts a user to log in to a different account", undefined, true)})})})}),(0,m.jsx)(s.xu,{marginBottom:4,marginTop:1,children:ze({email:ee.email})}),Le]});case"UnderageConfirmation":return(0,m.jsx)(s.xu,{"data-test-id":"underage-confirmation-modal",dangerouslySetInlineStyle:{__style:_e},children:(0,m.jsx)(z.Z,{birthday:ee.birthday,onEditBirthday:()=>{te({type:"signup",email:ee.email}),X(!1)}})});default:return null}}},751222:(e,t,o)=>{o.d(t,{Z:()=>j});var i=o(667294),a=o(883119),s=o(891643),n=o(45818),l=o(38730),r=o(152448),c=o(975601),d=o(536042),h=o(353226),_=o(785893);function u(e){const t=(0,d.ZP)(),{tooltip:o}=e,[s,n]=(0,i.useState)();return(0,_.jsxs)(a.xu,{"data-test-id":"google-connect-button",position:"relative",children:[(0,_.jsx)(l.Z,{onClick:()=>n(!0),type:"button",styleOverrides:{width:"100%",borderRadius:"20px",border:"0px solid"},children:(0,_.jsxs)(a.kC,{alignItems:"center",justifyContent:"center",children:[(0,_.jsx)(a.xu,{height:24,width:24,marginTop:1,children:(0,_.jsx)(h.Z,{size:20})}),(0,_.jsx)(a.xu,{marginStart:2,children:(0,_.jsx)(a.xv,{weight:"bold",children:t.bt("关联 Google", "Connect with Google", "googleConnectButtonWithDisabledSDK.buttonText", undefined, true)})})]})}),!!o&&(0,_.jsx)(a.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:"12px",left:"100%"}},children:(0,_.jsx)(c.Z,{message:o})}),s&&(0,_.jsx)(r.Z,{type:"google",onDismiss:()=>n(!1)})]})}var p=o(321443),g=o(759495),m=o(95983),x=o(391670),y=o(752977),w=o(315219),f=o(539636),b=o(684113),v=o(324159),P=o(950861),k=o(822123),A=o(245410),S=o(282802),E=o(98736),C=o(272109);const z=({container:e,isAccountSwitch:t,nextUrlParam:o,onLoginWithMfa:l,onLoginWithSuspended:r,onLoginWithVoluntarilyDeactivated:h,showResponseMessageModal:u,socialSignupCallbacks:z,tooltip:j,showLoginRateLimited:T,onClick:L})=>{const{viewer:{type:R}}=(0,s.B$)(),M=(0,g.Z)(),I=(0,x.lO)(),Z=(0,d.ZP)(),{checkExperiment:B}=(0,A.F)(),O=(0,v.M)(),F=(0,i.useRef)(null),N=B("dweb_google_button_locale_fix").anyEnabled,{locale:W}=(0,S.B)(),D=N?W:void 0;return(0,C.Z)((()=>(window.googleConnectButtonContainer=e||"",()=>{delete window.googleConnectButtonContainer}))),(0,C.Z)((()=>{const i=({credential:i,select_by:a})=>{const s=(0,b.mK)((0,b.PL)(a));M({creds:{google_open_id_token:i},loggingOptions:{loggingData:{container:window.googleConnectButtonContainer,page:null==I?void 0:I.pageType,trigger:s},loginAttemptContextEvent:{event_type:7534,element:12981,aux_data:{...(0,m.Z)(R),signup_login_method:k.Z.GPLUS}}},isAccountSwitch:t}).then((i=>{var a,s;const n=null==i||null===(a=i.resource_response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.user;t&&n&&(0,y.Z)(n,"google",e),u?u(!1):P.ZP.handleRedirect(o||P.ZP.defaultSocialLoginRedirectUrl()),B("m10n_measurement_pinterest_tag_us").anyEnabled&&(0,p.Z)()}),(e=>{switch(w.ik.includes(e.api_error_code)&&(null==T||T()),e.api_error_code){case w.E6:null==h||h(e.message);break;case w.Zn:var t;null==l||l({google_open_id_token:i},{phoneNumberEnd:null===(t=e.data)||void 0===t?void 0:t.phone_number_end});break;case w.xN:if("ACCOUNT_RECOVERY"===z.type)z.switchToAccountRecoverySignupFlow("google");else{(0,E.Rp)({event:"start",provider:"google"});const e=(0,f.Z)(i),t={container:window.googleConnectButtonContainer,page:null==I?void 0:I.pageType,trigger:s},o={type:"google",google_open_id_token:i,first_name:e.given_name,last_name:e.family_name,image_url:e.picture};z.switchToSocialSignupWithAgeFlow({type:"google",context:t,signupOptions:{...o}})}break;default:e.api_error_code===w.an&&r?r():(0,n.x)(Z.bt("对不起，你无法登录。", "Sorry, we can't log you in.", "error message when user failed to login caused by suspend/deactivated etc.", undefined, true))}}))};return(async()=>{await(null==O?void 0:O.ensureInit("button",i)),(0,b.ru)({buttonRef:F,isDesktop:!0,locale:D})})(),()=>{null==O||O.removeButtonCallback(i)}})),(0,_.jsxs)(a.xu,{"data-test-id":"google-connect-button",position:"relative",children:[(0,_.jsx)(a.xu,{height:44,children:(0,_.jsx)("div",{ref:F,style:{position:"absolute",width:"100%"},onClick:()=>{null==L||L()}})}),!!j&&(0,_.jsx)(a.xu,{position:"absolute",dangerouslySetInlineStyle:{__style:{top:"12px",left:"100%"}},children:(0,_.jsx)(c.Z,{message:j})})]})};function j(e){const{checkExperiment:t}=(0,A.F)(),{anyEnabled:o}=t("web_google_disabled");return o?(0,_.jsx)(u,{tooltip:e.tooltip}):(0,_.jsx)(z,{...e})}},380540:(e,t,o)=>{o.d(t,{Z:()=>r});var i=o(883119),a=o(583121),s=o(536042),n=o(393599),l=o(785893);const r=({useDefaultText:e})=>{const{limitedLoginModalSubheader:t}=(0,n.H)(),o=(0,s.ZP)();return(0,l.jsx)(i.xv,{align:"center",overflow:"normal",children:e||!t?(0,a.lt)(o):t.text})}},227648:(e,t,o)=>{o.d(t,{OL:()=>V,ZP:()=>G});var i=o(667294),a=o(883119),s=o(388011),n=o(788241),l=o(228742),r=o(384955),c=o(891643),d=o(45818),h=o(94802),_=o(751222),u=o(507057),p=o(435983),g=o(402833),m=o(759495),x=o(95983),y=o(391670),w=o(604094),f=o(970588),b=o(536042),v=o(906215),P=o(121633),k=o(752977),A=o(315219),S=o(18759),E=o(950861),C=o(822123),z=o(61833),j=o(282802),T=o(785629),L=o(643183),R=o(837792),M=o(98736),I=o(565479),Z=o(966633),B=o(392881),O=o(785893);function F(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}const N=(0,i.lazy)((()=>o.e(92798).then(o.bind(o,892798)))),W=R.lf,D="loginmodal",V="6LeZIo0UAAAAAKFpimHio-ff_ddIT8f_QzpXG0_1";class U extends i.Component{constructor(e){super(e),F(this,"onLoginWithVoluntarilyDeactivated",(e=>this.setState({googleValidationError:e}))),F(this,"onLoginWithSuspended",(()=>{const{loadingIndicatorCallback:e}=this.props;e&&e(!1),this.setState({accountRecoveryModalType:l.w[A.an],loading:!1})})),F(this,"onloadCallback",(()=>{try{window.recaptchaIdOne=window.grecaptcha.render("recaptcha_placeholder_1",{sitekey:V,callback:"verifyCaptcha"})}catch(e){}try{window.recaptchaIdTwo=window.grecaptcha.render("recaptcha_placeholder_2",{sitekey:V,callback:"verifyCaptcha"})}catch(e){}})),F(this,"handleButtonClick",((e,t)=>{var o;(0,M.My)("unauth.login.button.clicked");const{logContextEvent:i,desktopCoreLoginContext:{viewer:a}}=this.props;i({event_type:101,element:30,aux_data:{...(0,x.Z)(a.type),signup_login_method:C.Z.EMAIL}}),this.setState({googleValidationError:null,hideFBGoogleToolTip:!1});let s=(0,Z.Z)(null!==(o=this.props.email)&&void 0!==o?o:"",this.emailValidators);if(s)this.setState({emailValidationError:s}),(0,M.My)(`unauth.login.error.CLIENT_ERROR.malformemail.${D}`);else{this.setState({emailValidationError:null}),s=(0,Z.Z)(this.props.password,this.passwordValidators);const e=(0,Z.Z)(this.props.password,this.asciiValidators);s?(this.setState({passwordValidationError:s}),(0,M.My)(`unauth.login.error.CLIENT_ERROR.malformpwd.${D}`)):e?(this.setState({passwordValidationError:e}),(0,M.My)(`unauth.login.error.CLIENT_ERROR.malformpwd.${D}`)):(this.setState({passwordValidationError:null}),this.loginUser("email",void 0,t))}})),F(this,"updateAccountRecoveryModal",(e=>this.setState({accountRecoveryModalType:e}))),F(this,"loadRecaptchaView",(()=>{if("undefined"!=typeof document&&document.head)if(document.getElementById("recaptcha-jssdk"))this.onloadCallback();else{const e=document.createElement("script");e.id="recaptcha-jssdk",e.src="https://www.recaptcha.net/recaptcha/api.js?onload=onloadCallback&render=explicit",document.head&&document.head.appendChild(e)}})),F(this,"handleLoginFailure",((e,t,o)=>{const{email:i,i18n:a,loadingIndicatorCallback:s,setPassword:n}=this.props;(0,M.My)(`unauth.login.error.LOGIN_FAILURE.${e}`),s(!1),this.props.refreshRecaptchaV3Token&&this.props.refreshRecaptchaV3Token();const r=t.http_status||t.httpStatus,c=r===T.Ej?T.Ej:t.api_error_code;var h;if(c===A.Zn)return void E.ZP.handleLoginMfa(o,{phoneNumberEnd:null===(h=t.data)||void 0===h?void 0:h.phone_number_end},this.props.onLoginWithMfa);if(r===T.Ej&&c===A.bd&&t.message&&"!"!==t.message[t.message.length-1]&&!E.ZP.isExceedRecaptchaLocalLimit())return this.loadRecaptchaView(),void this.setState({passwordValidationError:a.bt("哎呀！你登录操作频率过快。请使用 reCAPTCHA 重试。", "Oops! You logged in too quickly. Please try again with the reCAPTCHA.", "Error message showing to user when his/her login attempt exceeds ip based rules, ask they to retry using recaptcha", undefined, true),loading:!1});if(c===A._K&&r===T.AB&&!E.ZP.isExceedRecaptchaLocalLimit())return this.loadRecaptchaView(),void this.setState({passwordValidationError:a.bt("哎呀！你登录操作频率过快。请使用 reCAPTCHA 重试。", "Oops! You logged in too quickly. Please try again with the reCAPTCHA.", "Error message showing to user when his/her login attempt exceeds ip based rules, ask they to retry using recaptcha", undefined, true),loading:!1});const _=(0,S.Z)({error:t,source:"login",onClickPasswordReset:()=>{(0,M.My)("unauth_password_reset_link_tapped"),(0,f.Z)({url:"/v3/users/forgot_password/",method:"POST",data:{username_or_email:i}}).then((()=>this.updateAccountRecoveryModal(E.Ny.PASSWORD_RESET_SENT)))}});_?(this.setState({..._,accountRecoveryModalType:c?l.w[c]:void 0,loading:!1}),_.passwordValidationError&&n("")):((0,d.x)(a.bt("抱歉！我们这边出了点问题。", "Sorry! Something went wrong on our end.", " - ", undefined, true)),this.setState({loading:!1}))})),F(this,"verifyCaptcha",(()=>{const e=window.grecaptcha.getResponse(window.recaptchaIdOne)||window.grecaptcha.getResponse(window.recaptchaIdTwo);E.ZP.updateRecaptchaTimeStamp(),this.handleButtonClick(void 0,e),E.ZP.isExceedRecaptchaLocalLimit()||(void 0!==window.recaptchaIdOne&&window.grecaptcha.reset(window.recaptchaIdOne),void 0!==window.recaptchaIdTwo&&window.grecaptcha.reset(window.recaptchaIdTwo))})),F(this,"handleEmailChange",(e=>{this.props.onEmailChange&&this.props.onEmailChange(e),this.setState({hideFBGoogleToolTip:!0})})),F(this,"handlePasswordChange",(e=>{this.state.passwordValidationError&&this.setState({passwordValidationError:null}),this.props.setPassword(e.target.value)})),F(this,"handleBlur",(()=>{var e;this.setState({googleValidationError:null});let t=(0,Z.Z)(null!==(e=this.props.email)&&void 0!==e?e:"",this.asciiValidators);t&&(0,M.My)(`unauth.login.error.CLIENT_ERROR.nonasciiemail.${D}`),t=(0,Z.Z)(this.props.password,this.asciiValidators),t&&(0,M.My)(`unauth.login.error.CLIENT_ERROR.nonasciipwd.${D}`)})),F(this,"renderSocialButtons",(()=>{const{disablePostSignupNextUrl:e,hideFacebookButton:t,hideLineButton:o,hideGoogleButton:s,isAccountSwitch:n,isPersonalizedLoginFlyout:l,loadingIndicatorCallback:r,nextUrlParam:c,onLoginWithMfa:d,onFBPhoneOnlyConnectVerified:u,onFBMissingEmail:p,container:g="unknown",socialSignupCallbacks:m,showResponseMessageModal:x,isLineAuthenticationEnabled:y,logContextEvent:f,viewType:b,viewParameter:v,component:P,attributionLabel:k}=this.props,{hideFBGoogleToolTip:A}=this.state,S="ACCOUNT_RECOVERY"===m.type?{...m,type:"ACCOUNT_RECOVERY",switchToAccountRecoverySignupFlow:e=>{"facebook"===e?this.updateAccountRecoveryModal(E.Ny.PREVENT_FACEBOOK_REGISTER):"google"===e&&this.updateAccountRecoveryModal(E.Ny.PREVENT_GOOGLE_REGISTER),m.switchToAccountRecoverySignupFlow(e)}}:m,C=e=>{f({view_type:b,view_parameter:v,component:P,element:e,event_type:10441,aux_data:{upsell_reason:k}})},z=!t&&(0,O.jsx)(h.Z,{container:g,disablePostSignupNextUrl:e,isAccountSwitch:n,loadingIndicatorCallback:r,nextUrlParam:c,onFBPhoneOnlyConnectVerified:u,onFBMissingEmail:p,onLoginWithMfa:d,onLoginWithSuspended:this.onLoginWithSuspended,socialSignupCallbacks:S,showResponseMessageModal:x,tooltip:null,showLoginRateLimited:()=>this.updateAccountRecoveryModal(E.Ny.RATE_LIMITED),onClick:()=>{C(13505)}}),j=!s&&(0,O.jsx)(_.Z,{container:g,isAccountSwitch:n,nextUrlParam:c,onLoginWithMfa:d,onLoginWithSuspended:this.onLoginWithSuspended,onLoginWithVoluntarilyDeactivated:this.onLoginWithVoluntarilyDeactivated,showResponseMessageModal:x,tooltip:!A&&this.state.googleValidationError||null,showLoginRateLimited:()=>this.updateAccountRecoveryModal(E.Ny.RATE_LIMITED),socialSignupCallbacks:S,onClick:()=>{C(13504)}}),T=!o&&y&&(0,O.jsx)(w.Z,{name:"SafeSuspense_LineConnectButton",children:(0,O.jsx)(L.Z,{children:(0,O.jsx)(N,{container:g,loadingIndicatorCallback:r,isAccountSwitch:n,nextUrlParam:c,onLoginWithMfa:d,onLoginWithSuspended:this.onLoginWithSuspended,showResponseMessageModal:x,socialSignupCallbacks:S,showLoginRateLimited:()=>this.updateAccountRecoveryModal(E.Ny.RATE_LIMITED),onClick:()=>{C(13507)}})})}),R=!t&&!s?"8px":"0px";return(0,O.jsxs)(a.xu,{"data-test-id":"login-options",dangerouslySetInlineStyle:{__style:{marginTop:l?"9px":"10px"}},children:[z,(0,O.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{height:l?R:"10px"}}}),j,!o&&y&&(0,O.jsxs)(i.Fragment,{children:[(0,O.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{height:l?R:"10px"}}}),T]})]})})),F(this,"renderRegisterForm",(()=>{const{disableEmailLogin:e,email:t,hideEmailField:o,hideFacebookButton:s,hideGoogleButton:n,hidePasswordField:l,i18n:r,isAccountSwitch:c,loginButtonTextOverride:d,password:h,suppressFocus:_,logContextEvent:p,requestContext:{isRTL:g},desktopCoreLoginContext:{viewer:m},viewType:y,viewParameter:w,component:f,attributionLabel:b}=this.props,{emailValidationError:v,loading:P,passwordValidationError:k}=this.state,A=d||r.bt("登录", "Log in", "Copy on the button to log in", undefined, true),S=k&&(0,i.isValidElement)(k)?null:(0,O.jsx)(a.xu,{marginBottom:3,marginTop:2,dangerouslySetInlineStyle:{__style:{float:g?"right":"left"}},children:(0,O.jsx)(a.xv,{size:"200",weight:"bold",children:(0,O.jsx)(a.rU,{href:W+(t?`?q=${t}`:""),onClick:({dangerouslyDisableOnNavigation:e})=>{e(),(0,M.My)("login_modal_forget_account"),(0,M.NC)("click_forget_password"),p({event_type:101,element:10881,aux_data:{...(0,x.Z)(m.type)}})},children:r.bt("忘记密码？", "Forgot your password?", "Desktop login modal link for users to recover their account", undefined, true)})})});return(0,O.jsx)(u.Z,{buttonText:A,disableEmailLogin:e,email:t,emailText:r.bt("电子邮件", "Email", "Placeholder text for email field", undefined, true),emailValidationError:v,hideEmailField:o,hideFacebookButton:s,hideGoogleButton:n,hidePasswordField:l,loading:P&&!c,onButtonClick:this.handleButtonClick,onEmailBlur:this.handleBlur,onEmailChange:this.handleEmailChange,onPasswordChange:this.handlePasswordChange,password:h,passwordResetLink:S,passwordText:r.bt("密码", "Password", " - ", undefined, true),passwordValidationError:k,suppressFocus:_,component:f,attributionLabel:b,viewType:y,viewParameter:w})})),F(this,"renderOriginalForm",(()=>{const{hideFacebookButton:e,hideGoogleButton:t,hidePasswordField:o}=this.props,a=!(o||t&&e);return(0,O.jsxs)(i.Fragment,{children:[this.renderRegisterForm(),a&&(0,O.jsx)(r.Z,{}),this.renderSocialButtons()]})})),F(this,"renderButtons",(()=>this.renderOriginalForm())),this.state={accountRecoveryModalType:null,emailValidationError:null,passwordValidationError:null,googleValidationError:null,loading:!1,hideFBGoogleToolTip:!1};const{i18n:t}=e,o=t.bt("你漏填了一处！别忘了添加电子邮件地址。", "You missed a spot! Don't forget to add your email.", " - ", undefined, true),s=t.bt("呃...看起来不像是电子邮件地址。", "Hmm...that doesn't look like an email address.", " - ", undefined, true),n=t.bt("密码仅能使用字母、数字和特殊字符（例如：?、!、$）组合。", "Use only a mix of letters, numbers and special characters (for example: ?, !, $).", "Login.password.onlyASCII", undefined, true);this.emailValidators=[(0,B.aH)({message:o}),(0,B.GT)({message:s})];const c=t.bt("你输入的密码不正确。", "The password you entered is incorrect.", " - ", undefined, true);this.passwordValidators=[(0,I.r)({shortPassStr:c,samePasswordStr:c,blackPassStr:c})],this.asciiValidators=[(0,B.oR)({message:n})]}componentDidMount(){const{isAccountSwitch:e,nextUrlParam:t,requestContext:o,showResponseMessageModal:i}=this.props;E.ZP.isFullyLoggedIn(o.isAuthenticated,o.loginState)&&!e&&(i?i(!1):E.ZP.handleRedirect(t)),window.onloadCallback=this.onloadCallback,window.verifyCaptcha=this.verifyCaptcha,void 0===window.recaptchaCount?window.recaptchaCount=1:window.recaptchaCount+=1}componentWillUnmount(){void 0!==window.recaptchaCount&&(window.recaptchaCount-=1)}loginUser(e,t,o){const{container:i="unknown",email:a,flushContextEvents:s,isAccountSwitch:n,loadingIndicatorCallback:l,login:r,pageContext:c,showResponseMessageModal:d,desktopCoreLoginContext:{viewer:h},requestContext:_}=this.props;this.setState({loading:!0}),l(!0);const u=t||{username_or_email:a||"",password:this.props.password},p={container:i,page:c?c.pageType:void 0};let g=C.Z.EMAIL;"facebook"===e?g=C.Z.FACEBOOK:"google"===e&&(g=C.Z.GPLUS),v.Z.pause(P.LU),s(),r({creds:u,loggingOptions:{loggingData:p,loginAttemptContextEvent:{event_type:7534,element:"google"===e?12981:void 0,aux_data:{...(0,x.Z)(h.type),signup_login_method:g}}},isAccountSwitch:n,recaptchaV2Token:o,recaptchaV3Token:this.props.recaptchaV3Token||"default"}).then(((e={})=>{E.ZP.storeLoginCredentialsToBrowser(u);let t=this.props.nextUrlParam||E.ZP.defaultLoginRedirectUrl();const{anyEnabled:o}=_.experimentsClient.checkExperiment("m10n_measurement_pinterest_tag_us");if(o&&"undefined"!=typeof window&&window.pintrk)try{window.pintrk("track","custom",{lead_type:"Pinterest Login",em:a})}catch(s){}if(n&&e.resource_response&&e.resource_response.data&&e.resource_response.data.user){const{user:o}=e.resource_response.data;(0,k.Z)(o,"email",i),t="/"+o.username}else E.ZP.storeLoginCredentialsToBrowser(u);d?d(!1):E.ZP.handleRedirect(t)}),(t=>this.handleLoginFailure(e,t,u)))}render(){const{email:e}=this.props;return(0,O.jsxs)(a.xu,{width:268,dangerouslySetInlineStyle:{__style:{margin:"0 auto"}},children:[(0,O.jsx)(l.Z,{email:e||"",modalType:this.state.accountRecoveryModalType,onLoginWithMfa:this.props.onLoginWithMfa,updateAccountRecoveryModal:this.updateAccountRecoveryModal}),this.renderButtons(),!this.props.hideTermsOfService&&(0,O.jsx)(p.Z,{dark:!0})]})}}function G(e){const t=(0,b.ZP)(),{flushContextEvents:o,logContextEvent:a}=(0,s.v)(),l=(0,y.lO)(),{recaptchaV3Token:r,refreshToken:d}=(0,z.D)(),h=(0,c.B$)(),{country:_}=(0,j.B)(),u="JP"===_,p=(0,m.Z)(),[x,w]=(0,i.useState)(""),{viewType:f,viewParameter:v}=(0,n.SU)(),P=(0,g.g)();return(0,O.jsx)(U,{...e,desktopCoreLoginContext:h,flushContextEvents:o,i18n:t,logContextEvent:a,login:p,pageContext:l,password:x,recaptchaV3Token:r,refreshRecaptchaV3Token:d,isLineAuthenticationEnabled:u,setPassword:w,viewType:f,viewParameter:v,unauthDesktopSignupModalPageContext:P})}},507057:(e,t,o)=>{o.d(t,{Z:()=>w});var i=o(667294),a=o(883119),s=o(388011),n=o(38730);const l=["gmail.com","hotmail.com","hotmail.com.ar","yahoo.com.ar","live.com.ar","outlook.com","live.com","bigpond.com","yahoo.com","icloud.com","yahoo.com.au","yahoo.com.br","bol.com.br","yahoo.ca","hotmail.ca","web.de","gmx.de","t-online.de","hotmail.de","hotmail.es","yahoo.es","hotmail.fr","orange.fr","yahoo.fr","live.fr","free.fr","laposte.net","wanadoo.fr","outlook.fr","hotmail.co.uk","rediffmail.com","yahoo.co.in","yahoo.in","libero.it","hotmail.it","alice.it","yahoo.co.jp","ezweb.ne.jp","docomo.ne.jp","i.softbank.jp","softbank.ne.jp","live.com.mx","outlook.es","aol.com","outlook.com","comcast.net"];var r=o(526750),c=o(536042),d=o(98736),h=o(785893);function _({age:e,ageValidationError:t,onAgeChange:o,onAgeError:s}){const n=(0,c.ZP)();return(0,i.useEffect)((()=>{(0,d.My)("dweb.signup_age_step",{type:"email",format:"age"})}),[]),(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)(a.xu,{marginBottom:1,marginStart:2,marginTop:2,children:(0,h.jsx)(a.__,{htmlFor:"age",children:(0,h.jsx)(a.xv,{size:"200",children:n.bt("年龄", "Age", "registerForm.label.age", undefined, true)})})}),(0,h.jsx)(a.xu,{"data-test-id":"ageInputField",children:(0,h.jsx)(a.xu,{marginTop:1,children:(0,h.jsx)(r.Z,{error:null==t?void 0:t.toString(),value:e,onChange:o,onValidation:s,preventValidationOnStart:!0})})})]})}var u=o(591057),p=o(245410);function g({birthday:e,birthdayValidationError:t,setBirthdayValidationError:o,onBirthdayChange:s}){const n=(0,c.ZP)(),{checkExperiment:l}=(0,p.F)(),r=l("web_identity_new_user_birthday_step_copy").anyEnabled;(0,i.useEffect)((()=>{(0,d.My)("dweb.signup_age_step",{type:"email",format:"birthday"})}),[]);return(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)(a.xu,{marginBottom:1,marginStart:2,marginTop:2,children:(0,h.jsxs)(a.kC,{children:[(0,h.jsx)(a.xu,{marginEnd:2,children:(0,h.jsx)(a.__,{htmlFor:"birthdate",children:(0,h.jsx)(a.xv,{size:"200",children:n.bt("出生日期", "Birthdate", "registerForm.label.birthdate", undefined, true)})})}),(0,h.jsx)(a.u,{idealDirection:"right",text:r?n.bt("为了帮助维护 Pinterest 的安全，我们现在需要你提供出生日期。出生日期还有助于我们提供更加个性化的推荐内容和相关广告。我们不会分享此信息，此信息在你的个人资料中不可见。", "To help keep Pinterest safe, we now require your birthdate. Your birthdate also helps us provide more personalized recommendations and relevant ads. We don't share this information and it won't be visible on your profile.", "registerForm.label.birthdate.tooltipDescription", undefined, true):n.bt("我们收集此信息有助于为社区中的年轻人提供更好的体验。我们还会使用你的出生日期来帮助个性化推荐内容和广告。此信息不会公开显示。", "We collect this info to help provide a better experience for the younger people in our community. We’ll also use your birthdate to help personalize your recommendations and ads. It will not be displayed publicly.", "registerForm.label.birthdate.tooltipDescription", undefined, true),zIndex:u.C,children:(0,h.jsx)(a.JO,{accessibilityLabel:n.bt("小贴士", "Tooltip", "registerForm.label.birthdate.tooltip.access", undefined, true),icon:"info-circle"})})]})}),(0,h.jsx)(a.xu,{"data-test-id":"signup-birthdate-field",children:(0,h.jsx)(a.nv,{autoComplete:"bday",errorMessage:t,id:"birthdate",onChange:e=>{s(e),o("")},size:"lg",type:"date",value:e||""})})]})}var m=o(361927),x=o(630089),y=o(811359);function w({buttonText:e,buttonTextLabel:t,disableEmailLogin:o,email:r,emailFieldHasError:u,emailLabel:p,emailText:w,emailValidationError:f,hideEmailField:b,hideFacebookButton:v,hideGoogleButton:P,hidePasswordField:k,onButtonClick:A,onEmailBlur:S,onEmailChange:E,onPasswordChange:C,password:z,passwordResetLink:j,passwordText:T,passwordValidationError:L,signupForm:R,suppressFocus:M,component:I,attributionLabel:Z,viewType:B,viewParameter:O}){const F=(0,c.ZP)(),[N,W]=(0,i.useState)(!!R),[D,V]=(0,i.useState)(null),[U,G]=(0,i.useState)("");let H=f;H||!k&&!o||(v||P?!v&&P?H=F.bt("你的帐户已连接到Facebook。使用 Facebook 按钮登录", "Your account is connected to Facebook - use the Facebook button to log in", "Customized desktop login for users with Facebook", undefined, true):v&&!P&&(H=F.bt("你的帐户已连接到Google。用 Google 按钮登录", "Your account is connected to Google - use the Google button to log in", "Customized desktop login for users with Google", undefined, true)):H=F.bt("你的帐户已连接到 Facebook 和 Google。使用按钮登录", "Your account is connected to Facebook and Google - use the buttons to log in", "Customized desktop login for users with FB and Google", undefined, true));const{logContextEvent:Y}=(0,s.v)();return(0,h.jsxs)("form",{"data-test-id":"registerForm",method:"POST",noValidate:!0,onSubmit:e=>{e.preventDefault(),A(e)},children:[!b&&(0,h.jsx)(a.xu,{marginBottom:1,marginStart:2,children:(0,h.jsx)(a.__,{htmlFor:"email",children:(0,h.jsx)(a.xv,{size:"200",children:F.bt("电子邮件", "Email", "registerForm.label.email", undefined, true)})})}),!b&&(0,h.jsx)(a.xu,{"data-test-id":"emailInputField",dangerouslySetInlineStyle:{__style:{marginBottom:7}},children:(0,h.jsx)(m.Z,{accessibilityLabel:p,autoComplete:"email",disabled:!(null==R||!R.registerRestricted),domainError:D?(0,x.nk)(F.bt("你是不是指 {{ newEmail }}？", "Did you mean {{ newEmail }}?", " - ", undefined, true),{newEmail:(0,h.jsx)(a.xv,{color:"error",inline:!0,size:"200",weight:"bold",children:D},"err_text")}):void 0,focused:!M,hasError:!!f||!!u,id:"email",name:"id",onBlur:()=>{null==S||S(),R&&(r?R.checkEmailExistsWithCompletion({email:r,handleEmailExists:()=>{(0,d.My)("web.unauth.signup.email_entered"),N&&W(!1)},handleEmailNotExist:async()=>{N||W(!0),await R.checkEmailValidation(r)},handleError:()=>{W(!0)}}):W(!0));const e=e=>{G(e),r===e?V(null):(V(e),(0,d.My)("unauth.email_domain_typo_suggestion.shown"))},t=r&&-1!==r.indexOf("@")?r.split("@"):[];if(r&&r!==U||V(null),r&&t&&r.length<60){if(2===t.length){const o=t[1],i=o&&-1!==o.indexOf(".")?o.split("."):[];if(i.length>=2&&"gmail"===i[0])if("com"!==i.slice(1).join(".")){e(t[0]+"@gmail.com")}else V(null)}const o=t[1]&&l.includes(t[1])?null:t[1]&&l.map((e=>{const o=(0,y.Z)(e,t[1]);return 2===o||1===o?e:null})).filter((e=>"string"==typeof e));if(o&&o.length){e(o[0]?`${t[0]}@${o[0]}`:"")}}},onChange:E,placeholder:w,tooltip:H,type:"email",value:r})}),!k&&(0,h.jsx)(a.xu,{marginBottom:1,marginStart:2,children:(0,h.jsx)(a.__,{htmlFor:"password",children:(0,h.jsx)(a.xv,{size:"200",children:F.bt("密码", "Password", "registerForm.label.password", undefined, true)})})}),!k&&(0,h.jsxs)(i.Fragment,{children:[(0,h.jsx)(a.xu,{"data-test-id":"passwordInputField",children:(0,h.jsx)(m.Z,{autoComplete:"new-password",disabled:!!o||!(null==R||!R.registerRestricted),hasError:!!L,id:"password",name:"password",onChange:C,onFocus:()=>{(0,d.NC)("focus_password")},placeholder:T,tooltip:L,type:"password",value:z,focused:!!b&&!M})}),(0,h.jsx)(a.xu,{"data-test-id":"password-reset-button",children:null!=j?j:null})]}),window.recaptchaCount>0?(0,h.jsx)("div",{className:"g-recaptcha",id:`recaptcha_placeholder_${window.recaptchaCount}`,style:{marginTop:"16px",transform:"scale(0.88)",transformOrigin:"0 0"}}):null,R&&("birthday"===R.ageOrBirthday.type?(0,h.jsx)(g,{...R.ageOrBirthday.props}):N&&(0,h.jsx)(_,{...R.ageOrBirthday.props})),(null==R?void 0:R.registerRestricted)&&"birthday"===R.ageOrBirthday.type&&(0,h.jsx)(a.xu,{marginTop:2,children:(0,h.jsx)(a.xv,{size:"100",color:"error",children:F.bt("抱歉，你目前不符合注册 Pinterest 的资格。", "Sorry, you’re not eligible to sign up for Pinterest right now.", "Signup.AgeStep.underageError", undefined, true)})}),!k&&(0,h.jsx)(a.xu,{"data-test-id":"registerFormSubmitButton",children:(0,h.jsx)(n.Z,{accessibilityLabel:t,className:"red SignupButton",disabled:o||!(null==R||!R.registerRestricted),onClick:()=>{Y({view_type:B,view_parameter:O,component:I,element:14320===I?13506:30,event_type:10441,aux_data:{upsell_reason:Z}}),N?((0,d.NC)("press_signup_continue"),(0,d.Rp)({event:"start",provider:"email"})):((0,d.EX)({event:"start",provider:"email"}),(0,d.NC)("press_login_continue"))},styleOverrides:{width:"100%",borderRadius:"20px",marginTop:"8px"},type:"submit",children:(0,h.jsx)(a.xu,{children:e})})})]})}},300218:(e,t,o)=>{o.d(t,{Z:()=>l});var i=o(883119),a=o(293926),s=o(536042),n=o(785893);const l=()=>{const e=(0,s.ZP)();return(0,n.jsx)(i.xu,{alignItems:"center",display:"flex",justifyContent:"center",position:"absolute",width:"100%",height:"100%",children:(0,n.jsxs)(i.xu,{color:"default",height:600,minWidth:"500px",rounding:2,width:"30%",children:[(0,n.jsxs)(i.xu,{alignItems:"center",direction:"column",display:"flex",height:"99%",justifyContent:"center",padding:12,children:[(0,n.jsx)(i.xu,{alignItems:"center",color:"primary",display:"flex",height:60,justifyContent:"center",marginBottom:4,rounding:"circle",width:60,children:(0,n.jsx)(i.JO,{accessibilityLabel:e.bt("正在加载 Google 一键注册", "Loading state for google one tap registration", " - ", undefined, true),color:"inverse",icon:"pin",size:"28"})}),(0,n.jsx)(i.xu,{paddingY:5,dangerouslySetInlineStyle:{__style:{"text-align":"center"}},children:(0,n.jsx)(i.X6,{children:e.bt("欢迎来到 Pinterest！", "Welcome to Pinterest!", "Welcome to Pinterest!", undefined, true)})}),(0,n.jsx)(i.xv,{align:"center",overflow:"normal",children:(0,n.jsx)("span",{className:"deprecatedTextSizeXL",children:e.bt("你对接下来几个问题的回答将会帮助我们找到适合你的点子", "Your answers to the next questions will help us find the right ideas for you", "loading state description while waiting for google one tap registration to complete", undefined, true)})})]}),(0,n.jsx)(i.xu,{width:"100%",children:(0,n.jsx)(a.Z,{duration:6e3,finalProgress:95,shape:"rounded"})})]})})}},152448:(e,t,o)=>{o.d(t,{Z:()=>l});var i=o(883119),a=o(88622),s=o(536042),n=o(785893);function l({type:e,onDismiss:t}){const o=(0,s.ZP)(),l="facebook"===e?o.bt("糟糕！Facebook 不可用", "Oops! Facebook isn't available", "socialAuthDisabled.facebook.title", undefined, true):o.bt("糟糕！Google 不可用", "Oops! Google isn't available", "socialAuthDisabled.google.title", undefined, true),r="facebook"===e?o.bt("目前 Facebook 似乎不可用。尝试另一个选项，或者刷新页面并稍后再试。", "Looks like Facebook isn't available right now. Give another option a try or refresh the page and try again later.", "socialAuthDisabled.facebook.description", undefined, true):o.bt("目前 Google 似乎不可用。尝试另一个选项，或者刷新页面并稍后再试。", "Looks like Google isn't available right now. Give another option a try or refresh the page and try again later.", "socialAuthDisabled.google.description", undefined, true);return(0,n.jsx)(a.ZP,{accessibilityModalLabel:l,footer:(0,n.jsx)(i.kC,{alignItems:"center",justifyContent:"center",children:(0,n.jsx)(i.xu,{paddingX:1,children:(0,n.jsx)(i.zx,{color:"red",onClick:t,text:o.bt("正确", "OK", "socialAuthDisabled.okButton", undefined, true),size:"md"})})}),heading:l,onDismiss:t,children:(0,n.jsx)(i.xu,{paddingX:5,children:(0,n.jsx)(i.xv,{align:"center",children:r})})})}},435983:(e,t,o)=>{o.d(t,{E:()=>r,Z:()=>c});var i=o(883119),a=o(536042),s=o(630089),n=o(837792),l=o(785893);const r="\n.TermsOfService__light a {\n  color: rgba(255,255,255,0.9);\n}\n";function c({dark:e}){const t=(0,a.ZP)();return(0,l.jsx)("div",{style:{marginTop:"12px"},children:(0,l.jsx)("span",{"data-test-id":"terms-of-service",className:e?"":"TermsOfService__light",style:{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",fontSize:"11px",fontWeight:"normal",textAlign:"center",WebkitTransition:"opacity .2s linear",transition:"opacity .2s linear",...e?{color:"#767676",width:"224px"}:{color:"rgba(255,255,255,0.9)",lineHeight:"150%",margin:"10px auto",textShadow:"0 1px rgba(0,0,0,0.18)",width:"272px"}},children:(0,l.jsx)("span",{children:(0,s.nk)(t.bt("继续下一步，即表示你同意 Pinterest 的 {{ tos }} 并且确认你已阅读我们的 {{ privacyPolicy }}。{{ noticeAtCollection }}。", "By continuing, you agree to Pinterest's {{ tos }} and acknowledge you've read our {{ privacyPolicy }}. {{ noticeAtCollection }}.", "termOfService.text", undefined, true),{tos:(0,l.jsx)(i.xu,{"data-test-id":"tos",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{fontWeight:"bold",color:"#111"}},children:(0,l.jsx)(i.rU,{display:"inlineBlock",target:"blank",href:n.dQ,underline:"hover",children:t.bt("服务条款", "Terms of Service", "termOfService.link.tos", undefined, true)},"tos")},"tos"),privacyPolicy:(0,l.jsx)(i.xu,{"data-test-id":"privacy",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{fontWeight:"bold",color:"#111"}},children:(0,l.jsx)(i.rU,{display:"inlineBlock",target:"blank",href:"/_/_/policy/privacy-policy/",underline:"hover",children:t.bt("隐私政策", "Privacy Policy", "termOfService.link.privacyPolicy", undefined, true)},"privacy")},"privacy"),noticeAtCollection:(0,l.jsx)(i.xu,{"data-test-id":"noticeAtCollection",display:"inlineBlock",dangerouslySetInlineStyle:{__style:{fontWeight:"bold",color:"#111"}},children:(0,l.jsx)(i.rU,{display:"inlineBlock",target:"blank",href:n.cv,underline:"hover",children:t.bt("收藏合辑中的通知", "Notice at collection", "termOfService.link.noticeAtCollection", undefined, true)},"noticeAtCollection")},"noticeAtCollection")})})})})}},361927:(e,t,o)=>{o.d(t,{Z:()=>n});var i=o(667294),a=o(883119),s=o(785893);function n({accessibilityLabel:e,autoComplete:t="on",disabled:o,domainError:n,focused:l,hasError:r,helperText:c,id:d,name:h,onBlur:_,onChange:u,onFocus:p,placeholder:g,tooltip:m,type:x,useExperimentalTextfield:y,value:w}){var f;const b=(0,i.useRef)(l),v=(0,i.useRef)(null),P=(0,i.useRef)(r);return(0,i.useEffect)((()=>{var e;b.current&&(null===(e=v.current)||void 0===e||e.focus())}),[]),(0,i.useEffect)((()=>{var e;!1===P.current&&r&&(null===(e=v.current)||void 0===e||e.focus());P.current=r}),[r]),(0,s.jsxs)("fieldset",{style:{position:"relative"},children:[(0,s.jsx)(a.xu,{display:"visuallyHidden",children:(0,s.jsx)(a.__,{htmlFor:d,children:null!==(f=null!=e?e:g)&&void 0!==f?f:""})}),(0,s.jsx)(a.nv,{autoComplete:y?void 0:t,disabled:o,errorMessage:m?y&&n||m:"",helperText:y?void 0:c,id:d,name:h,onBlur:_,onChange:({event:e})=>{u(e)},onFocus:p,placeholder:g,ref:v,size:y?void 0:"lg",type:x,value:w||""})]})}},975601:(e,t,o)=>{o.d(t,{Z:()=>n,g:()=>s});var i=o(883119),a=o(785893);const s="\n.Tooltip_message:before, .Tooltip_message:after {\n  border-style: solid;\n  content: '';\n  display: block;\n  margin-top: -8px;\n  position: absolute;\n  right: 100%;\n  top: 17px;\n  width: 0;\n}\n.Tooltip_message:before {\n  border-color: transparent rgba(0,0,0,0.48);\n  border-width: 8px 10px 8px 0;\n}\n.Tooltip_message:after {\n  border-color: transparent #fff;\n  border-width: 8px 10px 8px 0;\n  margin-right: -1px;\n}\n.Tooltip_mobileMessage:before, .Tooltip_message:after {\n  border-style: solid;\n  display: block;\n  margin-top: -8px;\n  position: absolute;\n  right: 100%;\n  top: 17px;\n  width: 0;\n}\n.Tooltip_mobileMessage:before {\n  border-color: transparent rgba(0,0,0,0.48);\n  border-width: 8px 10px 8px 0;\n}\n.Tooltip_mobileMessage:after {\n  border-color: transparent #fff;\n  border-width: 8px 10px 8px 0;\n  margin-right: -1px;\n}\n.Tooltip_wrapper {\n  position: absolute;\n  left: calc(100% + 12px);\n  z-index: 1;\n}\n.Tooltip_mobileWrapper {\n  margin-top: 7px;\n  z-index: 1;\n}\n";function n({message:e}){return(0,a.jsxs)("div",{className:"Tooltip_wrapper","data-test-id":"tooltip",style:{top:"0px",width:"215px"},children:[(0,a.jsx)("div",{className:"Tooltip_message",style:{background:"#fff",borderRadius:"6px",WebkitBoxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",boxShadow:"0 0 2px rgba(0,0,0,0.38),0 1px 3px rgba(0,0,0,0.32)",color:"#000",fontStyle:"normal",fontWeight:"normal",lineHeight:"150%",padding:"8px 14px",textAlign:"left",maxWidth:"215px",display:"inline-block",float:"left"},children:(0,a.jsx)("span",{dangerouslySetInnerHTML:{__html:e},style:{overflowWrap:"break-word",wordWrap:"break-word"}})}),(0,a.jsx)(i.xu,{})]})}},654194:(e,t,o)=>{o.d(t,{Z:()=>g,b:()=>p});var i=o(667294),a=o(883119),s=o(457628),n=o(791045),l=o(921270),r=o(550140),c=o(536042),d=o(630089),h=o(950861),_=o(98736),u=o(785893);const p=e=>e.bt("即使这是企业帐户，也请使用你自己的生日。", "Use your own birthday even if this is a business account.", "signup.underageconfirmation.info", undefined, true),g=({birthday:e,onEditBirthday:t,onConfirmBirthday:o=(()=>{})})=>{const g=(0,c.ZP)(),[m,x]=(0,i.useState)(!1);return(0,u.jsxs)(i.Fragment,{children:[(0,u.jsx)(a.xu,{padding:8,"data-test-id":"underageconfirmation-modal",children:(0,u.jsxs)(a.kC,{direction:"column",justifyContent:"center",alignItems:"center",children:[(0,u.jsx)(a.xu,{width:420,marginBottom:5,"data-test-id":"underageconfirmation-title",children:(0,u.jsx)(a.X6,{align:"center",size:"600",children:(0,d.nk)(g.bt("你的生日是 {{date}} 吗？", "Is {{date}} your birthday?", "signup.underageconfirmation.question", undefined, true),{date:e?(0,u.jsx)(l.Z,{dateFormatType:l.k.LONG,useUTC:!0,value:new Date(e)}):null})})}),(0,u.jsx)(a.xu,{marginBottom:10,children:(0,u.jsx)(a.xv,{children:p(g)})}),(0,u.jsx)(a.xu,{children:(0,u.jsxs)(a.kC,{children:[(0,u.jsx)(a.xu,{marginEnd:2,children:(0,u.jsx)(a.zx,{text:g.bt("编辑", "Edit", "signup.underageconfirmation.edit", undefined, true),onClick:()=>{(0,_.My)("dweb.underageconfirmation.edit"),s.t8(n.It,"0",(0,s.kZ)(n.It)),t()}})}),(0,u.jsx)(a.zx,{text:g.bt("确认", "Confirm", "signup.underageconfirmation.confirm", undefined, true),type:"submit",color:"red",onClick:()=>{x(!0),(0,_.My)("dweb.underageconfirmation.confirm"),o(),setTimeout((()=>{h.ZP.handleRedirect("/")}),4e3)}})]})})]})}),m&&(0,u.jsx)(a.xu,{fit:!0,dangerouslySetInlineStyle:{__style:{bottom:"50%",left:"50%",transform:"translateX(-50%)"}},paddingX:1,position:"fixed",children:(0,u.jsx)(r.ZP,{onHide:()=>x(!m),text:g.bt("抱歉，你目前不符合注册 Pinterest 的资格。", "Sorry, you’re not eligible to sign up for Pinterest right now.", "signup.underageconfirmation.error", undefined, true),duration:3500})})]})}},45818:(e,t,o)=>{o.d(t,{o:()=>l,x:()=>n});var i=o(667294),a=o(536042);const s=new Set,n=e=>{s.forEach((t=>t(e)))},l=e=>{const t=(0,a.ZP)();(0,i.useEffect)((()=>{const o=o=>{e(o||t.bt("未知错误", "Unknown Error", "unauth.error.modal.unknown", undefined, true))};return s.add(o),()=>{s.delete(o)}}),[])}},261551:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(560544);const a=e=>({type:"facebook",first_name:e.first_name,last_name:e.last_name,email:e.email,gender:e.gender,image_url:e.picture&&!e.picture.data.is_silhouette?e.picture.data.url:void 0,facebook_id:e.id,facebook_token:e.access_token,birthday:e.birthday?(0,i.Z)(e.birthday):void 0})},321443:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(970588);const a=async()=>{try{var e,t,o,a;const s=await(0,i.Z)({url:"/v3/users/me/"}),n=(null===(e=s.resource_response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.email)||(null===(o=((null===(a=s.resource_response)||void 0===a?void 0:a.client_context)||Object.freeze({})).user)||void 0===o?void 0:o.email);"undefined"!=typeof window&&window.pintrk&&window.pintrk("track","custom",{lead_type:"Pinterest Login",em:n})}catch(s){}}},402833:(e,t,o)=>{o.d(t,{g:()=>n,t:()=>s});var i=o(667294);const a=(0,i.createContext)(null),s=a.Provider,n=()=>(0,i.useContext)(a)},95983:(e,t,o)=>{o.d(t,{Z:()=>a});var i=o(675689);const a=e=>"UNAUTH"===e?Object.freeze({}):{login_state:"LIMITED_LOGIN"===e?i.Z.LIMITED:i.Z.DEFAULT}},591057:(e,t,o)=>{o.d(t,{C:()=>s,P:()=>a});var i=o(883119);const a=new i.Ry(1e4),s=new i.H3([a])},391670:(e,t,o)=>{o.d(t,{Mi:()=>a,lO:()=>s});var i=o(583592);const{Provider:a,useMaybeHook:s}=(0,i.Z)("pageContext")},949433:(e,t,o)=>{o.d(t,{Z:()=>a,z:()=>s});var i=o(811359);function a(e){const t=e&&-1!==e.indexOf("@")?e.split("@"):[];if(2===t.length){const e=t[1],o=e&&-1!==e.indexOf(".")?e.split("."):[];if(o.length>=2&&"gmail"===o[0]&&"com"!==o.slice(1).join("."))return!0;const a=(0,i.Z)(e,"gmail.com");if("g"===e.charAt(0)&&(1===a||2===a))return!0}return!1}function s(e,t){const o=e&&-1!==e.indexOf("@")?e.split("@"):[];if(2!==o.length)return!1;const a=o[1],s=a&&-1!==a.indexOf(".")?a.split("."):[],n=s[0];if(n===t&&s.length>3)return!0;if(s.length>=2){const e=(0,i.Z)(n,t);return n.charAt(0)===t.charAt(0)&&(1===e||2===e)}return(2!==s.length||n!==t||2!==s[1].length&&"com"!==s[1])&&(s.length,!1)}},447390:(e,t,o)=>{function i(e){e&&e.focus()}o.d(t,{Z:()=>i})},991937:(e,t,o)=>{o.d(t,{Z:()=>a});const i=e=>e.split("").sort((()=>.5-Math.random())).join("");function a(e,t){const o=e.split("@")[0];let a="";return a=o.includes(".")?o.replace("."," "):o.includes("_")?o.replace("_"," "):o,a=a.replace(/[0-9]/g,""),"GB"===t?"User_"+i(a):(a=a.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substr(1).toLowerCase())),a)}},811359:(e,t,o)=>{function i(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;const o=[];let i,a;for(i=0;i<=t.length;i+=1)o[i]=[i];for(a=0;a<=e.length;a+=1)o[0][a]=a;for(i=1;i<=t.length;i+=1)for(a=1;a<=e.length;a+=1)t.charAt(i-1)===e.charAt(a-1)?o[i][a]=o[i-1][a-1]:o[i][a]=Math.min(o[i-1][a-1]+1,Math.min(o[i][a-1]+1,o[i-1][a]+1));return o[t.length][e.length]}o.d(t,{Z:()=>i})},822123:(e,t,o)=>{o.d(t,{Z:()=>i});const i={EMAIL:1,FACEBOOK:2,GPLUS:3,GOOGLE_ONE_TAP:4,SMARTLOCK:5,MULTIFACTOR:6,SWITCH_ACCOUNT:7,LINE:8}},450667:(e,t,o)=>{o.d(t,{GH:()=>r,JF:()=>m,Jb:()=>u,MI:()=>g,_V:()=>c,sl:()=>h,we:()=>_});var i=o(560544),a=o(970588),s=o(307052),n=o(710197),l=o(98736);const r="274266067164",c=e=>{const t=["public_profile","email","user_friends"];return e?t:[...t,"user_birthday"]},d=["picture.type(large)","id","first_name","last_name","email","gender"],h=e=>{e&&(0,l.dy)({event:"load_script_success",provider:"facebook"}),"undefined"!=typeof window&&window.FB?(e&&(0,l.dy)({event:"initialize_library",provider:"facebook"}),window.FB.init({appId:r,status:!0,xfbml:!0,version:"v2.7"})):e?(0,l.dy)({event:"global_object_not_found",provider:"facebook"}):(0,l.My)("pcons.non_autologin.fb.global_object_not_found")},_=(e,t)=>{t&&(0,l.dy)({event:"load_script_start",provider:"facebook"});return(0,s.Z)((0,n.Z)(e),"FACEBOOK").then((()=>h(t)))},u=()=>new Promise((e=>{"undefined"!=typeof window&&window.FB&&window.FB.getLoginStatus(e)})),p=({userID:e,accessToken:t,data:{birthday:o,email:a,first_name:s,gender:n,last_name:l,picture:r}})=>({type:"facebook",facebook_id:e,facebook_token:t,birthday:o?(0,i.Z)(o):void 0,email:a,first_name:s,gender:n,image_url:r&&!r.data.is_silhouette?r.data.url:void 0,last_name:l});async function g(e,t){var o;const i=(null===(o=(await(0,a.Z)({url:"/v3/facebook/profile_data/",method:"POST",data:{access_token:e,pii_safe_birthday:!0,fields:t?d:[...d,"birthday"]}})).resource_response)||void 0===o?void 0:o.data)||{};return(0,l.My)(i?"pcons.facebook_user.non_empty_user_data_returned":"pcons.facebook_user.empty_user_data_returned"),{access_token:e,birthday:i.birthday,email:i.email,first_name:i.first_name,gender:i.gender,id:i.id,last_name:i.last_name,picture:i.picture}}const m=e=>new Promise((t=>{window.FB.login(t,{scope:c(e).join(",")})})).then((t=>((e,t,o)=>new Promise(((i,a)=>{if("connected"!==e.status)return void a({status:e.status||"unknown"});const{userID:s,accessToken:n}=e.authResponse;g(n,t).then((e=>{i({creds:{facebook_id:s,facebook_token:n,facebook_autologin:(null==o?void 0:o.autologin)||!1},signupOptions:p({userID:s,accessToken:n,data:e})})}),a)})))(t,e)))},18759:(e,t,o)=>{o.d(t,{Z:()=>u});var i=o(883119),a=o(536042),s=o(630089),n=o(315219),l=o(785893);const r=({children:e,onClick:t})=>(0,l.jsx)("button",{onClick:t,style:{background:"transparent",border:"none",verticalAlign:"inherit",padding:0},type:"button",children:(0,l.jsx)(i.xv,{color:"error",inline:!0,size:"200",weight:"bold",children:e},"err_text")});function c({apiErrorCode:e,errorMessage:t,onClickPasswordReset:o}){const c=(0,a.ZP)(),d=(e=>{switch(e){case n.yV:case n.$j:return(0,s.nk)(c.bt("我们注意到你的帐户有异常活动。{{ resetPasswordLink }} 或者用 Facebook 或 Google 帐户登录以返回你的帐户。", "We noticed some strange activity on your account. {{ resetPasswordLink }} or log in with Facebook or Google to get back into your account.", "Error message when user is soft banned", undefined, true),{resetPasswordLink:(0,l.jsx)(r,{onClick:o,children:c.bt("重置密码", "Reset your password", "Link text for password reset", undefined, true)})});case n.iK:return(0,s.nk)(c.bt("你的帐户已与 Google 关联。如果你想使用电子邮箱登录，请访问 {{ resetPasswordLink }}", "Your account is already linked to Google. To log in with email, {{ resetPasswordLink }}", " - ", undefined, true),{resetPasswordLink:(0,l.jsx)(r,{onClick:o,children:c.bt("设置密码。", "set a password.", "Link text to set password for user with account with only google auth", undefined, true)})});case n.nY:return(0,s.nk)(c.bt("你的帐户已与 Facebook 关联。如果你想使用电子邮箱登录，请访问 {{ resetPasswordLink }}", "Your account is already linked to Facebook. To log in with email, {{ resetPasswordLink }}", " - ", undefined, true),{resetPasswordLink:(0,l.jsx)(r,{onClick:o,children:c.bt("设置密码。", "set a password.", "Link text to set password for user with account with only facebook auth", undefined, true)})});case n.nf:return(0,s.nk)(c.bt("你的帐户已与 Apple 关联。此选项仅在 Pinterest iOS 应用程序上可用。如需在此处登录 Pinterest，需要{{ resetPasswordLink }}", "Your account is connected to Apple. This option works only on the Pinterest iOS app. To log into Pinterest here, you’ll need to {{ resetPasswordLink }}", "unauth.web.emailLogin", undefined, true),{resetPasswordLink:(0,l.jsx)(r,{onClick:o,children:c.bt("设置密码。", "set a password.", "Link text to set password for user with account with only apple auth", undefined, true)})});case n.oP:return(0,s.nk)(c.bt("你输入的密码不正确。重试或{{ resetPasswordLink }}", "The password you entered is incorrect. Try again or {{ resetPasswordLink }}", " - ", undefined, true),{resetPasswordLink:(0,l.jsx)(r,{onClick:o,children:c.bt("重置密码", "Reset your password", "Link text for password reset", undefined, true)})});default:return[t]}})(e);return(0,l.jsx)(i.xu,{"data-test-id":"touchableErrorMessage",children:d.map(((e,t)=>(0,l.jsx)(i.xv,{color:"error",inline:!0,size:"200",children:e},`err_message_${t}`)))})}var d=o(785629),h=o(98736);const _=[...n.ZP,d.Ej,n.oP,n.nf].filter((e=>e!==n.RL&&e!==n.an));function u({error:e,onClickPasswordReset:t,source:o}){var i;let a=e.api_error_code;(e.http_status||e.httpStatus)===d.Ej&&(a=d.Ej);const s=a&&_.includes(a)?(0,l.jsx)(c,{apiErrorCode:a,errorMessage:null!==(i=e.message)&&void 0!==i?i:"",onClickPasswordReset:t}):e.message;if(s)switch(a){case n.oP:case n.RL:return{passwordValidationError:s};case n.nY:return{facebookValidationError:s};case n.iK:return{googleValidationError:s};case n.hU:return{emailValidationError:s};case n._K:return{passwordValidationError:s};default:return{emailValidationError:s}}else(0,h.My)(`unauth.login.error.SERVER_ERROR.unknown.${String(a)}.${o}`);return null}},61833:(e,t,o)=>{o.d(t,{D:()=>r,T:()=>l});var i=o(667294),a=o(202858),s=o(785893);const n=(0,i.createContext)({recaptchaV3Token:"",refreshToken:()=>{}});function l({children:e}){const[t,o]=(0,i.useState)(""),l=(0,i.useCallback)((()=>{(0,a.rY)((e=>o(e)),(e=>{}),a.sk)}),[]);(0,i.useEffect)((()=>{l();const e=setInterval(l,a.yc);return()=>{clearInterval(e)}}),[l]);const r=(0,i.useMemo)((()=>({recaptchaV3Token:t,refreshToken:l})),[t,l]);return(0,s.jsx)(n.Provider,{value:r,children:e})}const r=()=>(0,i.useContext)(n)},488203:(e,t,o)=>{o.d(t,{Z:()=>i});const i=(e,t)=>{const o=new URL(e,"https://pinterest.com");return o.search=new URLSearchParams(t).toString(),o.toString().substring(o.origin.length)}},966633:(e,t,o)=>{o.d(t,{Z:()=>i});const i=(e,t)=>{let o;return t.some((t=>{const i=t(e);return i.errors.length>0&&(o=i.errors[0],!0)})),o}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/12127.zh_CN-0f58d9142add2909.mjs.map