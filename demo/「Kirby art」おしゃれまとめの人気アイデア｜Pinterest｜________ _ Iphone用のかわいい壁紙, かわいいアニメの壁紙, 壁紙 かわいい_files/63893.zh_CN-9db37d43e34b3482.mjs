(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[63893,78369],{243600:(e,t,s)=>{s.d(t,{Z:()=>n});const n=["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto","Oxygen-Sans","Ubuntu","Cantarell",'"Fira Sans"','"Droid Sans"','"Helvetica Neue"',"Helvetica",'"ヒラギノ角ゴ Pro W3"','"Hiragino Kaku Gothic Pro"',"メイリオ","Meiryo",'"ＭＳ Ｐゴシック"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},882973:(e,t,s)=>{s.d(t,{Pw:()=>n,SB:()=>i,x9:()=>a});const n=80,i=56,a=e=>"phone"===e?i:n},369840:(e,t,s)=>{s.d(t,{Z:()=>l});var n=s(667294),i=s(883119),a=s(243600),o=s(536042),r=s(785893);function l({dataTestId:e,focusOptionId:t,isFocused:s,name:l,onBlur:c,onChange:h,onClick:d=(()=>{}),onFocus:u,onKeyDown:_,onSearchTrigger:p,placeholder:g,value:x,disabled:m=!1}){const b=(0,o.ZP)(),y=(0,n.useRef)(null);return(0,n.useEffect)((()=>{y.current&&p&&y.current.addEventListener("searchTrigger",p)}),[]),(0,n.useEffect)((()=>{if(!y.current)return;document.activeElement===y.current!==s&&(s?y.current.focus():y.current.blur())}),[s]),(0,r.jsxs)(i.xu,{height:"100%",flex:"grow",children:[(0,r.jsx)("input",{autoCapitalize:"off",autoCorrect:"off",autoComplete:"off","aria-activedescendant":t,"aria-autocomplete":"list","aria-controls":"SuggestionsMenu","aria-describedby":"searchBoxAccessibleText","aria-label":b.bt("搜索", "Search", "searchBox.searchInput.placeholder", undefined, true),"aria-expanded":s,"data-test-id":e,name:l,onBlur:c,onChange:e=>{h(e.target.value)},onClick:d,onFocus:u,onKeyDown:_,placeholder:g||b.bt("搜索", "Search", "searchBox.searchInput.placeholder", undefined, true),ref:y,role:"combobox",style:{backgroundColor:"transparent",border:"none",color:"#333",fontFamily:a.Z,fontSize:16,fontWeight:"normal",height:"100%",outline:"none",padding:"0",width:"100%"},type:"text",value:x,disabled:m}),(0,r.jsx)(i.xu,{display:"none",id:"searchBoxAccessibleText",children:b.bt("自动补全结果可用时，请使用向上和向下箭头查看和进入选择。触屏设备用户，请触摸屏幕或用滑动手势进行探索。", "When autocomplete results are available use up and down arrows to review and enter to select. Touch device users, explore by touch or with swipe gestures.", "searchBox.searchInput.accessibleText", undefined, true)})]})}},118482:(e,t,s)=>{s.d(t,{Z:()=>i});var n=s(739425);function i(e){const t=(0,n.mB)(e.search)||{};let s;if(t.q){const t=e.pathname.split("/");s=t.length>2?t[2]:"pins"}if(t.q&&s){const e=Array.isArray(t.q)?t.q.join(" "):t.q,n=Array.isArray(t.rs)?"":t.rs,i=Array.isArray(t.user)?"":t.user;return{filters:t.filters||"",user:i,query:e||"",rs:n||"",scope:"pins"===s||"buyable_pins"===s||"my_pins"===s||"boards"===s||"users"===s||"videos"===s||"idea_pins"===s?s:"pins"}}return{filters:"",user:"",query:"",rs:"",scope:"pins"}}},363893:(e,t,s)=>{s.d(t,{Z:()=>$});var n=s(667294),i=s(616550),a=s(883119),o=s(563962),r=s(788241),l=s(536042),c=s(988014),h=s(245410),d=s(98736),u=s(618569),_=s(604094),p=s(643183),g=s(846226),x=s(282802),m=s(806685),b=s(578369),y=s(785893);function f({isDesktop:e}){const t=(0,l.ZP)(),s=(0,i.useRouteMatch)(),n=(0,u.Z)(),{country:o,isBot:r,isAuthenticated:c,locale:h}=(0,x.B)(),d=(0,m.bl)(),_="en"===h.slice(0,2),p=_,g=r||!c&&_,f=[];d&&f.push({text:t.bt("今日", "Today", "unauth.header.tabs.today", undefined, true),href:(0,b.tG)()}),p&&f.push({text:t.bt("观看", "Watch", "unauth.header.tabs.videos", undefined, true),href:"/videos/"}),g&&f.push({text:t.bt("购买", "Shop", "unauth.header.tabs.shop", undefined, true),href:"/shopping/"}),f.push({text:c||"JP"!==o?t.bt("探索", "Explore", "unauth.header.tabs.ideas", undefined, true):t.bt("探索点子", "Explore ideas", "unauth.header.tabs.ideas.jp", undefined, true),href:"/ideas/"});let v=-1;return s.path.startsWith("/today/")?v=f.findIndex((e=>e.href===(0,b.tG)())):s.path.startsWith("/ideas/")?v=f.findIndex((e=>"/ideas/"===e.href)):s.path.startsWith("/videos/")?v=f.findIndex((e=>"/videos/"===e.href)):s.path.startsWith("/shopping/")&&(v=f.findIndex((e=>"/shopping/"===e.href))),(0,y.jsx)(a.mQ,{activeTabIndex:v,onChange:({activeTabIndex:t})=>{f[t].href===(0,b.tG)()?n({action:"click",item:"site-map-today"}):"/videos/"===f[t].href?n({action:"click",item:"site-map-videos"}):"/ideas/"===f[t].href?n({action:"click",item:"site-map-ideas"}):"/shopping/"===f[t].href&&n({action:"click",item:"root-nav-shopping"}),e&&(window.location.href=f[t].href)},tabs:f})}var v=s(965533),w=s(819079),k=s(497088),S=s(369840),j=s(118482),C=s(649715),P=s(583592);const{Provider:A,useHook:z}=(0,P.Z)("UnauthHeaderContext");var I=s(882973),T=s(198541);function B(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const E=(0,n.lazy)((()=>s.e(10695).then(s.bind(s,10695))));class L extends n.PureComponent{constructor(e){super(e),B(this,"onResize",(()=>{this.setState({windowHeight:window.innerHeight})})),B(this,"handleTypeaheadItemHover",(e=>{this.setState({hoverItem:e})})),B(this,"handleTypeaheadItemSelected",((e,t)=>{const s=(0,C.Z)(t),n=e.query||"";let{url:i}=e;if(i){const e={eq:s,etslf:Date.now()-this._lastFocused};i=(0,T.Z)(i,e),this.setState({focused:!1,hoverItem:void 0,text:n,query:n}),this.navigate(n,i)}})),B(this,"handleTypeaheadMouseOut",(()=>{this.setState({hoverItem:void 0})})),B(this,"handleBlur",(()=>{this.props.onBlur&&this.props.onBlur(),this.setState({focused:!1})})),B(this,"handleClick",(()=>{this.props.trackInteraction({action:"click",item:"search-input"}),this.setState({focused:!0})})),B(this,"handleFocus",(()=>{(0,d.My)("unauth.search_box.click.focus"),(0,d.NC)("focus_search_box",!0),this._lastFocused=Date.now(),this.setState({focused:!0})})),B(this,"handleKeyDown",(e=>{const{hoverItem:t}=this.state;switch(e.key){case"Enter":this.handleSubmit(e);break;case"Escape":this.handleBlur();break;case"ArrowUp":case"ArrowDown":e.preventDefault();const s="ArrowUp"===e.key,n=this.state.typeaheadSuggestions;let i;i=t?n.indexOf(t)+(s?-1:1):s?n.length-1:0,this.handleTypeaheadItemHover(n[i])}})),B(this,"handleSubmit",(e=>{(0,d.My)("unauth.search_box.submit-search"),e.preventDefault(),this.state.hoverItem?this.handleTypeaheadItemSelected(this.state.hoverItem,this.state.text):this.handleTypedSubmission(e)})),B(this,"handleTypeaheadSuggestionsChange",(e=>{this.setState({typeaheadSuggestions:e})})),B(this,"handleTypedSubmission",(e=>{const t=this.state.text.trim();if(""===t)return;const s=encodeURIComponent(t),n=this.state.currentScope||"pins";let i="recent_week"===this.state.currentBoost?`/search/pins/recent/?q=${s}`:`/search/${n}/?q=${s}`;i+="&rs=typed";const a=(0,C.Z)(t);this.setState({text:a,query:a}),this.handleBlur(),this.navigate(t,i)})),B(this,"handleTextChange",(e=>{this.state.hoverItem?this.setState({hoverItem:void 0,text:e}):this.setState({text:e})})),B(this,"clearAndFocusSearchBox",(()=>{this.setState({text:"",query:"",focused:!0})}));const t=e.queryString;this.state={currentBoost:"",currentScope:"",focused:!!e.initialFocus,hoverItem:void 0,prevOriginalQuery:e.initialText||t,query:t,text:t||e.initialText||"",typeaheadSuggestions:[],windowHeight:void 0}}componentDidMount(){this.onResize(),window.addEventListener("resize",this.onResize)}static getDerivedStateFromProps({initialText:e,queryString:t},{prevOriginalQuery:s}){const n=e||t;return n!==s?{prevOriginalQuery:n,currentBoost:"",text:n,query:n,currentScope:"",hoverItem:void 0}:{}}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}logSearchPinNavigateClick(){this.props.logContextEvent({component:43,element:227,event_type:101,view_type:2,view_parameter:43}),(0,d.My)("unauth.search_box.search")}navigate(e,t){this.logSearchPinNavigateClick(),(0,v.Z)(t,!1),setTimeout((()=>{(0,d.NC)("searchbox_query",!0)}),0)}render(){const{headerOffsetTop:e,i18n:t}=this.props,{focused:s,hoverItem:n,query:i,text:o,windowHeight:r}=this.state,l=s&&i?"":t.bt("轻松搜索晚餐、时尚等内容", "Search for easy dinners, fashion, etc.", " - ", undefined, true);let c;if(r&&this._form&&this._form.getBoundingClientRect){c=r-14-this._form.getBoundingClientRect().bottom}const h=I.Pw+e;return(0,y.jsx)(a.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow",children:(0,y.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"start",flex:"grow",children:[s&&(0,y.jsx)(a.xu,{position:"fixed",right:!0,bottom:!0,left:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0,0,0,0.4)",top:`${h}px`}}}),(0,y.jsx)("form",{action:"/search/pins/",method:"get",name:"search",onSubmit:this.handleSubmit,ref:e=>{this._form=e},style:{flexGrow:"1"},children:(0,y.jsxs)(a.xu,{display:"block",position:"relative",width:"100%",children:[(0,y.jsxs)(a.xu,{alignItems:"center",borderStyle:"lg",color:"default",display:"flex",height:48,position:"relative",rounding:6,children:[(0,y.jsx)("em",{}),(0,y.jsx)(a.xu,{flex:"none",marginStart:4,marginEnd:2,children:(0,y.jsx)(a.JO,{accessibilityLabel:t.bt("搜索", "search", "accessible label for search icon", undefined, true),icon:"search",size:16})}),(0,y.jsxs)(a.kC,{alignItems:"center",flex:"grow",justifyContent:"start",overflow:"hidden",children:[(0,y.jsx)(S.Z,{dataTestId:"search-input",isFocused:s,name:"q",onBlur:this.handleBlur,onChange:this.handleTextChange,onClick:this.handleClick,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,placeholder:l,value:n&&n.label||o}),o&&(0,y.jsx)(a.xu,{marginEnd:1,children:(0,y.jsx)(a.hU,{accessibilityLabel:t.bt("取消", "cancel", "accessible label for cancel icon", undefined, true),icon:"clear",onClick:this.clearAndFocusSearchBox,size:"md",iconColor:"gray"})})]})]}),(0,y.jsx)(_.Z,{name:"SafeSuspense_UnauthHeaderSearchBox_SearchTypeahead",children:(0,y.jsx)(k.Z,{children:(0,y.jsx)(E,{emptySuggestions:this.props.emptySuggestions,focused:s,hoverItem:this.state.hoverItem,maxHeight:c,onBlur:this.handleBlur,onHover:this.handleTypeaheadItemHover,onTypeaheadItemSelected:this.handleTypeaheadItemSelected,onTypeaheadMouseOut:this.handleTypeaheadMouseOut,onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,typeaheadSuggestions:this.state.typeaheadSuggestions,value:o})})})]})})]})})}}function Z(e){const t=(0,o.Z)(),s=(0,u.Z)(),n=(0,l.ZP)(),{headerOffsetTop:a=0}=z(),r=(0,i.useLocation)(),{query:c}=(0,j.Z)(r),{anyEnabled:d}=(0,h.F)().checkExperiment("dweb_unauth_slp_content"),{data:_}=(0,w.Z)({name:"SearchTabResource"});return(0,y.jsx)(L,{...e,emptySuggestions:d&&null!=_?_:[],headerOffsetTop:a,i18n:n,location:r,logContextEvent:t,trackInteraction:s,queryString:c})}const D=(0,n.lazy)((()=>s.e(98253).then(s.bind(s,398253)))),U=(0,n.forwardRef)((({isDesktop:e,onPrimaryButtonClick:t,onLoginButtonClick:s,primaryButtonText:o},r)=>{const[x,m]=(0,n.useState)(!1),b=(0,l.ZP)(),v=(0,i.useLocation)(),w=(0,n.useRef)(null),k=(0,n.useRef)(null),S=(0,n.useRef)(null),{checkExperiment:j}=(0,h.F)(),C=(0,u.Z)(),P=e&&(0,c.C$)(v),A=e&&!(0,c.C$)(v),[z,T]=(0,c.C$)(v)&&["red","gray"]||(0,c.uM)(v)&&["transparent","gray"]||["gray","red"];return(0,n.useEffect)((()=>{if(A){const e=e=>{var t,s;null!==(t=S.current)&&void 0!==t&&t.contains(e.target)||null!==(s=k.current)&&void 0!==s&&s.contains(e.target)||m(!1)};return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}}),[A]),(0,y.jsxs)(a.xu,{alignItems:"center",color:"default",direction:"row",display:"flex",height:I.Pw,justifyContent:"between",padding:4,ref:r,width:"100%",children:[(0,y.jsxs)(a.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,y.jsx)(a.iP,{onTap:()=>{C({action:"click",item:"pinterest-logo",within:"unauth-header"})},children:(0,y.jsx)(g.Z,{id:"unauth-header-logo",children:(0,y.jsx)(a.rU,{href:"/",target:"self",display:"inlineBlock",tapStyle:"compress",rounding:"pill",underline:"none",onClick:({dangerouslyDisableOnNavigation:e})=>e(),children:(0,y.jsxs)(a.xu,{display:"flex",alignItems:"center",direction:"row",paddingX:3,children:[(0,y.jsx)(a.JO,{accessibilityLabel:b.bt("Pinterest", "Pinterest", "Pinterest logo", undefined, true),icon:"pinterest",size:P?32:24,color:"brandPrimary"}),e&&(0,y.jsx)(a.xu,{marginStart:1,dangerouslySetInlineStyle:{__style:{letterSpacing:"-1px"}},onClick:()=>{C({action:"click",item:"pinterest-logo"})},children:(0,y.jsx)(a.X6,{size:"400",color:"error",overflow:"normal",accessibilityLevel:P?1:2,children:b.bt("Pinterest", "Pinterest", "Company name", undefined, true)})})]})})})}),!((0,c.C$)(v)&&e)&&(0,y.jsx)(f,{isDesktop:e})]}),!(0,c.C$)(v)&&(0,y.jsx)(a.xu,{display:"none",mdDisplay:"block",flex:"grow",paddingX:2,"data-test-id":"search-box-container",children:(0,y.jsx)(Z,{})}),(0,y.jsxs)(a.kC,{alignItems:"center",direction:"row",flex:"none",justifyContent:"start",children:[(0,c.C$)(v)&&(0,y.jsxs)(a.xu,{display:"flex",alignItems:"center",justifyContent:"between",marginEnd:6,children:[(0,y.jsx)(a.xu,{margin:4,"data-test-id":"header-about-button",children:(0,y.jsx)(a.xv,{weight:"bold",children:(0,y.jsx)(a.rU,{href:"/_/_/about/",target:"blank",onClick:()=>{(0,d.My)("unauth.homepage_redesign.about_button_click"),C({action:"click",item:"header-about-button"})},children:b.bt("关于", "About", "Link to page describing what Pinterest is.", undefined, true)})})}),(0,y.jsx)(a.xu,{margin:4,"data-test-id":"header-business-button",children:(0,y.jsx)(a.xv,{weight:"bold",children:(0,y.jsx)(a.rU,{href:"/_/_/business/",target:"blank",onClick:()=>{(0,d.My)("unauth.homepage_redesign.business_button_click"),C({action:"click",item:"header-business-button"})},children:b.bt("商业", "Business", "unauth.homepage.link", undefined, true)})})}),(0,y.jsx)(a.xu,{margin:4,"data-test-id":"header-blog-button",children:(0,y.jsx)(a.xv,{weight:"bold",children:(0,y.jsx)(a.rU,{href:"/_/_/blog/",target:"blank",onClick:()=>{(0,d.My)("unauth.homepage_redesign.blog_button_click"),C({action:"click",item:"header-blog-button"})},children:b.bt("博客", "Blog", "Link to the Pinterest business site.", undefined, true)})})})]}),(0,y.jsx)(a.xu,{marginEnd:2,"data-test-id":P?"simple-login-button":"login-button",children:(0,y.jsx)(a.zx,{text:b.bt("登录", "Log in", "Label for log in button", undefined, true),onClick:({event:e})=>s(e),size:P?"md":"lg",color:e&&j("pcons_login_primary_dweb").anyEnabled?e&&(0,c.uM)(v)&&j("pcons_login_primary_dweb").group.includes("pin_page_secondary")?"gray":"red":z,ref:w})}),(!e||!j("pcons_login_primary_dweb").anyEnabled)&&(0,y.jsx)(a.xu,{"data-test-id":P?"simple-signup-button":"signup-button",children:(0,y.jsx)(a.zx,{text:o,onClick:e=>{t(e.event)},color:j("lex_follow_button").group.includes("main_cta")?"gray":T,size:P?"md":"lg"})}),A&&(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(a.xu,{ref:k,children:(0,y.jsx)(a.xu,{display:"flex",marginStart:2,marginTop:3,marginBottom:3,justifyContent:"center","data-test-id":"setting-button",children:(0,y.jsx)(a.hU,{accessibilityLabel:b.bt("设置", "Setting", "unauthHeaderBar.seetingsButton", undefined, true),icon:"arrow-down",size:"xs",onClick:({event:e})=>{e.preventDefault(),e.stopPropagation(),(0,d.NC)("click_header_setting"),C({action:"click",item:"setting-button"}),m(!x)},iconColor:"gray"})})}),x&&(0,y.jsx)(_.Z,{name:"SafeSuspense_UnauthHeader_UnauthSettingFlyout",children:(0,y.jsx)(p.Z,{fallback:(0,y.jsx)(a.xu,{}),children:(0,y.jsx)(a.xu,{ref:S,children:(0,y.jsx)(D,{anchor:k.current})})})})]},"settingButton")]})]})}));U.displayName="UnauthHeader";const q=U;var F=s(549201),H=s(700453),O=s(799006),M=s(580337);const R=()=>{const e=(0,F.HG)(),t=(0,i.useLocation)(),s=!(0,c.C$)(t)&&e&&!(0,c.En)(t),{checkExperiment:n}=(0,h.F)();let a=!1;if(s){const e="unauth_dweb_sticky_header_2",{group:s}=n(e,{dangerouslySkipActivation:!0});a=s.includes("pin")?(0,c.uM)(t)&&n(e).anyEnabled:s.includes("board")?(0,c.am)(t)&&n(e).anyEnabled:n(e).anyEnabled}return!!(0,c.C$)(t)||e&&((0,c.En)(t)||a)};function $({showDesktopSignupModal:e}){const t=(0,l.ZP)(),s=(0,F.ZP)(),c=(0,i.useHistory)(),h=(0,i.useLocation)(),_="desktop"===s,p=R(),g=(0,O.Z)(),x=(0,o.Z)(),m=(0,u.Z)(),{viewType:b,viewParameter:f}=(0,r.SU)(),v=()=>{(0,d.My)("unauth.login_button.click"),(0,d.NC)("mweb_press_header_login"),m({action:"click",within:"unauth-header",item:"login-button"}),e?e("login"):(x({event_type:10439,element:30,component:14213,view_type:b,view_parameter:f,aux_data:{upsell_reason:"click_login_on_header"}}),c.push({pathname:"/login",state:{attributionLabel:"click_login_on_header",...h.state}}))},w=(0,n.useMemo)((()=>({headerOffsetTop:0,searchBoxType:_?"full":"simple"})),[_]);return(0,y.jsxs)(n.Fragment,{children:[(0,y.jsx)(a.xu,{"data-test-id":"unauth-header",position:p?"fixed":"relative",top:!0,width:"100%",zIndex:M.Z,children:(0,y.jsx)(A,{value:w,children:g?(0,y.jsx)(H.ZP,{componentType:14161,within:"unauth-header",children:({handleOpenApp:e})=>(0,y.jsx)(q,{isDesktop:_,primaryButtonText:t.bt("下载应用程序", "Download app", "mweb.unauth_header.download_app", undefined, true),onLoginButtonClick:v,onPrimaryButtonClick:()=>e({deepLinkUri:"/"===h.pathname?h.pathname:h.pathname.substr(1)})})}):(0,y.jsx)(q,{isDesktop:_,primaryButtonText:t.bt("注册", "Sign up", "Text on button on the top bar that leads users to signing up.", undefined, true),onLoginButtonClick:v,onPrimaryButtonClick:()=>{(0,d.My)("unauth.signup_button.click"),(0,d.NC)("mweb_press_header_signup"),m({action:"click",within:"unauth-header",item:"signup-button"}),e?e("signup"):(x({event_type:10439,element:31,component:14215,view_type:b,view_parameter:f,aux_data:{upsell_reason:"click_signup_on_header"}}),c.push({pathname:"/signup",state:{attributionLabel:"click_signup_on_header",...h.state}}))}})})}),p&&(0,y.jsx)(a.xu,{height:I.Pw})]})}},578369:(e,t,s)=>{function n(e,t){return t?`${e}?${new URLSearchParams(t).toString()}`:e}function i(e){return n("/admin/",e)}function a(e){return n("/admin/oauth/logout/",e)}function o(e){return n("/today/",e)}s.d(t,{HF:()=>i,Kn:()=>a,tG:()=>o})}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/63893.zh_CN-9db37d43e34b3482.mjs.map